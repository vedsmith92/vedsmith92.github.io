(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))C(b);new MutationObserver(b=>{for(const w of b)if(w.type==="childList")for(const x of w.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&C(x)}).observe(document,{childList:!0,subtree:!0});function p(b){const w={};return b.integrity&&(w.integrity=b.integrity),b.referrerpolicy&&(w.referrerPolicy=b.referrerpolicy),b.crossorigin==="use-credentials"?w.credentials="include":b.crossorigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function C(b){if(b.ep)return;b.ep=!0;const w=p(b);fetch(b.href,w)}})();const ln={};function S_(f){ln.context=f}const x_=(f,t)=>f===t,Gn=Symbol("solid-proxy"),$s=Symbol("solid-track"),Ws={equals:x_};let Fh=Wh;const zn=1,Us=2,Rh={owned:null,cleanups:null,context:null,owner:null};var _t=null;let ri=null,ct=null,wt=null,En=null,nl=0;function Ii(f,t){const p=ct,C=_t,b=f.length===0,w=b?Rh:{owned:null,cleanups:null,context:null,owner:t||C},x=b?f:()=>f(()=>ci(()=>rl(w)));_t=w,ct=null;try{return Ji(x,!0)}finally{ct=p,_t=C}}function ea(f,t){t=t?Object.assign({},Ws,t):Ws;const p={value:f,observers:null,observerSlots:null,comparator:t.equals||void 0},C=b=>(typeof b=="function"&&(b=b(p.value)),$h(p,b));return[jh.bind(p),C]}function st(f,t,p){const C=il(f,t,!1,zn);Fr(C)}function Mt(f,t,p){Fh=A_;const C=il(f,t,!1,zn);C.user=!0,En?En.push(C):Fr(C)}function an(f,t,p){p=p?Object.assign({},Ws,p):Ws;const C=il(f,t,!0,0);return C.observers=null,C.observerSlots=null,C.comparator=p.equals||void 0,Fr(C),jh.bind(C)}function T_(f){return Ji(f,!1)}function ci(f){let t,p=ct;return ct=null,t=f(),ct=p,t}function O_(f,t,p){const C=Array.isArray(f);let b,w=p&&p.defer;return x=>{let h;if(C){h=Array(f.length);for(let c=0;c<f.length;c++)h[c]=f[c]()}else h=f();if(w){w=!1;return}const i=ci(()=>t(h,b,x));return b=h,i}}function St(f){Mt(()=>ci(f))}function hi(f){return _t===null||(_t.cleanups===null?_t.cleanups=[f]:_t.cleanups.push(f)),f}function Bh(){return ct}function Nh(){return _t}function jh(){const f=ri;if(this.sources&&(this.state||f))if(this.state===zn||f)Fr(this);else{const t=wt;wt=null,Ji(()=>zs(this),!1),wt=t}if(ct){const t=this.observers?this.observers.length:0;ct.sources?(ct.sources.push(this),ct.sourceSlots.push(t)):(ct.sources=[this],ct.sourceSlots=[t]),this.observers?(this.observers.push(ct),this.observerSlots.push(ct.sources.length-1)):(this.observers=[ct],this.observerSlots=[ct.sources.length-1])}return this.value}function $h(f,t,p){let C=f.value;return(!f.comparator||!f.comparator(C,t))&&(f.value=t,f.observers&&f.observers.length&&Ji(()=>{for(let b=0;b<f.observers.length;b+=1){const w=f.observers[b],x=ri&&ri.running;x&&ri.disposed.has(w),(x&&!w.tState||!x&&!w.state)&&(w.pure?wt.push(w):En.push(w),w.observers&&Uh(w)),x||(w.state=zn)}if(wt.length>1e6)throw wt=[],new Error},!1)),t}function Fr(f){if(!f.fn)return;rl(f);const t=_t,p=ct,C=nl;ct=_t=f,E_(f,f.value,C),ct=p,_t=t}function E_(f,t,p){let C;try{C=f.fn(t)}catch(b){f.pure&&(f.state=zn),Gh(b)}(!f.updatedAt||f.updatedAt<=p)&&(f.updatedAt!=null&&"observers"in f?$h(f,C):f.value=C,f.updatedAt=p)}function il(f,t,p,C=zn,b){const w={fn:f,state:C,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:_t,context:null,pure:p};return _t===null||_t!==Rh&&(_t.owned?_t.owned.push(w):_t.owned=[w]),w}function Gs(f){const t=ri;if(f.state===0||t)return;if(f.state===Us||t)return zs(f);if(f.suspense&&ci(f.suspense.inFallback))return f.suspense.effects.push(f);const p=[f];for(;(f=f.owner)&&(!f.updatedAt||f.updatedAt<nl);)(f.state||t)&&p.push(f);for(let C=p.length-1;C>=0;C--)if(f=p[C],f.state===zn||t)Fr(f);else if(f.state===Us||t){const b=wt;wt=null,Ji(()=>zs(f,p[0]),!1),wt=b}}function Ji(f,t){if(wt)return f();let p=!1;t||(wt=[]),En?p=!0:En=[],nl++;try{const C=f();return P_(p),C}catch(C){wt||(En=null),Gh(C)}}function P_(f){if(wt&&(Wh(wt),wt=null),f)return;const t=En;En=null,t.length&&Ji(()=>Fh(t),!1)}function Wh(f){for(let t=0;t<f.length;t++)Gs(f[t])}function A_(f){let t,p=0;for(t=0;t<f.length;t++){const C=f[t];C.user?f[p++]=C:Gs(C)}for(ln.context&&S_(),t=0;t<p;t++)Gs(f[t])}function zs(f,t){const p=ri;f.state=0;for(let C=0;C<f.sources.length;C+=1){const b=f.sources[C];b.sources&&(b.state===zn||p?b!==t&&Gs(b):(b.state===Us||p)&&zs(b,t))}}function Uh(f){const t=ri;for(let p=0;p<f.observers.length;p+=1){const C=f.observers[p];(!C.state||t)&&(C.state=Us,C.pure?wt.push(C):En.push(C),C.observers&&Uh(C))}}function rl(f){let t;if(f.sources)for(;f.sources.length;){const p=f.sources.pop(),C=f.sourceSlots.pop(),b=p.observers;if(b&&b.length){const w=b.pop(),x=p.observerSlots.pop();C<b.length&&(w.sourceSlots[x]=C,b[C]=w,p.observerSlots[C]=x)}}if(f.owned){for(t=0;t<f.owned.length;t++)rl(f.owned[t]);f.owned=null}if(f.cleanups){for(t=0;t<f.cleanups.length;t++)f.cleanups[t]();f.cleanups=null}f.state=0,f.context=null}function L_(f){return f instanceof Error||typeof f=="string"?f:new Error("Unknown error")}function Gh(f){throw f=L_(f),f}const D_=Symbol("fallback");function Hc(f){for(let t=0;t<f.length;t++)f[t]()}function M_(f,t,p={}){let C=[],b=[],w=[],x=0,h=t.length>1?[]:null;return hi(()=>Hc(w)),()=>{let i=f()||[],c,u;return i[$s],ci(()=>{let s=i.length,n,o,d,a,g,v,_,y,T;if(s===0)x!==0&&(Hc(w),w=[],C=[],b=[],x=0,h&&(h=[])),p.fallback&&(C=[D_],b[0]=Ii(P=>(w[0]=P,p.fallback())),x=1);else if(x===0){for(b=new Array(s),u=0;u<s;u++)C[u]=i[u],b[u]=Ii(r);x=s}else{for(d=new Array(s),a=new Array(s),h&&(g=new Array(s)),v=0,_=Math.min(x,s);v<_&&C[v]===i[v];v++);for(_=x-1,y=s-1;_>=v&&y>=v&&C[_]===i[y];_--,y--)d[y]=b[_],a[y]=w[_],h&&(g[y]=h[_]);for(n=new Map,o=new Array(y+1),u=y;u>=v;u--)T=i[u],c=n.get(T),o[u]=c===void 0?-1:c,n.set(T,u);for(c=v;c<=_;c++)T=C[c],u=n.get(T),u!==void 0&&u!==-1?(d[u]=b[c],a[u]=w[c],h&&(g[u]=h[c]),u=o[u],n.set(T,u)):w[c]();for(u=v;u<s;u++)u in d?(b[u]=d[u],w[u]=a[u],h&&(h[u]=g[u],h[u](u))):b[u]=Ii(r);b=b.slice(0,x=s),C=i.slice(0)}return b});function r(s){if(w[u]=s,h){const[n,o]=ea(u);return h[u]=o,t(i[u],n)}return t(i[u])}}}function we(f,t){return ci(()=>f(t||{}))}function zh(f){const t="fallback"in f&&{fallback:()=>f.fallback};return an(M_(()=>f.each,f.children,t||void 0))}function I_(f,t,p){let C=p.length,b=t.length,w=C,x=0,h=0,i=t[b-1].nextSibling,c=null;for(;x<b||h<w;){if(t[x]===p[h]){x++,h++;continue}for(;t[b-1]===p[w-1];)b--,w--;if(b===x){const u=w<C?h?p[h-1].nextSibling:p[w-h]:i;for(;h<w;)f.insertBefore(p[h++],u)}else if(w===h)for(;x<b;)(!c||!c.has(t[x]))&&t[x].remove(),x++;else if(t[x]===p[w-1]&&p[h]===t[b-1]){const u=t[--b].nextSibling;f.insertBefore(p[h++],t[x++].nextSibling),f.insertBefore(p[--w],u),t[b]=p[w]}else{if(!c){c=new Map;let r=h;for(;r<w;)c.set(p[r],r++)}const u=c.get(t[x]);if(u!=null)if(h<u&&u<w){let r=x,s=1,n;for(;++r<b&&r<w&&!((n=c.get(t[r]))==null||n!==u+s);)s++;if(s>u-h){const o=t[x];for(;h<u;)f.insertBefore(p[h++],o)}else f.replaceChild(p[h++],t[x++])}else x++;else t[x++].remove()}}}const Xc="_$DX_DELEGATE";function k_(f,t,p,C={}){let b;return Ii(w=>{b=w,t===document?f():Re(t,f(),t.firstChild?null:void 0,p)},C.owner),()=>{b(),t.textContent=""}}function je(f,t,p){const C=document.createElement("template");C.innerHTML=f;let b=C.content.firstChild;return p&&(b=b.firstChild),b}function cn(f,t=window.document){const p=t[Xc]||(t[Xc]=new Set);for(let C=0,b=f.length;C<b;C++){const w=f[C];p.has(w)||(p.add(w),t.addEventListener(w,F_))}}function Wn(f,t,p){p==null?f.removeAttribute(t):f.setAttribute(t,p)}function gt(f,t){t==null?f.removeAttribute("class"):f.className=t}function si(f,t,p){if(!t)return p?Wn(f,"style"):t;const C=f.style;if(typeof t=="string")return C.cssText=t;typeof p=="string"&&(C.cssText=p=void 0),p||(p={}),t||(t={});let b,w;for(w in p)t[w]==null&&C.removeProperty(w),delete p[w];for(w in t)b=t[w],b!==p[w]&&(C.setProperty(w,b),p[w]=b);return p}function yt(f,t,p){return ci(()=>f(t,p))}function Re(f,t,p,C){if(p!==void 0&&!C&&(C=[]),typeof t!="function")return Ys(f,t,C,p);st(b=>Ys(f,t(),b,p),C)}function F_(f){const t=`$$${f.type}`;let p=f.composedPath&&f.composedPath()[0]||f.target;for(f.target!==p&&Object.defineProperty(f,"target",{configurable:!0,value:p}),Object.defineProperty(f,"currentTarget",{configurable:!0,get(){return p||document}}),ln.registry&&!ln.done&&(ln.done=!0,document.querySelectorAll("[id^=pl-]").forEach(C=>C.remove()));p!==null;){const C=p[t];if(C&&!p.disabled){const b=p[`${t}Data`];if(b!==void 0?C.call(p,b,f):C.call(p,f),f.cancelBubble)return}p=p.host&&p.host!==p&&p.host instanceof Node?p.host:p.parentNode}}function Ys(f,t,p,C,b){for(ln.context&&!p&&(p=[...f.childNodes]);typeof p=="function";)p=p();if(t===p)return p;const w=typeof t,x=C!==void 0;if(f=x&&p[0]&&p[0].parentNode||f,w==="string"||w==="number"){if(ln.context)return p;if(w==="number"&&(t=t.toString()),x){let h=p[0];h&&h.nodeType===3?h.data=t:h=document.createTextNode(t),p=Ei(f,p,C,h)}else p!==""&&typeof p=="string"?p=f.firstChild.data=t:p=f.textContent=t}else if(t==null||w==="boolean"){if(ln.context)return p;p=Ei(f,p,C)}else{if(w==="function")return st(()=>{let h=t();for(;typeof h=="function";)h=h();p=Ys(f,h,p,C)}),()=>p;if(Array.isArray(t)){const h=[],i=p&&Array.isArray(p);if(Wo(h,t,p,b))return st(()=>p=Ys(f,h,p,C,!0)),()=>p;if(ln.context){if(!h.length)return p;for(let c=0;c<h.length;c++)if(h[c].parentNode)return p=h}if(h.length===0){if(p=Ei(f,p,C),x)return p}else i?p.length===0?Vc(f,h,C):I_(f,p,h):(p&&Ei(f),Vc(f,h));p=h}else if(t instanceof Node){if(ln.context&&t.parentNode)return p=x?[t]:t;if(Array.isArray(p)){if(x)return p=Ei(f,p,C,t);Ei(f,p,null,t)}else p==null||p===""||!f.firstChild?f.appendChild(t):f.replaceChild(t,f.firstChild);p=t}}return p}function Wo(f,t,p,C){let b=!1;for(let w=0,x=t.length;w<x;w++){let h=t[w],i=p&&p[w];if(h instanceof Node)f.push(h);else if(!(h==null||h===!0||h===!1))if(Array.isArray(h))b=Wo(f,h,i)||b;else if(typeof h=="function")if(C){for(;typeof h=="function";)h=h();b=Wo(f,Array.isArray(h)?h:[h],Array.isArray(i)?i:[i])||b}else f.push(h),b=!0;else{const c=String(h);i&&i.nodeType===3&&i.data===c?f.push(i):f.push(document.createTextNode(c))}}return b}function Vc(f,t,p=null){for(let C=0,b=t.length;C<b;C++)f.insertBefore(t[C],p)}function Ei(f,t,p,C){if(p===void 0)return f.textContent="";const b=C||document.createTextNode("");if(t.length){let w=!1;for(let x=t.length-1;x>=0;x--){const h=t[x];if(b!==h){const i=h.parentNode===f;!w&&!x?i?f.replaceChild(b,h):f.insertBefore(b,p):i&&h.remove()}else w=!0}}else f.insertBefore(b,p);return[b]}const R_=f=>{const[t,p]=ea();return Mt(()=>{let C=f.children,b,w=!1;Array.isArray(C)||(C=[C]);for(let x=0;x<C.length;x++)if(C[x].key=="fallback")b=C[x];else if(C[x].key=="case"&&C[x].expression?.()){p(C[x]),w=!0;break}w||p(b)}),t},B_=f=>Object.assign(()=>f.children,{key:"case",expression:f.expression}),N_=f=>Object.assign(()=>f.children,{key:"fallback"}),rt=Object.assign(R_,{Case:B_,Fallback:N_});function Kc(f,t,p,C,b){for(t=t.split?t.split("."):t,C=0;C<t.length;C++)f=f?f[t[C]]:b;return f===b?p:f}var Os="undefined",qc="object",Yh="any",Hh="*",oi="__",Hs=typeof process<"u"?process:{};Hs.env&&Hs.env.NODE_ENV;var en=typeof window<"u";Hs.versions!=null&&Hs.versions.node!=null;typeof Deno<"u"&&Deno.core;en&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));function Xh(f,t){return t.charAt(0)[f]()+t.slice(1)}var j_=Xh.bind(null,"toUpperCase"),$_=Xh.bind(null,"toLowerCase");function W_(f){return Vh(f)?j_("null"):typeof f=="object"?H_(f):Object.prototype.toString.call(f).slice(8,-1)}function Xs(f,t){t===void 0&&(t=!0);var p=W_(f);return t?$_(p):p}function Rr(f,t){return typeof t===f}var un=Rr.bind(null,"function"),ki=Rr.bind(null,"string"),Ai=Rr.bind(null,"undefined"),U_=Rr.bind(null,"boolean");Rr.bind(null,"symbol");function Vh(f){return f===null}function G_(f){return Xs(f)==="number"&&!isNaN(f)}function z_(f){return Xs(f)==="array"}function jt(f){if(!Y_(f))return!1;for(var t=f;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(f)===t}function Y_(f){return f&&(typeof f=="object"||f!==null)}function H_(f){return un(f.constructor)?f.constructor.name:null}function X_(f){return f instanceof Error||ki(f.message)&&f.constructor&&G_(f.constructor.stackTraceLimit)}function Kh(f,t){if(typeof t!="object"||Vh(t))return!1;if(t instanceof f)return!0;var p=Xs(new f(""));if(X_(t))for(;t;){if(Xs(t)===p)return!0;t=Object.getPrototypeOf(t)}return!1}Kh.bind(null,TypeError);Kh.bind(null,SyntaxError);function ta(f,t){var p=f instanceof Element||f instanceof HTMLDocument;return p&&t?V_(f,t):p}function V_(f,t){return t===void 0&&(t=""),f&&f.nodeName===t.toUpperCase()}function na(f){var t=[].slice.call(arguments,1);return function(){return f.apply(void 0,[].slice.call(arguments).concat(t))}}na(ta,"form");na(ta,"button");na(ta,"input");na(ta,"select");function Jc(f){try{return decodeURIComponent(f.replace(/\+/g," "))}catch{return null}}function K_(){if(en){var f=navigator,t=f.languages;return f.userLanguage||(t&&t.length?t[0]:f.language)}}function q_(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}}function J_(f){return function(t){for(var p,C=Object.create(null),b=/([^&=]+)=?([^&]*)/g;p=b.exec(t);){var w=Jc(p[1]),x=Jc(p[2]);w.substring(w.length-2)==="[]"?(C[w=w.substring(0,w.length-2)]||(C[w]=[])).push(x):C[w]=x===""||x}for(var h in C){var i=h.split("[");i.length>1&&(Z_(C,i.map(function(c){return c.replace(/[?[\]\\ ]/g,"")}),C[h]),delete C[h])}return C}(function(t){if(t){var p=t.match(/\?(.*)/);return p&&p[1]?p[1].split("#")[0]:""}return en&&window.location.search.substring(1)}(f))}function Z_(f,t,p){for(var C=t.length-1,b=0;b<C;++b){var w=t[b];if(w==="__proto__"||w==="constructor")break;w in f||(f[w]={}),f=f[w]}f[t[C]]=p}function ia(){for(var f="",t=0,p=4294967295*Math.random()|0;t++<36;){var C="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[t-1],b=15&p;f+=C=="-"||C=="4"?C:(C=="x"?b:3&b|8).toString(16),p=t%8==0?4294967295*Math.random()|0:p>>4}return f}var xr="global",$i=oi+"global"+oi,Wi=typeof self===qc&&self.self===self&&self||typeof global===qc&&global.global===global&&global||void 0;function li(f){return Wi[$i][f]}function ui(f,t){return Wi[$i][f]=t}function Zi(f){delete Wi[$i][f]}function Qi(f,t,p){var C;try{if(sl(f)){var b=window[f];C=b[t].bind(b)}}catch{}return C||p}Wi[$i]||(Wi[$i]={});var Es={};function sl(f){if(typeof Es[f]!==Os)return Es[f];try{var t=window[f];t.setItem(Os,Os),t.removeItem(Os)}catch{return Es[f]=!1}return Es[f]=!0}function De(){return De=Object.assign||function(f){for(var t=1;t<arguments.length;t++){var p=arguments[t];for(var C in p)Object.prototype.hasOwnProperty.call(p,C)&&(f[C]=p[C])}return f},De.apply(this,arguments)}var jn="function",On="undefined",Q_="@@redux/"+Math.random().toString(36),Zc=function(){return typeof Symbol===jn&&Symbol.observable||"@@observable"}(),Ps=" != "+jn;function qh(f,t,p){var C;if(typeof t===jn&&typeof p===On&&(p=t,t=void 0),typeof p!==On){if(typeof p!==jn)throw new Error("enhancer"+Ps);return p(qh)(f,t)}if(typeof f!==jn)throw new Error("reducer"+Ps);var b=f,w=t,x=[],h=x,i=!1;function c(){h===x&&(h=x.slice())}function u(){return w}function r(n){if(typeof n!==jn)throw new Error("Listener"+Ps);var o=!0;return c(),h.push(n),function(){if(o){o=!1,c();var d=h.indexOf(n);h.splice(d,1)}}}function s(n){if(!jt(n))throw new Error("Act != obj");if(typeof n.type===On)throw new Error("ActType "+On);if(i)throw new Error("Dispatch in reducer");try{i=!0,w=b(w,n)}finally{i=!1}for(var o=x=h,d=0;d<o.length;d++)(0,o[d])();return n}return s({type:"@@redux/INIT"}),(C={dispatch:s,subscribe:r,getState:u,replaceReducer:function(n){if(typeof n!==jn)throw new Error("next reducer"+Ps);b=n,s({type:"@@redux/INIT"})}})[Zc]=function(){var n,o=r;return(n={subscribe:function(d){if(typeof d!="object")throw new TypeError("Observer != obj");function a(){d.next&&d.next(u())}return a(),{unsubscribe:o(a)}}})[Zc]=function(){return this},n},C}function ey(f,t){var p=t&&t.type;return"action "+(p&&p.toString()||"?")+"reducer "+f+" returns "+On}function Ui(){var f=[].slice.call(arguments);return f.length===0?function(t){return t}:f.length===1?f[0]:f.reduce(function(t,p){return function(){return t(p.apply(void 0,[].slice.call(arguments)))}})}function ty(){var f=arguments;return function(t){return function(p,C,b){var w,x=t(p,C,b),h=x.dispatch,i={getState:x.getState,dispatch:function(c){return h(c)}};return w=[].slice.call(f).map(function(c){return c(i)}),De({},x,{dispatch:h=Ui.apply(void 0,w)(x.dispatch)})}}}var Un=oi+"anon_id",ai=oi+"user_id",Fi=oi+"user_traits",Nn="userId",Li="anonymousId",js=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],Uo=["name","EVENTS","config","loaded"],Le=js.reduce(function(f,t){return f[t]=t,f},{registerPluginType:function(f){return"registerPlugin:"+f},pluginReadyType:function(f){return"ready:"+f}}),Qc=/^utm_/,eh=/^an_prop_/,th=/^an_trait_/;function ny(f){var t=f.storage.setItem;return function(p){return function(C){return function(b){if(b.type===Le.bootstrap){var w=b.params,x=b.user,h=b.persistedUser,i=b.initialUser,c=h.userId===x.userId;h.anonymousId!==x.anonymousId&&t(Un,x.anonymousId),c||t(ai,x.userId),i.traits&&t(Fi,De({},c&&h.traits?h.traits:{},i.traits));var u=Object.keys(b.params);if(u.length){var r=w.an_uid,s=w.an_event,n=u.reduce(function(o,d){if(d.match(Qc)||d.match(/^(d|g)clid/)){var a=d.replace(Qc,"");o.campaign[a==="campaign"?"name":a]=w[d]}return d.match(eh)&&(o.props[d.replace(eh,"")]=w[d]),d.match(th)&&(o.traits[d.replace(th,"")]=w[d]),o},{campaign:{},props:{},traits:{}});p.dispatch(De({type:Le.params,raw:w},n,r?{userId:r}:{})),r&&setTimeout(function(){return f.identify(r,n.traits)},0),s&&setTimeout(function(){return f.track(s,n.props)},0),Object.keys(n.campaign).length&&p.dispatch({type:Le.campaign,campaign:n.campaign})}}return C(b)}}}}function iy(f){return function(t,p){if(t===void 0&&(t={}),p===void 0&&(p={}),p.type===Le.setItemEnd){if(p.key===Un)return De({},t,{anonymousId:p.value});if(p.key===ai)return De({},t,{userId:p.value})}switch(p.type){case Le.identify:return Object.assign({},t,{userId:p.userId,traits:De({},t.traits,p.traits)});case Le.reset:return[ai,Un,Fi].forEach(function(C){f.removeItem(C)}),Object.assign({},t,{userId:null,anonymousId:null,traits:{}});default:return t}}}function nh(f){return{userId:f.getItem(ai),anonymousId:f.getItem(Un),traits:f.getItem(Fi)}}var Go=function(f){return oi+"TEMP"+oi+f};function ry(f){var t=f.storage,p=t.setItem,C=t.removeItem,b=t.getItem;return function(w){return function(x){return function(h){var i=h.userId,c=h.traits,u=h.options;if(h.type===Le.reset&&([ai,Fi,Un].forEach(function(n){C(n)}),[Nn,Li,"traits"].forEach(function(n){Zi(Go(n))})),h.type===Le.identify){b(Un)||p(Un,ia());var r=b(ai),s=b(Fi)||{};r&&r!==i&&w.dispatch({type:Le.userIdChanged,old:{userId:r,traits:s},new:{userId:i,traits:c},options:u}),i&&p(ai,i),c&&p(Fi,De({},s,c))}return x(h)}}}}var wr={};function ih(f,t){wr[f]&&un(wr[f])&&(wr[f](t),delete wr[f])}function Jh(f,t,p){return new Promise(function(C,b){return t()?C(f):p<1?b(De({},f,{queue:!0})):new Promise(function(w){return setTimeout(w,10)}).then(function(w){return Jh(f,t,p-10).then(C,b)})})}function Zh(f,t,p){var C=t(),b=f.getState(),w=b.plugins,x=b.queue,h=b.user;if(!b.context.offline&&x&&x.actions&&x.actions.length){var i=x.actions.reduce(function(u,r,s){return w[r.plugin].loaded?(u.process.push(r),u.processIndex.push(s)):(u.requeue.push(r),u.requeueIndex.push(s)),u},{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(i.processIndex&&i.processIndex.length){i.processIndex.forEach(function(u){var r=x.actions[u],s=r.plugin,n=r.payload.type,o=C[s][n];if(o&&un(o)){var d=function(g,v){return g===void 0&&(g={}),v===void 0&&(v={}),[Nn,Li].reduce(function(_,y){return g.hasOwnProperty(y)&&v[y]&&v[y]!==g[y]&&(_[y]=v[y]),_},g)}(r.payload,h);o({payload:d,config:w[s].config,instance:p});var a=n+":"+s;f.dispatch(De({},d,{type:a,_:{called:a,from:"queueDrain"}}))}});var c=x.actions.filter(function(u,r){return!~i.processIndex.indexOf(r)});x.actions=c}}}var xo=function(f){var t=f.data,p=f.action,C=f.instance,b=f.state,w=f.allPlugins,x=f.allMatches,h=f.store,i=f.EVENTS;try{var c=b.plugins,u=b.context,r=p.type,s=r.match(Ri),n=t.exact.map(function(a){return a.pluginName});s&&(n=x.during.map(function(a){return a.pluginName}));var o=function(a,g){return function(v,_,y){var T=_.config,P=_.name,D=P+"."+v.type;y&&(D=y.event);var B=v.type.match(Ri)?function(j,z,ee,ne,ie){return function(Z,re){var pe=ne?ne.name:j,me=re&&Ar(re)?re:ee;if(ne&&(!(me=re&&Ar(re)?re:[j]).includes(j)||me.length!==1))throw new Error("Method "+z+" can only abort "+j+" plugin. "+JSON.stringify(me)+" input valid");return De({},ie,{abort:{reason:Z,plugins:me,caller:z,_:pe}})}}(P,D,g,y,v):function(j,z){return function(){throw new Error(j.type+" action not cancellable. Remove abort in "+z)}}(v,D);return{payload:sy(v),instance:a,config:T||{},abort:B}}}(C,n),d=t.exact.reduce(function(a,g){var v=g.pluginName,_=g.methodName,y=!1;return _.match(/^initialize/)||_.match(/^reset/)||(y=!c[v].loaded),u.offline&&_.match(/^(page|track|identify)/)&&(y=!0),a[""+v]=y,a},{});return Promise.resolve(t.exact.reduce(function(a,g,v){var _=g.pluginName;return Promise.resolve(a).then(function(y){function T(){return Promise.resolve(y)}var P=function(){if(t.namespaced&&t.namespaced[_])return Promise.resolve(t.namespaced[_].reduce(function(D,B,j){return Promise.resolve(D).then(function(z){return B.method&&un(B.method)?(function(Z,re){var pe=ch(Z);if(pe&&pe.name===re){var me=ch(pe.method);throw new Error([re+" plugin is calling method "+Z,"Plugins cant call self","Use "+pe.method+" "+(me?"or "+me.method:"")+" in "+re+" plugin insteadof "+Z].join(`
`))}}(B.methodName,B.pluginName),Promise.resolve(B.method({payload:z,instance:C,abort:(ee=z,ne=_,ie=B.pluginName,function(Z,re){return De({},ee,{abort:{reason:Z,plugins:re||[ne],caller:r,from:ie||ne}})}),config:ah(B.pluginName,c,w),plugins:c})).then(function(Z){var re=jt(Z)?Z:{};return Promise.resolve(De({},z,re))})):z;var ee,ne,ie})},Promise.resolve(p))).then(function(D){y[_]=D});y[_]=p}();return P&&P.then?P.then(T):T()})},Promise.resolve({}))).then(function(a){return Promise.resolve(t.exact.reduce(function(g,v,_){try{var y=t.exact.length===_+1,T=v.pluginName,P=w[T];return Promise.resolve(g).then(function(D){var B=a[T]?a[T]:{};if(s&&(B=D),Oo(B,T))return To({data:B,method:r,instance:C,pluginName:T,store:h}),Promise.resolve(D);if(Oo(D,T))return y&&To({data:D,method:r,instance:C,store:h}),Promise.resolve(D);if(d.hasOwnProperty(T)&&d[T]===!0)return h.dispatch({type:"queue",plugin:T,payload:B,_:{called:"queue",from:"queueMechanism"}}),Promise.resolve(D);var j=o(a[T],w[T]);return Promise.resolve(P[r]({abort:j.abort,payload:B,instance:C,config:ah(T,c,w),plugins:c})).then(function(z){var ee=jt(z)?z:{},ne=De({},D,ee),ie=a[T];if(Oo(ie,T))To({data:ie,method:r,instance:C,pluginName:T,store:h});else{var Z=r+":"+T;(Z.match(/:/g)||[]).length<2&&!r.match(rh)&&!r.match(sh)&&C.dispatch(De({},s?ne:B,{type:Z,_:{called:Z,from:"submethod"}}))}return Promise.resolve(ne)})})}catch(D){return Promise.reject(D)}},Promise.resolve(p))).then(function(g){if(!(r.match(Ri)||r.match(/^registerPlugin/)||r.match(sh)||r.match(rh)||r.match(/^params/)||r.match(/^userIdChanged/))){if(i.plugins.includes(r),g._&&g._.originalAction===r)return g;var v=De({},g,{_:{originalAction:g.type,called:g.type,from:"engineEnd"}});Qh(g,t.exact.length)&&!r.match(/End$/)&&(v=De({},v,{type:g.type+"Aborted"})),h.dispatch(v)}return g})})}catch(a){return Promise.reject(a)}},Ri=/Start$/,rh=/^bootstrap/,sh=/^ready/;function To(f){var t=f.pluginName,p=f.method+"Aborted"+(t?":"+t:"");f.store.dispatch(De({},f.data,{type:p,_:{called:p,from:"abort"}}))}function ah(f,t,p){var C=t[f]||p[f];return C&&C.config?C.config:{}}function oh(f,t){return t.reduce(function(p,C){return C[f]?p.concat({methodName:f,pluginName:C.name,method:C[f]}):p},[])}function lh(f,t){var p=f.replace(Ri,""),C=t?":"+t:"";return[""+f+C,""+p+C,p+"End"+C]}function Oo(f,t){var p=f.abort;return!!p&&(p===!0||uh(p,t)||p&&uh(p.plugins,t))}function Qh(f,t){var p=f.abort;if(!p)return!1;if(p===!0||ki(p))return!0;var C=p.plugins;return Ar(p)&&p.length===t||Ar(C)&&C.length===t}function Ar(f){return Array.isArray(f)}function uh(f,t){return!(!f||!Ar(f))&&f.includes(t)}function ch(f){var t=f.match(/(.*):(.*)/);return!!t&&{method:t[1],name:t[2]}}function sy(f){return Object.keys(f).reduce(function(t,p){return p==="type"||(t[p]=jt(f[p])?Object.assign({},f[p]):f[p]),t},{})}function ay(f,t,p){var C={};return function(b){return function(w){return function(x){try{var h,i=function(y){return h?y:w(r)},c=x.type,u=x.plugins,r=x;if(x.abort)return Promise.resolve(w(x));if(c===Le.enablePlugin&&b.dispatch({type:Le.initializeStart,plugins:u,disabled:[],fromEnable:!0,meta:x.meta}),c===Le.disablePlugin&&setTimeout(function(){return ih(x.meta.rid,{payload:x})},0),c===Le.initializeEnd){var s=t(),n=Object.keys(s),o=n.filter(function(y){return u.includes(y)}).map(function(y){return s[y]}),d=[],a=[],g=x.disabled,v=o.map(function(y){var T=y.name;return Jh(y,y.loaded,1e4).then(function(P){return C[T]||(b.dispatch({type:Le.pluginReadyType(T),name:T,events:Object.keys(y).filter(function(D){return!Uo.includes(D)})}),C[T]=!0),d=d.concat(T),y}).catch(function(P){if(P instanceof Error)throw new Error(P);return a=a.concat(P.name),P})});Promise.all(v).then(function(y){var T={plugins:d,failed:a,disabled:g};setTimeout(function(){n.length===v.length+g.length&&b.dispatch(De({},{type:Le.ready},T))},0)})}var _=function(){if(c!==Le.bootstrap)return/^ready:([^:]*)$/.test(c)&&setTimeout(function(){return Zh(b,t,f)},0),Promise.resolve(function(y,T,P,D,B){try{var j=un(T)?T():T,z=y.type,ee=z.replace(Ri,"");if(y._&&y._.called)return Promise.resolve(y);var ne=P.getState(),ie=(pe=j,(me=ne.plugins)===void 0&&(me={}),(G=y.options)===void 0&&(G={}),Object.keys(pe).filter(function(O){var I=G.plugins||{};return U_(I[O])?I[O]:I.all!==!1&&(!me[O]||me[O].enabled!==!1)}).map(function(O){return pe[O]}));z===Le.initializeStart&&y.fromEnable&&(ie=Object.keys(ne.plugins).filter(function(O){var I=ne.plugins[O];return y.plugins.includes(O)&&!I.initialized}).map(function(O){return j[O]}));var Z=ie.map(function(O){return O.name}),re=function(O,I,k){var R=lh(O).map(function(Y){return oh(Y,I)});return I.reduce(function(Y,F){var A=F.name,$=lh(O,A).map(function(le){return oh(le,I)}),U=$[0],Q=$[1],K=$[2];return U.length&&(Y.beforeNS[A]=U),Q.length&&(Y.duringNS[A]=Q),K.length&&(Y.afterNS[A]=K),Y},{before:R[0],beforeNS:{},during:R[1],duringNS:{},after:R[2],afterNS:{}})}(z,ie);return Promise.resolve(xo({action:y,data:{exact:re.before,namespaced:re.beforeNS},state:ne,allPlugins:j,allMatches:re,instance:P,store:D,EVENTS:B})).then(function(O){function I(){var Y=function(){if(z.match(Ri))return Promise.resolve(xo({action:De({},k,{type:ee+"End"}),data:{exact:re.after,namespaced:re.afterNS},state:ne,allPlugins:j,allMatches:re,instance:P,store:D,EVENTS:B})).then(function(F){F.meta&&F.meta.hasCallback&&ih(F.meta.rid,{payload:F})})}();return Y&&Y.then?Y.then(function(){return O}):O}if(Qh(O,Z.length))return O;var k,R=function(){if(z!==ee)return Promise.resolve(xo({action:De({},O,{type:ee}),data:{exact:re.during,namespaced:re.duringNS},state:ne,allPlugins:j,allMatches:re,instance:P,store:D,EVENTS:B})).then(function(Y){k=Y});k=O}();return R&&R.then?R.then(I):I()})}catch(O){return Promise.reject(O)}var pe,me,G}(x,t,f,b,p)).then(function(y){var T=w(y);return h=1,T})}();return Promise.resolve(_&&_.then?_.then(i):i(_))}catch(y){return Promise.reject(y)}}}}}function oy(f){return function(t){return function(p){return function(C){var b=C.type,w=C.key,x=C.value,h=C.options;if(b===Le.setItem||b===Le.removeItem){if(C.abort)return p(C);b===Le.setItem?f.setItem(w,x,h):f.removeItem(w,h)}return p(C)}}}}var ly=function(){var f=this;this.before=[],this.after=[],this.addMiddleware=function(t,p){f[p]=f[p].concat(t)},this.removeMiddleware=function(t,p){var C=f[p].findIndex(function(b){return b===t});C!==-1&&(f[p]=[].concat(f[p].slice(0,C),f[p].slice(C+1)))},this.dynamicMiddlewares=function(t){return function(p){return function(C){return function(b){var w={getState:p.getState,dispatch:function(h){return p.dispatch(h)}},x=f[t].map(function(h){return h(w)});return Ui.apply(void 0,x)(C)(b)}}}}};function uy(f){return function(t,p){t===void 0&&(t={});var C={};if(p.type==="initialize:aborted")return t;if(/^registerPlugin:([^:]*)$/.test(p.type)){var b=hh(p.type,"registerPlugin"),w=f()[b];if(!w||!b)return t;var x=p.enabled;return C[b]={enabled:x,initialized:!!x&&Boolean(!w.initialize),loaded:!!x&&Boolean(w.loaded()),config:w.config||{}},De({},t,C)}if(/^initialize:([^:]*)$/.test(p.type)){var h=hh(p.type,Le.initialize),i=f()[h];return i&&h?(C[h]=De({},t[h],{initialized:!0,loaded:Boolean(i.loaded())}),De({},t,C)):t}if(/^ready:([^:]*)$/.test(p.type))return C[p.name]=De({},t[p.name],{loaded:!0}),De({},t,C);switch(p.type){case Le.disablePlugin:return De({},t,fh(p.plugins,!1,t));case Le.enablePlugin:return De({},t,fh(p.plugins,!0,t));default:return t}}}function hh(f,t){return f.substring(t.length+1,f.length)}function fh(f,t,p){return f.reduce(function(C,b){return C[b]=De({},p[b],{enabled:t}),C},p)}function ef(f){try{return JSON.parse(JSON.stringify(f))}catch{}return f}var cy={last:{},history:[]};function hy(f,t){f===void 0&&(f=cy);var p=t.options,C=t.meta;if(t.type===Le.track){var b=ef(De({event:t.event,properties:t.properties},Object.keys(p).length&&{options:p},{meta:C}));return De({},f,{last:b,history:f.history.concat(b)})}return f}var fy={actions:[]};function dy(f,t){f===void 0&&(f=fy);var p=t.payload;switch(t.type){case"queue":var C;return C=p&&p.type&&p.type===Le.identify?[t].concat(f.actions):f.actions.concat(t),De({},f,{actions:C});case"dequeue":return[];default:return f}}var tf=/#.*$/;function gy(f){var t=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(f);return"/"+(t&&t[3]?t[3].split("?")[0].replace(tf,""):"")}var nf,rf,sf,af,py=function(f){if(f===void 0&&(f={}),!en)return f;var t=document,p=t.title,C=t.referrer,b=window,w=b.location,x=b.innerWidth,h=b.innerHeight,i=w.hash,c=w.search,u=function(s){var n=function(){if(en){for(var o,d=document.getElementsByTagName("link"),a=0;o=d[a];a++)if(o.getAttribute("rel")==="canonical")return o.getAttribute("href")}}();return n?n.match(/\?/)?n:n+s:window.location.href.replace(tf,"")}(c),r={title:p,url:u,path:gy(u),hash:i,search:c,width:x,height:h};return C&&C!==""&&(r.referrer=C),De({},r,f)},vy={last:{},history:[]};function my(f,t){f===void 0&&(f=vy);var p=t.options;if(t.type===Le.page){var C=ef(De({properties:t.properties,meta:t.meta},Object.keys(p).length&&{options:p}));return De({},f,{last:C,history:f.history.concat(C)})}return f}nf=function(){if(!en)return!1;var f=navigator.appVersion;return~f.indexOf("Win")?"Windows":~f.indexOf("Mac")?"MacOS":~f.indexOf("X11")?"UNIX":~f.indexOf("Linux")?"Linux":"Unknown OS"}(),rf=en?document.referrer:null,sf=K_(),af=q_();var dh={initialized:!1,sessionId:ia(),app:null,version:null,debug:!1,offline:!!en&&!navigator.onLine,os:{name:nf},userAgent:en?navigator.userAgent:"node",library:{name:"analytics",version:"0.11.0"},timezone:af,locale:sf,campaign:{},referrer:rf};function _y(f,t){f===void 0&&(f=dh);var p=f.initialized,C=t.campaign;switch(t.type){case Le.campaign:return De({},f,{campaign:C});case Le.offline:return De({},f,{offline:!0});case Le.online:return De({},f,{offline:!1});default:return p?f:De({},dh,f,{initialized:!0})}}var yy=["plugins","reducers","storage"];function Cy(f,t,p){if(en){var C=window[(p?"add":"remove")+"EventListener"];f.split(" ").forEach(function(b){C(b,t)})}}function by(f){var t=Cy.bind(null,"online offline",function(p){return Promise.resolve(!navigator.onLine).then(f)});return t(!0),function(p){return t(!1)}}function of(){return ui("analytics",[]),function(f){return function(t,p,C){var b=f(t,p,C),w=b.dispatch;return Object.assign(b,{dispatch:function(x){return Wi[$i].analytics.push(x.action||x),w(x)}})}}}function gh(f){return function(){return Ui(Ui.apply(null,arguments),of())}}function Eo(f){return f?z_(f)?f:[f]:[]}function ph(f,t,p){f===void 0&&(f={});var C,b,w=ia();return t&&(wr[w]=(C=t,b=function(x){for(var h,i=x||Array.prototype.slice.call(arguments),c=0;c<i.length;c++)if(un(i[c])){h=i[c];break}return h}(p),function(x){b&&b(x),C(x)})),De({},f,{rid:w,ts:new Date().getTime()},t?{hasCallback:!0}:{})}function wy(f){f===void 0&&(f={});var t=f.reducers||{},p=f.initialUser||{},C=(f.plugins||[]).reduce(function(G,O){if(un(O))return G.middlewares=G.middlewares.concat(O),G;if(O.NAMESPACE&&(O.name=O.NAMESPACE),!O.name)throw new Error("https://lytics.dev/errors/1");var I=O.EVENTS?Object.keys(O.EVENTS).map(function(Y){return O.EVENTS[Y]}):[];G.pluginEnabled[O.name]=!(O.enabled===!1||O.config&&O.config.enabled===!1),delete O.enabled,O.methods&&(G.methods[O.name]=Object.keys(O.methods).reduce(function(Y,F){var A;return Y[F]=(A=O.methods[F],function(){for(var $=Array.prototype.slice.call(arguments),U=new Array(A.length),Q=0;Q<$.length;Q++)U[Q]=$[Q];return U[U.length]=y,A.apply({instance:y},U)}),Y},{}),delete O.methods);var k=Object.keys(O).concat(I),R=new Set(G.events.concat(k));if(G.events=Array.from(R),G.pluginsArray=G.pluginsArray.concat(O),G.plugins[O.name])throw new Error(O.name+"AlreadyLoaded");return G.plugins[O.name]=O,G.plugins[O.name].loaded||(G.plugins[O.name].loaded=function(){return!0}),G},{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),b=f.storage?f.storage:{getItem:li,setItem:ui,removeItem:Zi},w=function(G){return function(O,I,k){return I.getState("user")[O]||(k&&jt(k)&&k[O]?k[O]:nh(G)[O]||li(Go(O))||null)}}(b),x=C.plugins,h=C.events.filter(function(G){return!Uo.includes(G)}).sort(),i=new Set(h.concat(js).filter(function(G){return!Uo.includes(G)})),c=Array.from(i).sort(),u=function(){return x},r=new ly,s=r.addMiddleware,n=r.removeMiddleware,o=r.dynamicMiddlewares,d=function(){throw new Error("Abort disabled inListener")},a=J_(),g=nh(b),v=De({},g,p,a.an_uid?{userId:a.an_uid}:{},a.an_aid?{anonymousId:a.an_aid}:{});v.anonymousId||(v.anonymousId=ia());var _=De({enable:function(G,O){return new Promise(function(I){Z.dispatch({type:Le.enablePlugin,plugins:Eo(G),_:{originalAction:Le.enablePlugin}},I,[O])})},disable:function(G,O){return new Promise(function(I){Z.dispatch({type:Le.disablePlugin,plugins:Eo(G),_:{originalAction:Le.disablePlugin}},I,[O])})}},C.methods),y={identify:function(G,O,I,k){try{var R=ki(G)?G:null,Y=jt(G)?G:O,F=I||{},A=y.user();ui(Go(Nn),R);var $=R||Y.userId||w(Nn,y,Y);return Promise.resolve(new Promise(function(U){Z.dispatch(De({type:Le.identifyStart,userId:$,traits:Y||{},options:F,anonymousId:A.anonymousId},A.id&&A.id!==R&&{previousId:A.id}),U,[O,I,k])}))}catch(U){return Promise.reject(U)}},track:function(G,O,I,k){try{var R=jt(G)?G.event:G;if(!R||!ki(R))throw new Error("EventMissing");var Y=jt(G)?G:O||{},F=jt(I)?I:{};return Promise.resolve(new Promise(function(A){Z.dispatch({type:Le.trackStart,event:R,properties:Y,options:F,userId:w(Nn,y,O),anonymousId:w(Li,y,O)},A,[O,I,k])}))}catch(A){return Promise.reject(A)}},page:function(G,O,I){try{var k=jt(G)?G:{},R=jt(O)?O:{};return Promise.resolve(new Promise(function(Y){Z.dispatch({type:Le.pageStart,properties:py(k),options:R,userId:w(Nn,y,k),anonymousId:w(Li,y,k)},Y,[G,O,I])}))}catch(Y){return Promise.reject(Y)}},user:function(G){if(G===Nn||G==="id")return w(Nn,y);if(G===Li||G==="anonId")return w(Li,y);var O=y.getState("user");return G?Kc(O,G):O},reset:function(G){return new Promise(function(O){Z.dispatch({type:Le.resetStart},O,G)})},ready:function(G){return y.on(Le.ready,G)},on:function(G,O){if(!G||!un(O))return!1;if(G===Le.bootstrap)throw new Error(".on disabled for "+G);var I=/Start$|Start:/;if(G==="*"){var k=function(A){return function($){return function(U){return U.type.match(I)&&O({payload:U,instance:y,plugins:x}),$(U)}}},R=function(A){return function($){return function(U){return U.type.match(I)||O({payload:U,instance:y,plugins:x}),$(U)}}};return s(k,As),s(R,Ls),function(){n(k,As),n(R,Ls)}}var Y=G.match(I)?As:Ls,F=function(A){return function($){return function(U){return U.type===G&&O({payload:U,instance:y,plugins:x,abort:d}),$(U)}}};return s(F,Y),function(){return n(F,Y)}},once:function(G,O){if(!G||!un(O))return!1;if(G===Le.bootstrap)throw new Error(".once disabled for "+G);var I=y.on(G,function(k){O({payload:k.payload,instance:y,plugins:x,abort:d}),I()});return I},getState:function(G){var O=Z.getState();return G?Kc(O,G):Object.assign({},O)},dispatch:function(G){var O=ki(G)?{type:G}:G;if(js.includes(O.type))throw new Error("reserved action "+O.type);var I=De({},O,{_:De({originalAction:O.type},G._||{})});Z.dispatch(I)},enablePlugin:_.enable,disablePlugin:_.disable,plugins:_,storage:{getItem:b.getItem,setItem:function(G,O,I){Z.dispatch({type:Le.setItemStart,key:G,value:O,options:I})},removeItem:function(G,O){Z.dispatch({type:Le.removeItemStart,key:G,options:O})}},setAnonymousId:function(G,O){y.storage.setItem(Un,G,O)},events:{core:js,plugins:h}},T=C.middlewares.concat([function(G){return function(O){return function(I){return I.meta||(I.meta=ph()),O(I)}}},o(As),ay(y,u,{all:c,plugins:h}),oy(b),ny(y),ry(y),o(Ls)]),P={context:_y,user:iy(b),page:my,track:hy,plugins:uy(u),queue:dy},D=Ui,B=Ui;if(en&&f.debug){var j=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;j&&(D=j({trace:!0,traceLimit:25})),B=function(){return arguments.length===0?of():jt(typeof arguments[0])?gh():gh().apply(null,arguments)}}var z,ee=function(G){return Object.keys(G).reduce(function(O,I){return yy.includes(I)||(O[I]=G[I]),O},{})}(f),ne=C.pluginsArray.reduce(function(G,O){var I=O.name,k=O.config,R=O.loaded,Y=C.pluginEnabled[I];return G[I]={enabled:Y,initialized:!!Y&&Boolean(!O.initialize),loaded:Boolean(R()),config:k||{}},G},{}),ie={context:ee,user:v,plugins:ne},Z=qh(function(G){for(var O=Object.keys(G),I={},k=0;k<O.length;k++){var R=O[k];typeof G[R]===jn&&(I[R]=G[R])}var Y,F=Object.keys(I);try{(function(A){Object.keys(A).forEach(function($){var U=A[$];if(typeof U(void 0,{type:"@@redux/INIT"})===On||typeof U(void 0,{type:Q_})===On)throw new Error("reducer "+$+" "+On)})})(I)}catch(A){Y=A}return function(A,$){if(A===void 0&&(A={}),Y)throw Y;for(var U=!1,Q={},K=0;K<F.length;K++){var le=F[K],de=A[le],ve=(0,I[le])(de,$);if(typeof ve===On){var te=ey(le,$);throw new Error(te)}Q[le]=ve,U=U||ve!==de}return U?Q:A}}(De({},P,t)),ie,B(D(ty.apply(void 0,T))));Z.dispatch=(z=Z.dispatch,function(G,O,I){var k=De({},G,{meta:ph(G.meta,O,Eo(I))});return z.apply(null,[k])});var re=Object.keys(x);Z.dispatch({type:Le.bootstrap,plugins:re,config:ee,params:a,user:v,initialUser:p,persistedUser:g});var pe=re.filter(function(G){return C.pluginEnabled[G]}),me=re.filter(function(G){return!C.pluginEnabled[G]});return Z.dispatch({type:Le.registerPlugins,plugins:re,enabled:C.pluginEnabled}),C.pluginsArray.map(function(G,O){var I=G.bootstrap,k=G.config,R=G.name;I&&un(I)&&I({instance:y,config:k,payload:G}),Z.dispatch({type:Le.registerPluginType(R),name:R,enabled:C.pluginEnabled[R],plugin:G}),C.pluginsArray.length===O+1&&Z.dispatch({type:Le.initializeStart,plugins:pe,disabled:me})}),by(function(G){Z.dispatch({type:G?Le.offline:Le.online})}),function(G,O,I){setInterval(function(){return Zh(G,O,I)},3e3)}(Z,u,y),y}var As="before",Ls="after",Tr="cookie",ni=cf(),lf=ra,Sy=ra;function uf(f){return ni?ra(f,"",-1):Zi(f)}function cf(){if(ni!==void 0)return ni;var f="cookiecookie";try{ra(f,f),ni=document.cookie.indexOf(f)!==-1,uf(f)}catch{ni=!1}return ni}function ra(f,t,p,C,b,w){if(typeof window<"u"){var x=arguments.length>1;return ni===!1&&(x?ui(f,t):li(f)),x?document.cookie=f+"="+encodeURIComponent(t)+(p?"; expires="+new Date(+new Date+1e3*p).toUTCString()+(C?"; path="+C:"")+(b?"; domain="+b:"")+(w?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+f+"=")[1]||"").split(";")[0])}}var Or="localStorage",xy=sl.bind(null,"localStorage");Qi("localStorage","getItem",li);Qi("localStorage","setItem",ui);Qi("localStorage","removeItem",Zi);var Er="sessionStorage",Ty=sl.bind(null,"sessionStorage");Qi("sessionStorage","getItem",li);Qi("sessionStorage","setItem",ui);Qi("sessionStorage","removeItem",Zi);function Bi(f){var t=f;try{if((t=JSON.parse(f))==="true")return!0;if(t==="false")return!1;if(jt(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch{}if(t!==null&&t!=="")return t}var Oy=xy(),Ey=Ty(),Py=cf();function hf(f,t){if(f){var p=al(t),C=!cl(p),b=ol(p)?Bi(localStorage.getItem(f)):void 0;if(C&&!Ai(b))return b;var w=ll(p)?Bi(lf(f)):void 0;if(C&&w)return w;var x=ul(p)?Bi(sessionStorage.getItem(f)):void 0;if(C&&x)return x;var h=li(f);return C?h:{localStorage:b,sessionStorage:x,cookie:w,global:h}}}function Ay(f,t,p){if(f&&!Ai(t)){var C={},b=al(p),w=JSON.stringify(t),x=!cl(b);return ol(b)&&(C[Or]=Ds(Or,t,Bi(localStorage.getItem(f))),localStorage.setItem(f,w),x)?C[Or]:ll(b)&&(C[Tr]=Ds(Tr,t,Bi(lf(f))),Sy(f,w),x)?C[Tr]:ul(b)&&(C[Er]=Ds(Er,t,Bi(sessionStorage.getItem(f))),sessionStorage.setItem(f,w),x)?C[Er]:(C[xr]=Ds(xr,t,li(f)),ui(f,t),x?C[xr]:C)}}function Ly(f,t){if(f){var p=al(t),C=hf(f,Hh),b={};return!Ai(C.localStorage)&&ol(p)&&(localStorage.removeItem(f),b[Or]=C.localStorage),!Ai(C.cookie)&&ll(p)&&(uf(f),b[Tr]=C.cookie),!Ai(C.sessionStorage)&&ul(p)&&(sessionStorage.removeItem(f),b[Er]=C.sessionStorage),!Ai(C.global)&&sa(p,xr)&&(Zi(f),b[xr]=C.global),b}}function al(f){return f?ki(f)?f:f.storage:Yh}function ol(f){return Oy&&sa(f,Or)}function ll(f){return Py&&sa(f,Tr)}function ul(f){return Ey&&sa(f,Er)}function cl(f){return f===Hh||f==="all"}function sa(f,t){return f===Yh||f===t||cl(f)}function Ds(f,t,p){return{location:f,current:t,previous:p}}var Dy={setItem:Ay,getItem:hf,removeItem:Ly};function My(f,t,p){return t in f?Object.defineProperty(f,t,{value:p,enumerable:!0,configurable:!0,writable:!0}):f[t]=p,f}function vh(f,t){var p=Object.keys(f);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(f);t&&(C=C.filter(function(b){return Object.getOwnPropertyDescriptor(f,b).enumerable})),p.push.apply(p,C)}return p}function mh(f){for(var t=1;t<arguments.length;t++){var p=arguments[t]!=null?arguments[t]:{};t%2?vh(Object(p),!0).forEach(function(C){My(f,C,p[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(p)):vh(Object(p)).forEach(function(C){Object.defineProperty(f,C,Object.getOwnPropertyDescriptor(p,C))})}return f}function Iy(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={storage:Dy};return wy(mh(mh({},t),f))}function _h(f,t){var p=Object.keys(f);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(f);t&&(C=C.filter(function(b){return Object.getOwnPropertyDescriptor(f,b).enumerable})),p.push.apply(p,C)}return p}function wn(f){for(var t=1;t<arguments.length;t++){var p=arguments[t]!=null?arguments[t]:{};t%2?_h(Object(p),!0).forEach(function(C){ky(f,C,p[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(p)):_h(Object(p)).forEach(function(C){Object.defineProperty(f,C,Object.getOwnPropertyDescriptor(p,C))})}return f}function ky(f,t,p){return t in f?Object.defineProperty(f,t,{value:p,enumerable:!0,configurable:!0,writable:!0}):f[t]=p,f}var yh={},Ch="https://www.googletagmanager.com/gtag/js",ff={debug_mode:!1,send_page_view:!1,anonymize_ip:!1,allow_google_signals:!0,allow_ad_personalization_signals:!0,cookie_flags:""},Fy={gtagName:"gtag",dataLayerName:"ga4DataLayer",measurementIds:[],gtagConfig:ff};function Ry(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=0,p=Po(f.measurementIds),C=wn(wn({},Fy),f);return{name:"google-analytics",config:C,initialize:function(w){var x=w.config,h=w.instance,i=x.dataLayerName,c=x.customScriptSrc,u=x.gtagName,r=x.gtagConfig,s=x.debug,n=i?"&l=".concat(i):"",o=c||"".concat(Ch,"?id=").concat(p[0]).concat(n);if(!wh(o)){var d=document.createElement("script");d.async=!0,d.src=o,document.body.appendChild(d)}window[i]||(window[i]=window[i]||[],window[u]=function(){window[i].push(arguments)},window[u]("js",new Date));var a=wn(wn({},ff),r||{});s===!0?a.debug_mode=!0:delete a.debug_mode;var g=h.user()||{},v=g.traits||{};Object.keys(v).length&&window[u]("set","user_properties",v);for(var _=0;_<p.length;_++)yh[p[_]]||(window[u]("config",p[_],a),yh[p[_]]=!0)},identify:function(w){var x=w.payload,h=w.config,i=h.gtagName;!window[i]||!p.length||(x.userId&&window[i]("set",{user_id:x.userId}),Object.keys(x.traits).length&&window[i]("set","user_properties",x.traits))},page:function(w){var x=w.payload,h=w.config,i=w.instance,c=h.gtagName,u=h.gtagConfig;if(!(!window[c]||!p.length)){var r=x.properties,s=r.send_to,n=i.getState("context.campaign"),o={page_title:r.title,page_location:r.url,page_path:r.path||document.location.pathname,page_hash:r.hash,page_search:r.page_search,page_referrer:r.referrer},d=bh(n),a=wn(wn(wn({},s?{send_to:s}:{}),o),d);if(u&&u.send_page_view&&t===0){t++;return}window[c]("event","page_view",a),t++}},track:function(w){var x=w.payload,h=w.config,i=w.instance,c=x.properties,u=x.event,r=i.getState("context.campaign"),s=h.gtagName;if(!(!window[s]||!p.length)){var n=bh(r),o=wn(wn({},c),n);window[s]("event",u,o)}},loaded:function(){var w=C.dataLayerName,x=C.customScriptSrc,h=w&&window[w]&&Array.prototype.push===window[w].push;return wh(x||Ch)&&h},methods:{addTag:function(w){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};window[C.gtagName]&&(window[C.gtagName]("config",w,x),p&&!p.includes(w)&&(p=p.concat(w)))},disable:function(w){for(var x=w?Po(w):p,h=0;h<p.length;h++){var i=p[h];x.includes(i)&&(window["ga-disable-".concat(i)]=!0)}},enable:function(w){for(var x=w?Po(w):p,h=0;h<p.length;h++){var i=p[h];x.includes(i)&&(window["ga-disable-".concat(i)]=!1)}}}}}function Po(f){if(!f)throw new Error("No GA Measurement ID defined");if(Array.isArray(f))return f;if(typeof f=="string")return[f];throw new Error("GA Measurement ID must be string or array of strings")}function bh(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={},p=f.id,C=f.name,b=f.source,w=f.medium,x=f.content,h=f.keyword;return p&&(t.campaignId=p),C&&(t.campaignName=C),b&&(t.campaignSource=b),w&&(t.campaignMedium=w),x&&(t.campaignContent=x),h&&(t.campaignKeyword=h),t}function wh(f){var t=document.querySelectorAll("script[src]"),p=new RegExp("^".concat(f));return Boolean(Object.values(t).filter(function(C){return p.test(C.src)}).length)}var By=Ry;const df=Iy({app:"qrcode-generator",plugins:[By({measurementIds:["G-QMMLF58FM9"]})]});var Sh=f=>Array.isArray(f)?f:[f];function Ny(f,t,p,C){const b=f.length,w=t.length;let x=0;if(!w){for(;x<b;x++)p(f[x]);return}if(!b){for(;x<w;x++)C(t[x]);return}for(;x<w&&t[x]===f[x];x++);let h,i;t=t.slice(x),f=f.slice(x);for(h of t)f.includes(h)||C(h);for(i of f)t.includes(i)||p(i)}function jy(f,t){const p=new ResizeObserver(f);return hi(p.disconnect.bind(p)),{observe:C=>p.observe(C,t),unobserve:p.unobserve.bind(p)}}function $y(f,t,p){const C=new WeakMap,{observe:b,unobserve:w}=jy(x,p);function x(i){for(const c of i){const{contentRect:u,target:r}=c,s=Math.round(u.width),n=Math.round(u.height),o=C.get(r);(!o||o.width!==s||o.height!==n)&&(t(u,c.target,c),C.set(r,{width:s,height:n}))}}let h;if(typeof f=="function")h=()=>Sh(f()).slice();else if(Array.isArray(f)&&Gn in f)h=()=>(f[$s],f.slice());else{Sh(f).forEach(b);return}Mt(O_(h,(i,c=[])=>Ny(i,c,b,w)))}var _r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wy(f){var t=f.default;if(typeof t=="function"){var p=function(){return t.apply(this,arguments)};p.prototype=t.prototype}else p={};return Object.defineProperty(p,"__esModule",{value:!0}),Object.keys(f).forEach(function(C){var b=Object.getOwnPropertyDescriptor(f,C);Object.defineProperty(p,C,b.get?b:{enumerable:!0,get:function(){return f[C]}})}),p}var gf={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(f){(function(){var t={}.hasOwnProperty;function p(){for(var C=[],b=0;b<arguments.length;b++){var w=arguments[b];if(!!w){var x=typeof w;if(x==="string"||x==="number")C.push(w);else if(Array.isArray(w)){if(w.length){var h=p.apply(null,w);h&&C.push(h)}}else if(x==="object"){if(w.toString!==Object.prototype.toString&&!w.toString.toString().includes("[native code]")){C.push(w.toString());continue}for(var i in w)t.call(w,i)&&w[i]&&C.push(i)}}}return C.join(" ")}f.exports?(p.default=p,f.exports=p):window.classNames=p})()})(gf);const pt=gf.exports,Vs=Symbol("store-raw"),Lr=Symbol("store-node"),Uy=Symbol("store-name");function pf(f,t){let p=f[Gn];if(!p&&(Object.defineProperty(f,Gn,{value:p=new Proxy(f,Yy)}),!Array.isArray(f))){const C=Object.keys(f),b=Object.getOwnPropertyDescriptors(f);for(let w=0,x=C.length;w<x;w++){const h=C[w];if(b[h].get){const i=b[h].get.bind(p);Object.defineProperty(f,h,{enumerable:b[h].enumerable,get:i})}}}return p}function Gi(f){let t;return f!=null&&typeof f=="object"&&(f[Gn]||!(t=Object.getPrototypeOf(f))||t===Object.prototype||Array.isArray(f))}function zi(f,t=new Set){let p,C,b,w;if(p=f!=null&&f[Vs])return p;if(!Gi(f)||t.has(f))return f;if(Array.isArray(f)){Object.isFrozen(f)?f=f.slice(0):t.add(f);for(let x=0,h=f.length;x<h;x++)b=f[x],(C=zi(b,t))!==b&&(f[x]=C)}else{Object.isFrozen(f)?f=Object.assign({},f):t.add(f);const x=Object.keys(f),h=Object.getOwnPropertyDescriptors(f);for(let i=0,c=x.length;i<c;i++)w=x[i],!h[w].get&&(b=f[w],(C=zi(b,t))!==b&&(f[w]=C))}return f}function Ks(f){let t=f[Lr];return t||Object.defineProperty(f,Lr,{value:t={}}),t}function zo(f,t,p){return f[t]||(f[t]=mf(p))}function Gy(f,t){const p=Reflect.getOwnPropertyDescriptor(f,t);return!p||p.get||!p.configurable||t===Gn||t===Lr||t===Uy||(delete p.value,delete p.writable,p.get=()=>f[Gn][t]),p}function vf(f){if(Bh()){const t=Ks(f);(t._||(t._=mf()))()}}function zy(f){return vf(f),Reflect.ownKeys(f)}function mf(f){const[t,p]=ea(f,{equals:!1,internal:!0});return t.$=p,t}const Yy={get(f,t,p){if(t===Vs)return f;if(t===Gn)return p;if(t===$s)return vf(f),p;const C=Ks(f),b=C.hasOwnProperty(t);let w=b?C[t]():f[t];if(t===Lr||t==="__proto__")return w;if(!b){const x=Object.getOwnPropertyDescriptor(f,t);Bh()&&(typeof w!="function"||f.hasOwnProperty(t))&&!(x&&x.get)&&(w=zo(C,t,w)())}return Gi(w)?pf(w):w},has(f,t){if(t===Vs||t===Gn||t===$s||t===Lr||t==="__proto__")return!0;const p=Ks(f)[t];return p&&p(),t in f},set(){return!0},deleteProperty(){return!0},ownKeys:zy,getOwnPropertyDescriptor:Gy};function Yi(f,t,p,C=!1){if(!C&&f[t]===p)return;const b=f[t],w=f.length;p===void 0?delete f[t]:f[t]=p;let x=Ks(f),h;(h=zo(x,t,b))&&h.$(()=>p),Array.isArray(f)&&f.length!==w&&(h=zo(x,"length",w))&&h.$(f.length),(h=x._)&&h.$()}function _f(f,t){const p=Object.keys(t);for(let C=0;C<p.length;C+=1){const b=p[C];Yi(f,b,t[b])}}function Hy(f,t){if(typeof t=="function"&&(t=t(f)),t=zi(t),Array.isArray(t)){if(f===t)return;let p=0,C=t.length;for(;p<C;p++){const b=t[p];f[p]!==b&&Yi(f,p,b)}Yi(f,"length",C)}else _f(f,t)}function Sr(f,t,p=[]){let C,b=f;if(t.length>1){C=t.shift();const x=typeof C,h=Array.isArray(f);if(Array.isArray(C)){for(let i=0;i<C.length;i++)Sr(f,[C[i]].concat(t),p);return}else if(h&&x==="function"){for(let i=0;i<f.length;i++)C(f[i],i)&&Sr(f,[i].concat(t),p);return}else if(h&&x==="object"){const{from:i=0,to:c=f.length-1,by:u=1}=C;for(let r=i;r<=c;r+=u)Sr(f,[r].concat(t),p);return}else if(t.length>1){Sr(f[C],t,[C].concat(p));return}b=f[C],p=[C].concat(p)}let w=t[0];typeof w=="function"&&(w=w(b,p),w===b)||C===void 0&&w==null||(w=zi(w),C===void 0||Gi(b)&&Gi(w)&&!Array.isArray(w)?_f(b,w):Yi(f,C,w))}function Xy(...[f,t]){const p=zi(f||{}),C=Array.isArray(p),b=pf(p);function w(...x){T_(()=>{C&&x.length===1?Hy(p,x[0]):Sr(p,x)})}return[b,w]}const qs=new WeakMap,yf={get(f,t){if(t===Vs)return f;const p=f[t];let C;return Gi(p)?qs.get(p)||(qs.set(p,C=new Proxy(p,yf)),C):p},set(f,t,p){return Yi(f,t,zi(p)),!0},deleteProperty(f,t){return Yi(f,t,void 0,!0),!0}};function Vy(f){return t=>{if(Gi(t)){let p;(p=qs.get(t))||qs.set(t,p=new Proxy(t,yf)),f(p)}return t}}var Dr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(f,t){(function(){var p,C="4.17.21",b=200,w="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",x="Expected a function",h="Invalid `variable` option passed into `_.template`",i="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",r=1,s=2,n=4,o=1,d=2,a=1,g=2,v=4,_=8,y=16,T=32,P=64,D=128,B=256,j=512,z=30,ee="...",ne=800,ie=16,Z=1,re=2,pe=3,me=1/0,G=9007199254740991,O=17976931348623157e292,I=0/0,k=4294967295,R=k-1,Y=k>>>1,F=[["ary",D],["bind",a],["bindKey",g],["curry",_],["curryRight",y],["flip",j],["partial",T],["partialRight",P],["rearg",B]],A="[object Arguments]",$="[object Array]",U="[object AsyncFunction]",Q="[object Boolean]",K="[object Date]",le="[object DOMException]",de="[object Error]",ve="[object Function]",te="[object GeneratorFunction]",X="[object Map]",oe="[object Number]",ue="[object Null]",q="[object Object]",fe="[object Promise]",_e="[object Proxy]",Ee="[object RegExp]",Ce="[object Set]",se="[object String]",xe="[object Symbol]",Me="[object Undefined]",Be="[object WeakMap]",Ze="[object WeakSet]",Ye="[object ArrayBuffer]",at="[object DataView]",tt="[object Float32Array]",Kt="[object Float64Array]",fn="[object Int8Array]",Et="[object Int16Array]",er="[object Int32Array]",fi="[object Uint8Array]",tr="[object Uint8ClampedArray]",nr="[object Uint16Array]",ca="[object Uint32Array]",zf=/\b__p \+= '';/g,Yf=/\b(__p \+=) '' \+/g,Hf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ml=/&(?:amp|lt|gt|quot|#39);/g,_l=/[&<>"']/g,Xf=RegExp(ml.source),Vf=RegExp(_l.source),Kf=/<%-([\s\S]+?)%>/g,qf=/<%([\s\S]+?)%>/g,yl=/<%=([\s\S]+?)%>/g,Jf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zf=/^\w*$/,Qf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ha=/[\\^$.*+?()[\]{}|]/g,ed=RegExp(ha.source),fa=/^\s+/,td=/\s/,nd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,id=/\{\n\/\* \[wrapped with (.+)\] \*/,rd=/,? & /,sd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ad=/[()=,{}\[\]\/\s]/,od=/\\(\\)?/g,ld=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Cl=/\w*$/,ud=/^[-+]0x[0-9a-f]+$/i,cd=/^0b[01]+$/i,hd=/^\[object .+?Constructor\]$/,fd=/^0o[0-7]+$/i,dd=/^(?:0|[1-9]\d*)$/,gd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Nr=/($^)/,pd=/['\n\r\u2028\u2029\\]/g,jr="\\ud800-\\udfff",vd="\\u0300-\\u036f",md="\\ufe20-\\ufe2f",_d="\\u20d0-\\u20ff",bl=vd+md+_d,wl="\\u2700-\\u27bf",Sl="a-z\\xdf-\\xf6\\xf8-\\xff",yd="\\xac\\xb1\\xd7\\xf7",Cd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",bd="\\u2000-\\u206f",wd=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xl="A-Z\\xc0-\\xd6\\xd8-\\xde",Tl="\\ufe0e\\ufe0f",Ol=yd+Cd+bd+wd,da="['\u2019]",Sd="["+jr+"]",El="["+Ol+"]",$r="["+bl+"]",Pl="\\d+",xd="["+wl+"]",Al="["+Sl+"]",Ll="[^"+jr+Ol+Pl+wl+Sl+xl+"]",ga="\\ud83c[\\udffb-\\udfff]",Td="(?:"+$r+"|"+ga+")",Dl="[^"+jr+"]",pa="(?:\\ud83c[\\udde6-\\uddff]){2}",va="[\\ud800-\\udbff][\\udc00-\\udfff]",di="["+xl+"]",Ml="\\u200d",Il="(?:"+Al+"|"+Ll+")",Od="(?:"+di+"|"+Ll+")",kl="(?:"+da+"(?:d|ll|m|re|s|t|ve))?",Fl="(?:"+da+"(?:D|LL|M|RE|S|T|VE))?",Rl=Td+"?",Bl="["+Tl+"]?",Ed="(?:"+Ml+"(?:"+[Dl,pa,va].join("|")+")"+Bl+Rl+")*",Pd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ad="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Nl=Bl+Rl+Ed,Ld="(?:"+[xd,pa,va].join("|")+")"+Nl,Dd="(?:"+[Dl+$r+"?",$r,pa,va,Sd].join("|")+")",Md=RegExp(da,"g"),Id=RegExp($r,"g"),ma=RegExp(ga+"(?="+ga+")|"+Dd+Nl,"g"),kd=RegExp([di+"?"+Al+"+"+kl+"(?="+[El,di,"$"].join("|")+")",Od+"+"+Fl+"(?="+[El,di+Il,"$"].join("|")+")",di+"?"+Il+"+"+kl,di+"+"+Fl,Ad,Pd,Pl,Ld].join("|"),"g"),Fd=RegExp("["+Ml+jr+bl+Tl+"]"),Rd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Nd=-1,et={};et[tt]=et[Kt]=et[fn]=et[Et]=et[er]=et[fi]=et[tr]=et[nr]=et[ca]=!0,et[A]=et[$]=et[Ye]=et[Q]=et[at]=et[K]=et[de]=et[ve]=et[X]=et[oe]=et[q]=et[Ee]=et[Ce]=et[se]=et[Be]=!1;var Qe={};Qe[A]=Qe[$]=Qe[Ye]=Qe[at]=Qe[Q]=Qe[K]=Qe[tt]=Qe[Kt]=Qe[fn]=Qe[Et]=Qe[er]=Qe[X]=Qe[oe]=Qe[q]=Qe[Ee]=Qe[Ce]=Qe[se]=Qe[xe]=Qe[fi]=Qe[tr]=Qe[nr]=Qe[ca]=!0,Qe[de]=Qe[ve]=Qe[Be]=!1;var jd={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},$d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ud={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gd=parseFloat,zd=parseInt,jl=typeof _r=="object"&&_r&&_r.Object===Object&&_r,Yd=typeof self=="object"&&self&&self.Object===Object&&self,vt=jl||Yd||Function("return this")(),_a=t&&!t.nodeType&&t,Hn=_a&&!0&&f&&!f.nodeType&&f,$l=Hn&&Hn.exports===_a,ya=$l&&jl.process,Wt=function(){try{var H=Hn&&Hn.require&&Hn.require("util").types;return H||ya&&ya.binding&&ya.binding("util")}catch{}}(),Wl=Wt&&Wt.isArrayBuffer,Ul=Wt&&Wt.isDate,Gl=Wt&&Wt.isMap,zl=Wt&&Wt.isRegExp,Yl=Wt&&Wt.isSet,Hl=Wt&&Wt.isTypedArray;function It(H,ae,J){switch(J.length){case 0:return H.call(ae);case 1:return H.call(ae,J[0]);case 2:return H.call(ae,J[0],J[1]);case 3:return H.call(ae,J[0],J[1],J[2])}return H.apply(ae,J)}function Hd(H,ae,J,be){for(var Ie=-1,Ve=H==null?0:H.length;++Ie<Ve;){var ht=H[Ie];ae(be,ht,J(ht),H)}return be}function Ut(H,ae){for(var J=-1,be=H==null?0:H.length;++J<be&&ae(H[J],J,H)!==!1;);return H}function Xd(H,ae){for(var J=H==null?0:H.length;J--&&ae(H[J],J,H)!==!1;);return H}function Xl(H,ae){for(var J=-1,be=H==null?0:H.length;++J<be;)if(!ae(H[J],J,H))return!1;return!0}function Pn(H,ae){for(var J=-1,be=H==null?0:H.length,Ie=0,Ve=[];++J<be;){var ht=H[J];ae(ht,J,H)&&(Ve[Ie++]=ht)}return Ve}function Wr(H,ae){var J=H==null?0:H.length;return!!J&&gi(H,ae,0)>-1}function Ca(H,ae,J){for(var be=-1,Ie=H==null?0:H.length;++be<Ie;)if(J(ae,H[be]))return!0;return!1}function nt(H,ae){for(var J=-1,be=H==null?0:H.length,Ie=Array(be);++J<be;)Ie[J]=ae(H[J],J,H);return Ie}function An(H,ae){for(var J=-1,be=ae.length,Ie=H.length;++J<be;)H[Ie+J]=ae[J];return H}function ba(H,ae,J,be){var Ie=-1,Ve=H==null?0:H.length;for(be&&Ve&&(J=H[++Ie]);++Ie<Ve;)J=ae(J,H[Ie],Ie,H);return J}function Vd(H,ae,J,be){var Ie=H==null?0:H.length;for(be&&Ie&&(J=H[--Ie]);Ie--;)J=ae(J,H[Ie],Ie,H);return J}function wa(H,ae){for(var J=-1,be=H==null?0:H.length;++J<be;)if(ae(H[J],J,H))return!0;return!1}var Kd=Sa("length");function qd(H){return H.split("")}function Jd(H){return H.match(sd)||[]}function Vl(H,ae,J){var be;return J(H,function(Ie,Ve,ht){if(ae(Ie,Ve,ht))return be=Ve,!1}),be}function Ur(H,ae,J,be){for(var Ie=H.length,Ve=J+(be?1:-1);be?Ve--:++Ve<Ie;)if(ae(H[Ve],Ve,H))return Ve;return-1}function gi(H,ae,J){return ae===ae?ug(H,ae,J):Ur(H,Kl,J)}function Zd(H,ae,J,be){for(var Ie=J-1,Ve=H.length;++Ie<Ve;)if(be(H[Ie],ae))return Ie;return-1}function Kl(H){return H!==H}function ql(H,ae){var J=H==null?0:H.length;return J?Ta(H,ae)/J:I}function Sa(H){return function(ae){return ae==null?p:ae[H]}}function xa(H){return function(ae){return H==null?p:H[ae]}}function Jl(H,ae,J,be,Ie){return Ie(H,function(Ve,ht,Je){J=be?(be=!1,Ve):ae(J,Ve,ht,Je)}),J}function Qd(H,ae){var J=H.length;for(H.sort(ae);J--;)H[J]=H[J].value;return H}function Ta(H,ae){for(var J,be=-1,Ie=H.length;++be<Ie;){var Ve=ae(H[be]);Ve!==p&&(J=J===p?Ve:J+Ve)}return J}function Oa(H,ae){for(var J=-1,be=Array(H);++J<H;)be[J]=ae(J);return be}function eg(H,ae){return nt(ae,function(J){return[J,H[J]]})}function Zl(H){return H&&H.slice(0,nu(H)+1).replace(fa,"")}function kt(H){return function(ae){return H(ae)}}function Ea(H,ae){return nt(ae,function(J){return H[J]})}function ir(H,ae){return H.has(ae)}function Ql(H,ae){for(var J=-1,be=H.length;++J<be&&gi(ae,H[J],0)>-1;);return J}function eu(H,ae){for(var J=H.length;J--&&gi(ae,H[J],0)>-1;);return J}function tg(H,ae){for(var J=H.length,be=0;J--;)H[J]===ae&&++be;return be}var ng=xa(jd),ig=xa($d);function rg(H){return"\\"+Ud[H]}function sg(H,ae){return H==null?p:H[ae]}function pi(H){return Fd.test(H)}function ag(H){return Rd.test(H)}function og(H){for(var ae,J=[];!(ae=H.next()).done;)J.push(ae.value);return J}function Pa(H){var ae=-1,J=Array(H.size);return H.forEach(function(be,Ie){J[++ae]=[Ie,be]}),J}function tu(H,ae){return function(J){return H(ae(J))}}function Ln(H,ae){for(var J=-1,be=H.length,Ie=0,Ve=[];++J<be;){var ht=H[J];(ht===ae||ht===u)&&(H[J]=u,Ve[Ie++]=J)}return Ve}function Gr(H){var ae=-1,J=Array(H.size);return H.forEach(function(be){J[++ae]=be}),J}function lg(H){var ae=-1,J=Array(H.size);return H.forEach(function(be){J[++ae]=[be,be]}),J}function ug(H,ae,J){for(var be=J-1,Ie=H.length;++be<Ie;)if(H[be]===ae)return be;return-1}function cg(H,ae,J){for(var be=J+1;be--;)if(H[be]===ae)return be;return be}function vi(H){return pi(H)?fg(H):Kd(H)}function qt(H){return pi(H)?dg(H):qd(H)}function nu(H){for(var ae=H.length;ae--&&td.test(H.charAt(ae)););return ae}var hg=xa(Wd);function fg(H){for(var ae=ma.lastIndex=0;ma.test(H);)++ae;return ae}function dg(H){return H.match(ma)||[]}function gg(H){return H.match(kd)||[]}var pg=function H(ae){ae=ae==null?vt:mi.defaults(vt.Object(),ae,mi.pick(vt,Bd));var J=ae.Array,be=ae.Date,Ie=ae.Error,Ve=ae.Function,ht=ae.Math,Je=ae.Object,Aa=ae.RegExp,vg=ae.String,Gt=ae.TypeError,zr=J.prototype,mg=Ve.prototype,_i=Je.prototype,Yr=ae["__core-js_shared__"],Hr=mg.toString,qe=_i.hasOwnProperty,_g=0,iu=function(){var e=/[^.]+$/.exec(Yr&&Yr.keys&&Yr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Xr=_i.toString,yg=Hr.call(Je),Cg=vt._,bg=Aa("^"+Hr.call(qe).replace(ha,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vr=$l?ae.Buffer:p,Dn=ae.Symbol,Kr=ae.Uint8Array,ru=Vr?Vr.allocUnsafe:p,qr=tu(Je.getPrototypeOf,Je),su=Je.create,au=_i.propertyIsEnumerable,Jr=zr.splice,ou=Dn?Dn.isConcatSpreadable:p,rr=Dn?Dn.iterator:p,Xn=Dn?Dn.toStringTag:p,Zr=function(){try{var e=Zn(Je,"defineProperty");return e({},"",{}),e}catch{}}(),wg=ae.clearTimeout!==vt.clearTimeout&&ae.clearTimeout,Sg=be&&be.now!==vt.Date.now&&be.now,xg=ae.setTimeout!==vt.setTimeout&&ae.setTimeout,Qr=ht.ceil,es=ht.floor,La=Je.getOwnPropertySymbols,Tg=Vr?Vr.isBuffer:p,lu=ae.isFinite,Og=zr.join,Eg=tu(Je.keys,Je),ft=ht.max,Ct=ht.min,Pg=be.now,Ag=ae.parseInt,uu=ht.random,Lg=zr.reverse,Da=Zn(ae,"DataView"),sr=Zn(ae,"Map"),Ma=Zn(ae,"Promise"),yi=Zn(ae,"Set"),ar=Zn(ae,"WeakMap"),or=Zn(Je,"create"),ts=ar&&new ar,Ci={},Dg=Qn(Da),Mg=Qn(sr),Ig=Qn(Ma),kg=Qn(yi),Fg=Qn(ar),ns=Dn?Dn.prototype:p,lr=ns?ns.valueOf:p,cu=ns?ns.toString:p;function L(e){if(ot(e)&&!ke(e)&&!(e instanceof ze)){if(e instanceof zt)return e;if(qe.call(e,"__wrapped__"))return hc(e)}return new zt(e)}var bi=function(){function e(){}return function(l){if(!it(l))return{};if(su)return su(l);e.prototype=l;var m=new e;return e.prototype=p,m}}();function is(){}function zt(e,l){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=p}L.templateSettings={escape:Kf,evaluate:qf,interpolate:yl,variable:"",imports:{_:L}},L.prototype=is.prototype,L.prototype.constructor=L,zt.prototype=bi(is.prototype),zt.prototype.constructor=zt;function ze(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=k,this.__views__=[]}function Rg(){var e=new ze(this.__wrapped__);return e.__actions__=Pt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Pt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Pt(this.__views__),e}function Bg(){if(this.__filtered__){var e=new ze(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Ng(){var e=this.__wrapped__.value(),l=this.__dir__,m=ke(e),S=l<0,E=m?e.length:0,M=qp(0,E,this.__views__),N=M.start,W=M.end,V=W-N,ce=S?W:N-1,he=this.__iteratees__,ge=he.length,ye=0,Te=Ct(V,this.__takeCount__);if(!m||!S&&E==V&&Te==V)return ku(e,this.__actions__);var Pe=[];e:for(;V--&&ye<Te;){ce+=l;for(var Ne=-1,Ae=e[ce];++Ne<ge;){var Ge=he[Ne],He=Ge.iteratee,Bt=Ge.type,Ot=He(Ae);if(Bt==re)Ae=Ot;else if(!Ot){if(Bt==Z)continue e;break e}}Pe[ye++]=Ae}return Pe}ze.prototype=bi(is.prototype),ze.prototype.constructor=ze;function Vn(e){var l=-1,m=e==null?0:e.length;for(this.clear();++l<m;){var S=e[l];this.set(S[0],S[1])}}function jg(){this.__data__=or?or(null):{},this.size=0}function $g(e){var l=this.has(e)&&delete this.__data__[e];return this.size-=l?1:0,l}function Wg(e){var l=this.__data__;if(or){var m=l[e];return m===i?p:m}return qe.call(l,e)?l[e]:p}function Ug(e){var l=this.__data__;return or?l[e]!==p:qe.call(l,e)}function Gg(e,l){var m=this.__data__;return this.size+=this.has(e)?0:1,m[e]=or&&l===p?i:l,this}Vn.prototype.clear=jg,Vn.prototype.delete=$g,Vn.prototype.get=Wg,Vn.prototype.has=Ug,Vn.prototype.set=Gg;function dn(e){var l=-1,m=e==null?0:e.length;for(this.clear();++l<m;){var S=e[l];this.set(S[0],S[1])}}function zg(){this.__data__=[],this.size=0}function Yg(e){var l=this.__data__,m=rs(l,e);if(m<0)return!1;var S=l.length-1;return m==S?l.pop():Jr.call(l,m,1),--this.size,!0}function Hg(e){var l=this.__data__,m=rs(l,e);return m<0?p:l[m][1]}function Xg(e){return rs(this.__data__,e)>-1}function Vg(e,l){var m=this.__data__,S=rs(m,e);return S<0?(++this.size,m.push([e,l])):m[S][1]=l,this}dn.prototype.clear=zg,dn.prototype.delete=Yg,dn.prototype.get=Hg,dn.prototype.has=Xg,dn.prototype.set=Vg;function gn(e){var l=-1,m=e==null?0:e.length;for(this.clear();++l<m;){var S=e[l];this.set(S[0],S[1])}}function Kg(){this.size=0,this.__data__={hash:new Vn,map:new(sr||dn),string:new Vn}}function qg(e){var l=vs(this,e).delete(e);return this.size-=l?1:0,l}function Jg(e){return vs(this,e).get(e)}function Zg(e){return vs(this,e).has(e)}function Qg(e,l){var m=vs(this,e),S=m.size;return m.set(e,l),this.size+=m.size==S?0:1,this}gn.prototype.clear=Kg,gn.prototype.delete=qg,gn.prototype.get=Jg,gn.prototype.has=Zg,gn.prototype.set=Qg;function Kn(e){var l=-1,m=e==null?0:e.length;for(this.__data__=new gn;++l<m;)this.add(e[l])}function ep(e){return this.__data__.set(e,i),this}function tp(e){return this.__data__.has(e)}Kn.prototype.add=Kn.prototype.push=ep,Kn.prototype.has=tp;function Jt(e){var l=this.__data__=new dn(e);this.size=l.size}function np(){this.__data__=new dn,this.size=0}function ip(e){var l=this.__data__,m=l.delete(e);return this.size=l.size,m}function rp(e){return this.__data__.get(e)}function sp(e){return this.__data__.has(e)}function ap(e,l){var m=this.__data__;if(m instanceof dn){var S=m.__data__;if(!sr||S.length<b-1)return S.push([e,l]),this.size=++m.size,this;m=this.__data__=new gn(S)}return m.set(e,l),this.size=m.size,this}Jt.prototype.clear=np,Jt.prototype.delete=ip,Jt.prototype.get=rp,Jt.prototype.has=sp,Jt.prototype.set=ap;function hu(e,l){var m=ke(e),S=!m&&ei(e),E=!m&&!S&&Rn(e),M=!m&&!S&&!E&&Ti(e),N=m||S||E||M,W=N?Oa(e.length,vg):[],V=W.length;for(var ce in e)(l||qe.call(e,ce))&&!(N&&(ce=="length"||E&&(ce=="offset"||ce=="parent")||M&&(ce=="buffer"||ce=="byteLength"||ce=="byteOffset")||_n(ce,V)))&&W.push(ce);return W}function fu(e){var l=e.length;return l?e[Ga(0,l-1)]:p}function op(e,l){return ms(Pt(e),qn(l,0,e.length))}function lp(e){return ms(Pt(e))}function Ia(e,l,m){(m!==p&&!Zt(e[l],m)||m===p&&!(l in e))&&pn(e,l,m)}function ur(e,l,m){var S=e[l];(!(qe.call(e,l)&&Zt(S,m))||m===p&&!(l in e))&&pn(e,l,m)}function rs(e,l){for(var m=e.length;m--;)if(Zt(e[m][0],l))return m;return-1}function up(e,l,m,S){return Mn(e,function(E,M,N){l(S,E,m(E),N)}),S}function du(e,l){return e&&rn(l,dt(l),e)}function cp(e,l){return e&&rn(l,Lt(l),e)}function pn(e,l,m){l=="__proto__"&&Zr?Zr(e,l,{configurable:!0,enumerable:!0,value:m,writable:!0}):e[l]=m}function ka(e,l){for(var m=-1,S=l.length,E=J(S),M=e==null;++m<S;)E[m]=M?p:po(e,l[m]);return E}function qn(e,l,m){return e===e&&(m!==p&&(e=e<=m?e:m),l!==p&&(e=e>=l?e:l)),e}function Yt(e,l,m,S,E,M){var N,W=l&r,V=l&s,ce=l&n;if(m&&(N=E?m(e,S,E,M):m(e)),N!==p)return N;if(!it(e))return e;var he=ke(e);if(he){if(N=Zp(e),!W)return Pt(e,N)}else{var ge=bt(e),ye=ge==ve||ge==te;if(Rn(e))return Bu(e,W);if(ge==q||ge==A||ye&&!E){if(N=V||ye?{}:nc(e),!W)return V?Wp(e,cp(N,e)):$p(e,du(N,e))}else{if(!Qe[ge])return E?e:{};N=Qp(e,ge,W)}}M||(M=new Jt);var Te=M.get(e);if(Te)return Te;M.set(e,N),Dc(e)?e.forEach(function(Ae){N.add(Yt(Ae,l,m,Ae,e,M))}):Ac(e)&&e.forEach(function(Ae,Ge){N.set(Ge,Yt(Ae,l,m,Ge,e,M))});var Pe=ce?V?eo:Qa:V?Lt:dt,Ne=he?p:Pe(e);return Ut(Ne||e,function(Ae,Ge){Ne&&(Ge=Ae,Ae=e[Ge]),ur(N,Ge,Yt(Ae,l,m,Ge,e,M))}),N}function hp(e){var l=dt(e);return function(m){return gu(m,e,l)}}function gu(e,l,m){var S=m.length;if(e==null)return!S;for(e=Je(e);S--;){var E=m[S],M=l[E],N=e[E];if(N===p&&!(E in e)||!M(N))return!1}return!0}function pu(e,l,m){if(typeof e!="function")throw new Gt(x);return vr(function(){e.apply(p,m)},l)}function cr(e,l,m,S){var E=-1,M=Wr,N=!0,W=e.length,V=[],ce=l.length;if(!W)return V;m&&(l=nt(l,kt(m))),S?(M=Ca,N=!1):l.length>=b&&(M=ir,N=!1,l=new Kn(l));e:for(;++E<W;){var he=e[E],ge=m==null?he:m(he);if(he=S||he!==0?he:0,N&&ge===ge){for(var ye=ce;ye--;)if(l[ye]===ge)continue e;V.push(he)}else M(l,ge,S)||V.push(he)}return V}var Mn=Uu(nn),vu=Uu(Ra,!0);function fp(e,l){var m=!0;return Mn(e,function(S,E,M){return m=!!l(S,E,M),m}),m}function ss(e,l,m){for(var S=-1,E=e.length;++S<E;){var M=e[S],N=l(M);if(N!=null&&(W===p?N===N&&!Rt(N):m(N,W)))var W=N,V=M}return V}function dp(e,l,m,S){var E=e.length;for(m=Fe(m),m<0&&(m=-m>E?0:E+m),S=S===p||S>E?E:Fe(S),S<0&&(S+=E),S=m>S?0:Ic(S);m<S;)e[m++]=l;return e}function mu(e,l){var m=[];return Mn(e,function(S,E,M){l(S,E,M)&&m.push(S)}),m}function mt(e,l,m,S,E){var M=-1,N=e.length;for(m||(m=tv),E||(E=[]);++M<N;){var W=e[M];l>0&&m(W)?l>1?mt(W,l-1,m,S,E):An(E,W):S||(E[E.length]=W)}return E}var Fa=Gu(),_u=Gu(!0);function nn(e,l){return e&&Fa(e,l,dt)}function Ra(e,l){return e&&_u(e,l,dt)}function as(e,l){return Pn(l,function(m){return yn(e[m])})}function Jn(e,l){l=kn(l,e);for(var m=0,S=l.length;e!=null&&m<S;)e=e[sn(l[m++])];return m&&m==S?e:p}function yu(e,l,m){var S=l(e);return ke(e)?S:An(S,m(e))}function xt(e){return e==null?e===p?Me:ue:Xn&&Xn in Je(e)?Kp(e):lv(e)}function Ba(e,l){return e>l}function gp(e,l){return e!=null&&qe.call(e,l)}function pp(e,l){return e!=null&&l in Je(e)}function vp(e,l,m){return e>=Ct(l,m)&&e<ft(l,m)}function Na(e,l,m){for(var S=m?Ca:Wr,E=e[0].length,M=e.length,N=M,W=J(M),V=1/0,ce=[];N--;){var he=e[N];N&&l&&(he=nt(he,kt(l))),V=Ct(he.length,V),W[N]=!m&&(l||E>=120&&he.length>=120)?new Kn(N&&he):p}he=e[0];var ge=-1,ye=W[0];e:for(;++ge<E&&ce.length<V;){var Te=he[ge],Pe=l?l(Te):Te;if(Te=m||Te!==0?Te:0,!(ye?ir(ye,Pe):S(ce,Pe,m))){for(N=M;--N;){var Ne=W[N];if(!(Ne?ir(Ne,Pe):S(e[N],Pe,m)))continue e}ye&&ye.push(Pe),ce.push(Te)}}return ce}function mp(e,l,m,S){return nn(e,function(E,M,N){l(S,m(E),M,N)}),S}function hr(e,l,m){l=kn(l,e),e=ac(e,l);var S=e==null?e:e[sn(Xt(l))];return S==null?p:It(S,e,m)}function Cu(e){return ot(e)&&xt(e)==A}function _p(e){return ot(e)&&xt(e)==Ye}function yp(e){return ot(e)&&xt(e)==K}function fr(e,l,m,S,E){return e===l?!0:e==null||l==null||!ot(e)&&!ot(l)?e!==e&&l!==l:Cp(e,l,m,S,fr,E)}function Cp(e,l,m,S,E,M){var N=ke(e),W=ke(l),V=N?$:bt(e),ce=W?$:bt(l);V=V==A?q:V,ce=ce==A?q:ce;var he=V==q,ge=ce==q,ye=V==ce;if(ye&&Rn(e)){if(!Rn(l))return!1;N=!0,he=!1}if(ye&&!he)return M||(M=new Jt),N||Ti(e)?Qu(e,l,m,S,E,M):Xp(e,l,V,m,S,E,M);if(!(m&o)){var Te=he&&qe.call(e,"__wrapped__"),Pe=ge&&qe.call(l,"__wrapped__");if(Te||Pe){var Ne=Te?e.value():e,Ae=Pe?l.value():l;return M||(M=new Jt),E(Ne,Ae,m,S,M)}}return ye?(M||(M=new Jt),Vp(e,l,m,S,E,M)):!1}function bp(e){return ot(e)&&bt(e)==X}function ja(e,l,m,S){var E=m.length,M=E,N=!S;if(e==null)return!M;for(e=Je(e);E--;){var W=m[E];if(N&&W[2]?W[1]!==e[W[0]]:!(W[0]in e))return!1}for(;++E<M;){W=m[E];var V=W[0],ce=e[V],he=W[1];if(N&&W[2]){if(ce===p&&!(V in e))return!1}else{var ge=new Jt;if(S)var ye=S(ce,he,V,e,l,ge);if(!(ye===p?fr(he,ce,o|d,S,ge):ye))return!1}}return!0}function bu(e){if(!it(e)||iv(e))return!1;var l=yn(e)?bg:hd;return l.test(Qn(e))}function wp(e){return ot(e)&&xt(e)==Ee}function Sp(e){return ot(e)&&bt(e)==Ce}function xp(e){return ot(e)&&Ss(e.length)&&!!et[xt(e)]}function wu(e){return typeof e=="function"?e:e==null?Dt:typeof e=="object"?ke(e)?Tu(e[0],e[1]):xu(e):zc(e)}function $a(e){if(!pr(e))return Eg(e);var l=[];for(var m in Je(e))qe.call(e,m)&&m!="constructor"&&l.push(m);return l}function Tp(e){if(!it(e))return ov(e);var l=pr(e),m=[];for(var S in e)S=="constructor"&&(l||!qe.call(e,S))||m.push(S);return m}function Wa(e,l){return e<l}function Su(e,l){var m=-1,S=At(e)?J(e.length):[];return Mn(e,function(E,M,N){S[++m]=l(E,M,N)}),S}function xu(e){var l=no(e);return l.length==1&&l[0][2]?rc(l[0][0],l[0][1]):function(m){return m===e||ja(m,e,l)}}function Tu(e,l){return ro(e)&&ic(l)?rc(sn(e),l):function(m){var S=po(m,e);return S===p&&S===l?vo(m,e):fr(l,S,o|d)}}function os(e,l,m,S,E){e!==l&&Fa(l,function(M,N){if(E||(E=new Jt),it(M))Op(e,l,N,m,os,S,E);else{var W=S?S(ao(e,N),M,N+"",e,l,E):p;W===p&&(W=M),Ia(e,N,W)}},Lt)}function Op(e,l,m,S,E,M,N){var W=ao(e,m),V=ao(l,m),ce=N.get(V);if(ce){Ia(e,m,ce);return}var he=M?M(W,V,m+"",e,l,N):p,ge=he===p;if(ge){var ye=ke(V),Te=!ye&&Rn(V),Pe=!ye&&!Te&&Ti(V);he=V,ye||Te||Pe?ke(W)?he=W:lt(W)?he=Pt(W):Te?(ge=!1,he=Bu(V,!0)):Pe?(ge=!1,he=Nu(V,!0)):he=[]:mr(V)||ei(V)?(he=W,ei(W)?he=kc(W):(!it(W)||yn(W))&&(he=nc(V))):ge=!1}ge&&(N.set(V,he),E(he,V,S,M,N),N.delete(V)),Ia(e,m,he)}function Ou(e,l){var m=e.length;if(!!m)return l+=l<0?m:0,_n(l,m)?e[l]:p}function Eu(e,l,m){l.length?l=nt(l,function(M){return ke(M)?function(N){return Jn(N,M.length===1?M[0]:M)}:M}):l=[Dt];var S=-1;l=nt(l,kt(Oe()));var E=Su(e,function(M,N,W){var V=nt(l,function(ce){return ce(M)});return{criteria:V,index:++S,value:M}});return Qd(E,function(M,N){return jp(M,N,m)})}function Ep(e,l){return Pu(e,l,function(m,S){return vo(e,S)})}function Pu(e,l,m){for(var S=-1,E=l.length,M={};++S<E;){var N=l[S],W=Jn(e,N);m(W,N)&&dr(M,kn(N,e),W)}return M}function Pp(e){return function(l){return Jn(l,e)}}function Ua(e,l,m,S){var E=S?Zd:gi,M=-1,N=l.length,W=e;for(e===l&&(l=Pt(l)),m&&(W=nt(e,kt(m)));++M<N;)for(var V=0,ce=l[M],he=m?m(ce):ce;(V=E(W,he,V,S))>-1;)W!==e&&Jr.call(W,V,1),Jr.call(e,V,1);return e}function Au(e,l){for(var m=e?l.length:0,S=m-1;m--;){var E=l[m];if(m==S||E!==M){var M=E;_n(E)?Jr.call(e,E,1):Ha(e,E)}}return e}function Ga(e,l){return e+es(uu()*(l-e+1))}function Ap(e,l,m,S){for(var E=-1,M=ft(Qr((l-e)/(m||1)),0),N=J(M);M--;)N[S?M:++E]=e,e+=m;return N}function za(e,l){var m="";if(!e||l<1||l>G)return m;do l%2&&(m+=e),l=es(l/2),l&&(e+=e);while(l);return m}function $e(e,l){return oo(sc(e,l,Dt),e+"")}function Lp(e){return fu(Oi(e))}function Dp(e,l){var m=Oi(e);return ms(m,qn(l,0,m.length))}function dr(e,l,m,S){if(!it(e))return e;l=kn(l,e);for(var E=-1,M=l.length,N=M-1,W=e;W!=null&&++E<M;){var V=sn(l[E]),ce=m;if(V==="__proto__"||V==="constructor"||V==="prototype")return e;if(E!=N){var he=W[V];ce=S?S(he,V,W):p,ce===p&&(ce=it(he)?he:_n(l[E+1])?[]:{})}ur(W,V,ce),W=W[V]}return e}var Lu=ts?function(e,l){return ts.set(e,l),e}:Dt,Mp=Zr?function(e,l){return Zr(e,"toString",{configurable:!0,enumerable:!1,value:_o(l),writable:!0})}:Dt;function Ip(e){return ms(Oi(e))}function Ht(e,l,m){var S=-1,E=e.length;l<0&&(l=-l>E?0:E+l),m=m>E?E:m,m<0&&(m+=E),E=l>m?0:m-l>>>0,l>>>=0;for(var M=J(E);++S<E;)M[S]=e[S+l];return M}function kp(e,l){var m;return Mn(e,function(S,E,M){return m=l(S,E,M),!m}),!!m}function ls(e,l,m){var S=0,E=e==null?S:e.length;if(typeof l=="number"&&l===l&&E<=Y){for(;S<E;){var M=S+E>>>1,N=e[M];N!==null&&!Rt(N)&&(m?N<=l:N<l)?S=M+1:E=M}return E}return Ya(e,l,Dt,m)}function Ya(e,l,m,S){var E=0,M=e==null?0:e.length;if(M===0)return 0;l=m(l);for(var N=l!==l,W=l===null,V=Rt(l),ce=l===p;E<M;){var he=es((E+M)/2),ge=m(e[he]),ye=ge!==p,Te=ge===null,Pe=ge===ge,Ne=Rt(ge);if(N)var Ae=S||Pe;else ce?Ae=Pe&&(S||ye):W?Ae=Pe&&ye&&(S||!Te):V?Ae=Pe&&ye&&!Te&&(S||!Ne):Te||Ne?Ae=!1:Ae=S?ge<=l:ge<l;Ae?E=he+1:M=he}return Ct(M,R)}function Du(e,l){for(var m=-1,S=e.length,E=0,M=[];++m<S;){var N=e[m],W=l?l(N):N;if(!m||!Zt(W,V)){var V=W;M[E++]=N===0?0:N}}return M}function Mu(e){return typeof e=="number"?e:Rt(e)?I:+e}function Ft(e){if(typeof e=="string")return e;if(ke(e))return nt(e,Ft)+"";if(Rt(e))return cu?cu.call(e):"";var l=e+"";return l=="0"&&1/e==-me?"-0":l}function In(e,l,m){var S=-1,E=Wr,M=e.length,N=!0,W=[],V=W;if(m)N=!1,E=Ca;else if(M>=b){var ce=l?null:Yp(e);if(ce)return Gr(ce);N=!1,E=ir,V=new Kn}else V=l?[]:W;e:for(;++S<M;){var he=e[S],ge=l?l(he):he;if(he=m||he!==0?he:0,N&&ge===ge){for(var ye=V.length;ye--;)if(V[ye]===ge)continue e;l&&V.push(ge),W.push(he)}else E(V,ge,m)||(V!==W&&V.push(ge),W.push(he))}return W}function Ha(e,l){return l=kn(l,e),e=ac(e,l),e==null||delete e[sn(Xt(l))]}function Iu(e,l,m,S){return dr(e,l,m(Jn(e,l)),S)}function us(e,l,m,S){for(var E=e.length,M=S?E:-1;(S?M--:++M<E)&&l(e[M],M,e););return m?Ht(e,S?0:M,S?M+1:E):Ht(e,S?M+1:0,S?E:M)}function ku(e,l){var m=e;return m instanceof ze&&(m=m.value()),ba(l,function(S,E){return E.func.apply(E.thisArg,An([S],E.args))},m)}function Xa(e,l,m){var S=e.length;if(S<2)return S?In(e[0]):[];for(var E=-1,M=J(S);++E<S;)for(var N=e[E],W=-1;++W<S;)W!=E&&(M[E]=cr(M[E]||N,e[W],l,m));return In(mt(M,1),l,m)}function Fu(e,l,m){for(var S=-1,E=e.length,M=l.length,N={};++S<E;){var W=S<M?l[S]:p;m(N,e[S],W)}return N}function Va(e){return lt(e)?e:[]}function Ka(e){return typeof e=="function"?e:Dt}function kn(e,l){return ke(e)?e:ro(e,l)?[e]:cc(Ke(e))}var Fp=$e;function Fn(e,l,m){var S=e.length;return m=m===p?S:m,!l&&m>=S?e:Ht(e,l,m)}var Ru=wg||function(e){return vt.clearTimeout(e)};function Bu(e,l){if(l)return e.slice();var m=e.length,S=ru?ru(m):new e.constructor(m);return e.copy(S),S}function qa(e){var l=new e.constructor(e.byteLength);return new Kr(l).set(new Kr(e)),l}function Rp(e,l){var m=l?qa(e.buffer):e.buffer;return new e.constructor(m,e.byteOffset,e.byteLength)}function Bp(e){var l=new e.constructor(e.source,Cl.exec(e));return l.lastIndex=e.lastIndex,l}function Np(e){return lr?Je(lr.call(e)):{}}function Nu(e,l){var m=l?qa(e.buffer):e.buffer;return new e.constructor(m,e.byteOffset,e.length)}function ju(e,l){if(e!==l){var m=e!==p,S=e===null,E=e===e,M=Rt(e),N=l!==p,W=l===null,V=l===l,ce=Rt(l);if(!W&&!ce&&!M&&e>l||M&&N&&V&&!W&&!ce||S&&N&&V||!m&&V||!E)return 1;if(!S&&!M&&!ce&&e<l||ce&&m&&E&&!S&&!M||W&&m&&E||!N&&E||!V)return-1}return 0}function jp(e,l,m){for(var S=-1,E=e.criteria,M=l.criteria,N=E.length,W=m.length;++S<N;){var V=ju(E[S],M[S]);if(V){if(S>=W)return V;var ce=m[S];return V*(ce=="desc"?-1:1)}}return e.index-l.index}function $u(e,l,m,S){for(var E=-1,M=e.length,N=m.length,W=-1,V=l.length,ce=ft(M-N,0),he=J(V+ce),ge=!S;++W<V;)he[W]=l[W];for(;++E<N;)(ge||E<M)&&(he[m[E]]=e[E]);for(;ce--;)he[W++]=e[E++];return he}function Wu(e,l,m,S){for(var E=-1,M=e.length,N=-1,W=m.length,V=-1,ce=l.length,he=ft(M-W,0),ge=J(he+ce),ye=!S;++E<he;)ge[E]=e[E];for(var Te=E;++V<ce;)ge[Te+V]=l[V];for(;++N<W;)(ye||E<M)&&(ge[Te+m[N]]=e[E++]);return ge}function Pt(e,l){var m=-1,S=e.length;for(l||(l=J(S));++m<S;)l[m]=e[m];return l}function rn(e,l,m,S){var E=!m;m||(m={});for(var M=-1,N=l.length;++M<N;){var W=l[M],V=S?S(m[W],e[W],W,m,e):p;V===p&&(V=e[W]),E?pn(m,W,V):ur(m,W,V)}return m}function $p(e,l){return rn(e,io(e),l)}function Wp(e,l){return rn(e,ec(e),l)}function cs(e,l){return function(m,S){var E=ke(m)?Hd:up,M=l?l():{};return E(m,e,Oe(S,2),M)}}function wi(e){return $e(function(l,m){var S=-1,E=m.length,M=E>1?m[E-1]:p,N=E>2?m[2]:p;for(M=e.length>3&&typeof M=="function"?(E--,M):p,N&&Tt(m[0],m[1],N)&&(M=E<3?p:M,E=1),l=Je(l);++S<E;){var W=m[S];W&&e(l,W,S,M)}return l})}function Uu(e,l){return function(m,S){if(m==null)return m;if(!At(m))return e(m,S);for(var E=m.length,M=l?E:-1,N=Je(m);(l?M--:++M<E)&&S(N[M],M,N)!==!1;);return m}}function Gu(e){return function(l,m,S){for(var E=-1,M=Je(l),N=S(l),W=N.length;W--;){var V=N[e?W:++E];if(m(M[V],V,M)===!1)break}return l}}function Up(e,l,m){var S=l&a,E=gr(e);function M(){var N=this&&this!==vt&&this instanceof M?E:e;return N.apply(S?m:this,arguments)}return M}function zu(e){return function(l){l=Ke(l);var m=pi(l)?qt(l):p,S=m?m[0]:l.charAt(0),E=m?Fn(m,1).join(""):l.slice(1);return S[e]()+E}}function Si(e){return function(l){return ba(Uc(Wc(l).replace(Md,"")),e,"")}}function gr(e){return function(){var l=arguments;switch(l.length){case 0:return new e;case 1:return new e(l[0]);case 2:return new e(l[0],l[1]);case 3:return new e(l[0],l[1],l[2]);case 4:return new e(l[0],l[1],l[2],l[3]);case 5:return new e(l[0],l[1],l[2],l[3],l[4]);case 6:return new e(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new e(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var m=bi(e.prototype),S=e.apply(m,l);return it(S)?S:m}}function Gp(e,l,m){var S=gr(e);function E(){for(var M=arguments.length,N=J(M),W=M,V=xi(E);W--;)N[W]=arguments[W];var ce=M<3&&N[0]!==V&&N[M-1]!==V?[]:Ln(N,V);if(M-=ce.length,M<m)return Ku(e,l,hs,E.placeholder,p,N,ce,p,p,m-M);var he=this&&this!==vt&&this instanceof E?S:e;return It(he,this,N)}return E}function Yu(e){return function(l,m,S){var E=Je(l);if(!At(l)){var M=Oe(m,3);l=dt(l),m=function(W){return M(E[W],W,E)}}var N=e(l,m,S);return N>-1?E[M?l[N]:N]:p}}function Hu(e){return mn(function(l){var m=l.length,S=m,E=zt.prototype.thru;for(e&&l.reverse();S--;){var M=l[S];if(typeof M!="function")throw new Gt(x);if(E&&!N&&ps(M)=="wrapper")var N=new zt([],!0)}for(S=N?S:m;++S<m;){M=l[S];var W=ps(M),V=W=="wrapper"?to(M):p;V&&so(V[0])&&V[1]==(D|_|T|B)&&!V[4].length&&V[9]==1?N=N[ps(V[0])].apply(N,V[3]):N=M.length==1&&so(M)?N[W]():N.thru(M)}return function(){var ce=arguments,he=ce[0];if(N&&ce.length==1&&ke(he))return N.plant(he).value();for(var ge=0,ye=m?l[ge].apply(this,ce):he;++ge<m;)ye=l[ge].call(this,ye);return ye}})}function hs(e,l,m,S,E,M,N,W,V,ce){var he=l&D,ge=l&a,ye=l&g,Te=l&(_|y),Pe=l&j,Ne=ye?p:gr(e);function Ae(){for(var Ge=arguments.length,He=J(Ge),Bt=Ge;Bt--;)He[Bt]=arguments[Bt];if(Te)var Ot=xi(Ae),Nt=tg(He,Ot);if(S&&(He=$u(He,S,E,Te)),M&&(He=Wu(He,M,N,Te)),Ge-=Nt,Te&&Ge<ce){var ut=Ln(He,Ot);return Ku(e,l,hs,Ae.placeholder,m,He,ut,W,V,ce-Ge)}var Qt=ge?m:this,bn=ye?Qt[e]:e;return Ge=He.length,W?He=uv(He,W):Pe&&Ge>1&&He.reverse(),he&&V<Ge&&(He.length=V),this&&this!==vt&&this instanceof Ae&&(bn=Ne||gr(bn)),bn.apply(Qt,He)}return Ae}function Xu(e,l){return function(m,S){return mp(m,e,l(S),{})}}function fs(e,l){return function(m,S){var E;if(m===p&&S===p)return l;if(m!==p&&(E=m),S!==p){if(E===p)return S;typeof m=="string"||typeof S=="string"?(m=Ft(m),S=Ft(S)):(m=Mu(m),S=Mu(S)),E=e(m,S)}return E}}function Ja(e){return mn(function(l){return l=nt(l,kt(Oe())),$e(function(m){var S=this;return e(l,function(E){return It(E,S,m)})})})}function ds(e,l){l=l===p?" ":Ft(l);var m=l.length;if(m<2)return m?za(l,e):l;var S=za(l,Qr(e/vi(l)));return pi(l)?Fn(qt(S),0,e).join(""):S.slice(0,e)}function zp(e,l,m,S){var E=l&a,M=gr(e);function N(){for(var W=-1,V=arguments.length,ce=-1,he=S.length,ge=J(he+V),ye=this&&this!==vt&&this instanceof N?M:e;++ce<he;)ge[ce]=S[ce];for(;V--;)ge[ce++]=arguments[++W];return It(ye,E?m:this,ge)}return N}function Vu(e){return function(l,m,S){return S&&typeof S!="number"&&Tt(l,m,S)&&(m=S=p),l=Cn(l),m===p?(m=l,l=0):m=Cn(m),S=S===p?l<m?1:-1:Cn(S),Ap(l,m,S,e)}}function gs(e){return function(l,m){return typeof l=="string"&&typeof m=="string"||(l=Vt(l),m=Vt(m)),e(l,m)}}function Ku(e,l,m,S,E,M,N,W,V,ce){var he=l&_,ge=he?N:p,ye=he?p:N,Te=he?M:p,Pe=he?p:M;l|=he?T:P,l&=~(he?P:T),l&v||(l&=~(a|g));var Ne=[e,l,E,Te,ge,Pe,ye,W,V,ce],Ae=m.apply(p,Ne);return so(e)&&oc(Ae,Ne),Ae.placeholder=S,lc(Ae,e,l)}function Za(e){var l=ht[e];return function(m,S){if(m=Vt(m),S=S==null?0:Ct(Fe(S),292),S&&lu(m)){var E=(Ke(m)+"e").split("e"),M=l(E[0]+"e"+(+E[1]+S));return E=(Ke(M)+"e").split("e"),+(E[0]+"e"+(+E[1]-S))}return l(m)}}var Yp=yi&&1/Gr(new yi([,-0]))[1]==me?function(e){return new yi(e)}:bo;function qu(e){return function(l){var m=bt(l);return m==X?Pa(l):m==Ce?lg(l):eg(l,e(l))}}function vn(e,l,m,S,E,M,N,W){var V=l&g;if(!V&&typeof e!="function")throw new Gt(x);var ce=S?S.length:0;if(ce||(l&=~(T|P),S=E=p),N=N===p?N:ft(Fe(N),0),W=W===p?W:Fe(W),ce-=E?E.length:0,l&P){var he=S,ge=E;S=E=p}var ye=V?p:to(e),Te=[e,l,m,S,E,he,ge,M,N,W];if(ye&&av(Te,ye),e=Te[0],l=Te[1],m=Te[2],S=Te[3],E=Te[4],W=Te[9]=Te[9]===p?V?0:e.length:ft(Te[9]-ce,0),!W&&l&(_|y)&&(l&=~(_|y)),!l||l==a)var Pe=Up(e,l,m);else l==_||l==y?Pe=Gp(e,l,W):(l==T||l==(a|T))&&!E.length?Pe=zp(e,l,m,S):Pe=hs.apply(p,Te);var Ne=ye?Lu:oc;return lc(Ne(Pe,Te),e,l)}function Ju(e,l,m,S){return e===p||Zt(e,_i[m])&&!qe.call(S,m)?l:e}function Zu(e,l,m,S,E,M){return it(e)&&it(l)&&(M.set(l,e),os(e,l,p,Zu,M),M.delete(l)),e}function Hp(e){return mr(e)?p:e}function Qu(e,l,m,S,E,M){var N=m&o,W=e.length,V=l.length;if(W!=V&&!(N&&V>W))return!1;var ce=M.get(e),he=M.get(l);if(ce&&he)return ce==l&&he==e;var ge=-1,ye=!0,Te=m&d?new Kn:p;for(M.set(e,l),M.set(l,e);++ge<W;){var Pe=e[ge],Ne=l[ge];if(S)var Ae=N?S(Ne,Pe,ge,l,e,M):S(Pe,Ne,ge,e,l,M);if(Ae!==p){if(Ae)continue;ye=!1;break}if(Te){if(!wa(l,function(Ge,He){if(!ir(Te,He)&&(Pe===Ge||E(Pe,Ge,m,S,M)))return Te.push(He)})){ye=!1;break}}else if(!(Pe===Ne||E(Pe,Ne,m,S,M))){ye=!1;break}}return M.delete(e),M.delete(l),ye}function Xp(e,l,m,S,E,M,N){switch(m){case at:if(e.byteLength!=l.byteLength||e.byteOffset!=l.byteOffset)return!1;e=e.buffer,l=l.buffer;case Ye:return!(e.byteLength!=l.byteLength||!M(new Kr(e),new Kr(l)));case Q:case K:case oe:return Zt(+e,+l);case de:return e.name==l.name&&e.message==l.message;case Ee:case se:return e==l+"";case X:var W=Pa;case Ce:var V=S&o;if(W||(W=Gr),e.size!=l.size&&!V)return!1;var ce=N.get(e);if(ce)return ce==l;S|=d,N.set(e,l);var he=Qu(W(e),W(l),S,E,M,N);return N.delete(e),he;case xe:if(lr)return lr.call(e)==lr.call(l)}return!1}function Vp(e,l,m,S,E,M){var N=m&o,W=Qa(e),V=W.length,ce=Qa(l),he=ce.length;if(V!=he&&!N)return!1;for(var ge=V;ge--;){var ye=W[ge];if(!(N?ye in l:qe.call(l,ye)))return!1}var Te=M.get(e),Pe=M.get(l);if(Te&&Pe)return Te==l&&Pe==e;var Ne=!0;M.set(e,l),M.set(l,e);for(var Ae=N;++ge<V;){ye=W[ge];var Ge=e[ye],He=l[ye];if(S)var Bt=N?S(He,Ge,ye,l,e,M):S(Ge,He,ye,e,l,M);if(!(Bt===p?Ge===He||E(Ge,He,m,S,M):Bt)){Ne=!1;break}Ae||(Ae=ye=="constructor")}if(Ne&&!Ae){var Ot=e.constructor,Nt=l.constructor;Ot!=Nt&&"constructor"in e&&"constructor"in l&&!(typeof Ot=="function"&&Ot instanceof Ot&&typeof Nt=="function"&&Nt instanceof Nt)&&(Ne=!1)}return M.delete(e),M.delete(l),Ne}function mn(e){return oo(sc(e,p,gc),e+"")}function Qa(e){return yu(e,dt,io)}function eo(e){return yu(e,Lt,ec)}var to=ts?function(e){return ts.get(e)}:bo;function ps(e){for(var l=e.name+"",m=Ci[l],S=qe.call(Ci,l)?m.length:0;S--;){var E=m[S],M=E.func;if(M==null||M==e)return E.name}return l}function xi(e){var l=qe.call(L,"placeholder")?L:e;return l.placeholder}function Oe(){var e=L.iteratee||yo;return e=e===yo?wu:e,arguments.length?e(arguments[0],arguments[1]):e}function vs(e,l){var m=e.__data__;return nv(l)?m[typeof l=="string"?"string":"hash"]:m.map}function no(e){for(var l=dt(e),m=l.length;m--;){var S=l[m],E=e[S];l[m]=[S,E,ic(E)]}return l}function Zn(e,l){var m=sg(e,l);return bu(m)?m:p}function Kp(e){var l=qe.call(e,Xn),m=e[Xn];try{e[Xn]=p;var S=!0}catch{}var E=Xr.call(e);return S&&(l?e[Xn]=m:delete e[Xn]),E}var io=La?function(e){return e==null?[]:(e=Je(e),Pn(La(e),function(l){return au.call(e,l)}))}:wo,ec=La?function(e){for(var l=[];e;)An(l,io(e)),e=qr(e);return l}:wo,bt=xt;(Da&&bt(new Da(new ArrayBuffer(1)))!=at||sr&&bt(new sr)!=X||Ma&&bt(Ma.resolve())!=fe||yi&&bt(new yi)!=Ce||ar&&bt(new ar)!=Be)&&(bt=function(e){var l=xt(e),m=l==q?e.constructor:p,S=m?Qn(m):"";if(S)switch(S){case Dg:return at;case Mg:return X;case Ig:return fe;case kg:return Ce;case Fg:return Be}return l});function qp(e,l,m){for(var S=-1,E=m.length;++S<E;){var M=m[S],N=M.size;switch(M.type){case"drop":e+=N;break;case"dropRight":l-=N;break;case"take":l=Ct(l,e+N);break;case"takeRight":e=ft(e,l-N);break}}return{start:e,end:l}}function Jp(e){var l=e.match(id);return l?l[1].split(rd):[]}function tc(e,l,m){l=kn(l,e);for(var S=-1,E=l.length,M=!1;++S<E;){var N=sn(l[S]);if(!(M=e!=null&&m(e,N)))break;e=e[N]}return M||++S!=E?M:(E=e==null?0:e.length,!!E&&Ss(E)&&_n(N,E)&&(ke(e)||ei(e)))}function Zp(e){var l=e.length,m=new e.constructor(l);return l&&typeof e[0]=="string"&&qe.call(e,"index")&&(m.index=e.index,m.input=e.input),m}function nc(e){return typeof e.constructor=="function"&&!pr(e)?bi(qr(e)):{}}function Qp(e,l,m){var S=e.constructor;switch(l){case Ye:return qa(e);case Q:case K:return new S(+e);case at:return Rp(e,m);case tt:case Kt:case fn:case Et:case er:case fi:case tr:case nr:case ca:return Nu(e,m);case X:return new S;case oe:case se:return new S(e);case Ee:return Bp(e);case Ce:return new S;case xe:return Np(e)}}function ev(e,l){var m=l.length;if(!m)return e;var S=m-1;return l[S]=(m>1?"& ":"")+l[S],l=l.join(m>2?", ":" "),e.replace(nd,`{
/* [wrapped with `+l+`] */
`)}function tv(e){return ke(e)||ei(e)||!!(ou&&e&&e[ou])}function _n(e,l){var m=typeof e;return l=l??G,!!l&&(m=="number"||m!="symbol"&&dd.test(e))&&e>-1&&e%1==0&&e<l}function Tt(e,l,m){if(!it(m))return!1;var S=typeof l;return(S=="number"?At(m)&&_n(l,m.length):S=="string"&&l in m)?Zt(m[l],e):!1}function ro(e,l){if(ke(e))return!1;var m=typeof e;return m=="number"||m=="symbol"||m=="boolean"||e==null||Rt(e)?!0:Zf.test(e)||!Jf.test(e)||l!=null&&e in Je(l)}function nv(e){var l=typeof e;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?e!=="__proto__":e===null}function so(e){var l=ps(e),m=L[l];if(typeof m!="function"||!(l in ze.prototype))return!1;if(e===m)return!0;var S=to(m);return!!S&&e===S[0]}function iv(e){return!!iu&&iu in e}var rv=Yr?yn:So;function pr(e){var l=e&&e.constructor,m=typeof l=="function"&&l.prototype||_i;return e===m}function ic(e){return e===e&&!it(e)}function rc(e,l){return function(m){return m==null?!1:m[e]===l&&(l!==p||e in Je(m))}}function sv(e){var l=bs(e,function(S){return m.size===c&&m.clear(),S}),m=l.cache;return l}function av(e,l){var m=e[1],S=l[1],E=m|S,M=E<(a|g|D),N=S==D&&m==_||S==D&&m==B&&e[7].length<=l[8]||S==(D|B)&&l[7].length<=l[8]&&m==_;if(!(M||N))return e;S&a&&(e[2]=l[2],E|=m&a?0:v);var W=l[3];if(W){var V=e[3];e[3]=V?$u(V,W,l[4]):W,e[4]=V?Ln(e[3],u):l[4]}return W=l[5],W&&(V=e[5],e[5]=V?Wu(V,W,l[6]):W,e[6]=V?Ln(e[5],u):l[6]),W=l[7],W&&(e[7]=W),S&D&&(e[8]=e[8]==null?l[8]:Ct(e[8],l[8])),e[9]==null&&(e[9]=l[9]),e[0]=l[0],e[1]=E,e}function ov(e){var l=[];if(e!=null)for(var m in Je(e))l.push(m);return l}function lv(e){return Xr.call(e)}function sc(e,l,m){return l=ft(l===p?e.length-1:l,0),function(){for(var S=arguments,E=-1,M=ft(S.length-l,0),N=J(M);++E<M;)N[E]=S[l+E];E=-1;for(var W=J(l+1);++E<l;)W[E]=S[E];return W[l]=m(N),It(e,this,W)}}function ac(e,l){return l.length<2?e:Jn(e,Ht(l,0,-1))}function uv(e,l){for(var m=e.length,S=Ct(l.length,m),E=Pt(e);S--;){var M=l[S];e[S]=_n(M,m)?E[M]:p}return e}function ao(e,l){if(!(l==="constructor"&&typeof e[l]=="function")&&l!="__proto__")return e[l]}var oc=uc(Lu),vr=xg||function(e,l){return vt.setTimeout(e,l)},oo=uc(Mp);function lc(e,l,m){var S=l+"";return oo(e,ev(S,cv(Jp(S),m)))}function uc(e){var l=0,m=0;return function(){var S=Pg(),E=ie-(S-m);if(m=S,E>0){if(++l>=ne)return arguments[0]}else l=0;return e.apply(p,arguments)}}function ms(e,l){var m=-1,S=e.length,E=S-1;for(l=l===p?S:l;++m<l;){var M=Ga(m,E),N=e[M];e[M]=e[m],e[m]=N}return e.length=l,e}var cc=sv(function(e){var l=[];return e.charCodeAt(0)===46&&l.push(""),e.replace(Qf,function(m,S,E,M){l.push(E?M.replace(od,"$1"):S||m)}),l});function sn(e){if(typeof e=="string"||Rt(e))return e;var l=e+"";return l=="0"&&1/e==-me?"-0":l}function Qn(e){if(e!=null){try{return Hr.call(e)}catch{}try{return e+""}catch{}}return""}function cv(e,l){return Ut(F,function(m){var S="_."+m[0];l&m[1]&&!Wr(e,S)&&e.push(S)}),e.sort()}function hc(e){if(e instanceof ze)return e.clone();var l=new zt(e.__wrapped__,e.__chain__);return l.__actions__=Pt(e.__actions__),l.__index__=e.__index__,l.__values__=e.__values__,l}function hv(e,l,m){(m?Tt(e,l,m):l===p)?l=1:l=ft(Fe(l),0);var S=e==null?0:e.length;if(!S||l<1)return[];for(var E=0,M=0,N=J(Qr(S/l));E<S;)N[M++]=Ht(e,E,E+=l);return N}function fv(e){for(var l=-1,m=e==null?0:e.length,S=0,E=[];++l<m;){var M=e[l];M&&(E[S++]=M)}return E}function dv(){var e=arguments.length;if(!e)return[];for(var l=J(e-1),m=arguments[0],S=e;S--;)l[S-1]=arguments[S];return An(ke(m)?Pt(m):[m],mt(l,1))}var gv=$e(function(e,l){return lt(e)?cr(e,mt(l,1,lt,!0)):[]}),pv=$e(function(e,l){var m=Xt(l);return lt(m)&&(m=p),lt(e)?cr(e,mt(l,1,lt,!0),Oe(m,2)):[]}),vv=$e(function(e,l){var m=Xt(l);return lt(m)&&(m=p),lt(e)?cr(e,mt(l,1,lt,!0),p,m):[]});function mv(e,l,m){var S=e==null?0:e.length;return S?(l=m||l===p?1:Fe(l),Ht(e,l<0?0:l,S)):[]}function _v(e,l,m){var S=e==null?0:e.length;return S?(l=m||l===p?1:Fe(l),l=S-l,Ht(e,0,l<0?0:l)):[]}function yv(e,l){return e&&e.length?us(e,Oe(l,3),!0,!0):[]}function Cv(e,l){return e&&e.length?us(e,Oe(l,3),!0):[]}function bv(e,l,m,S){var E=e==null?0:e.length;return E?(m&&typeof m!="number"&&Tt(e,l,m)&&(m=0,S=E),dp(e,l,m,S)):[]}function fc(e,l,m){var S=e==null?0:e.length;if(!S)return-1;var E=m==null?0:Fe(m);return E<0&&(E=ft(S+E,0)),Ur(e,Oe(l,3),E)}function dc(e,l,m){var S=e==null?0:e.length;if(!S)return-1;var E=S-1;return m!==p&&(E=Fe(m),E=m<0?ft(S+E,0):Ct(E,S-1)),Ur(e,Oe(l,3),E,!0)}function gc(e){var l=e==null?0:e.length;return l?mt(e,1):[]}function wv(e){var l=e==null?0:e.length;return l?mt(e,me):[]}function Sv(e,l){var m=e==null?0:e.length;return m?(l=l===p?1:Fe(l),mt(e,l)):[]}function xv(e){for(var l=-1,m=e==null?0:e.length,S={};++l<m;){var E=e[l];S[E[0]]=E[1]}return S}function pc(e){return e&&e.length?e[0]:p}function Tv(e,l,m){var S=e==null?0:e.length;if(!S)return-1;var E=m==null?0:Fe(m);return E<0&&(E=ft(S+E,0)),gi(e,l,E)}function Ov(e){var l=e==null?0:e.length;return l?Ht(e,0,-1):[]}var Ev=$e(function(e){var l=nt(e,Va);return l.length&&l[0]===e[0]?Na(l):[]}),Pv=$e(function(e){var l=Xt(e),m=nt(e,Va);return l===Xt(m)?l=p:m.pop(),m.length&&m[0]===e[0]?Na(m,Oe(l,2)):[]}),Av=$e(function(e){var l=Xt(e),m=nt(e,Va);return l=typeof l=="function"?l:p,l&&m.pop(),m.length&&m[0]===e[0]?Na(m,p,l):[]});function Lv(e,l){return e==null?"":Og.call(e,l)}function Xt(e){var l=e==null?0:e.length;return l?e[l-1]:p}function Dv(e,l,m){var S=e==null?0:e.length;if(!S)return-1;var E=S;return m!==p&&(E=Fe(m),E=E<0?ft(S+E,0):Ct(E,S-1)),l===l?cg(e,l,E):Ur(e,Kl,E,!0)}function Mv(e,l){return e&&e.length?Ou(e,Fe(l)):p}var Iv=$e(vc);function vc(e,l){return e&&e.length&&l&&l.length?Ua(e,l):e}function kv(e,l,m){return e&&e.length&&l&&l.length?Ua(e,l,Oe(m,2)):e}function Fv(e,l,m){return e&&e.length&&l&&l.length?Ua(e,l,p,m):e}var Rv=mn(function(e,l){var m=e==null?0:e.length,S=ka(e,l);return Au(e,nt(l,function(E){return _n(E,m)?+E:E}).sort(ju)),S});function Bv(e,l){var m=[];if(!(e&&e.length))return m;var S=-1,E=[],M=e.length;for(l=Oe(l,3);++S<M;){var N=e[S];l(N,S,e)&&(m.push(N),E.push(S))}return Au(e,E),m}function lo(e){return e==null?e:Lg.call(e)}function Nv(e,l,m){var S=e==null?0:e.length;return S?(m&&typeof m!="number"&&Tt(e,l,m)?(l=0,m=S):(l=l==null?0:Fe(l),m=m===p?S:Fe(m)),Ht(e,l,m)):[]}function jv(e,l){return ls(e,l)}function $v(e,l,m){return Ya(e,l,Oe(m,2))}function Wv(e,l){var m=e==null?0:e.length;if(m){var S=ls(e,l);if(S<m&&Zt(e[S],l))return S}return-1}function Uv(e,l){return ls(e,l,!0)}function Gv(e,l,m){return Ya(e,l,Oe(m,2),!0)}function zv(e,l){var m=e==null?0:e.length;if(m){var S=ls(e,l,!0)-1;if(Zt(e[S],l))return S}return-1}function Yv(e){return e&&e.length?Du(e):[]}function Hv(e,l){return e&&e.length?Du(e,Oe(l,2)):[]}function Xv(e){var l=e==null?0:e.length;return l?Ht(e,1,l):[]}function Vv(e,l,m){return e&&e.length?(l=m||l===p?1:Fe(l),Ht(e,0,l<0?0:l)):[]}function Kv(e,l,m){var S=e==null?0:e.length;return S?(l=m||l===p?1:Fe(l),l=S-l,Ht(e,l<0?0:l,S)):[]}function qv(e,l){return e&&e.length?us(e,Oe(l,3),!1,!0):[]}function Jv(e,l){return e&&e.length?us(e,Oe(l,3)):[]}var Zv=$e(function(e){return In(mt(e,1,lt,!0))}),Qv=$e(function(e){var l=Xt(e);return lt(l)&&(l=p),In(mt(e,1,lt,!0),Oe(l,2))}),em=$e(function(e){var l=Xt(e);return l=typeof l=="function"?l:p,In(mt(e,1,lt,!0),p,l)});function tm(e){return e&&e.length?In(e):[]}function nm(e,l){return e&&e.length?In(e,Oe(l,2)):[]}function im(e,l){return l=typeof l=="function"?l:p,e&&e.length?In(e,p,l):[]}function uo(e){if(!(e&&e.length))return[];var l=0;return e=Pn(e,function(m){if(lt(m))return l=ft(m.length,l),!0}),Oa(l,function(m){return nt(e,Sa(m))})}function mc(e,l){if(!(e&&e.length))return[];var m=uo(e);return l==null?m:nt(m,function(S){return It(l,p,S)})}var rm=$e(function(e,l){return lt(e)?cr(e,l):[]}),sm=$e(function(e){return Xa(Pn(e,lt))}),am=$e(function(e){var l=Xt(e);return lt(l)&&(l=p),Xa(Pn(e,lt),Oe(l,2))}),om=$e(function(e){var l=Xt(e);return l=typeof l=="function"?l:p,Xa(Pn(e,lt),p,l)}),lm=$e(uo);function um(e,l){return Fu(e||[],l||[],ur)}function cm(e,l){return Fu(e||[],l||[],dr)}var hm=$e(function(e){var l=e.length,m=l>1?e[l-1]:p;return m=typeof m=="function"?(e.pop(),m):p,mc(e,m)});function _c(e){var l=L(e);return l.__chain__=!0,l}function fm(e,l){return l(e),e}function _s(e,l){return l(e)}var dm=mn(function(e){var l=e.length,m=l?e[0]:0,S=this.__wrapped__,E=function(M){return ka(M,e)};return l>1||this.__actions__.length||!(S instanceof ze)||!_n(m)?this.thru(E):(S=S.slice(m,+m+(l?1:0)),S.__actions__.push({func:_s,args:[E],thisArg:p}),new zt(S,this.__chain__).thru(function(M){return l&&!M.length&&M.push(p),M}))});function gm(){return _c(this)}function pm(){return new zt(this.value(),this.__chain__)}function vm(){this.__values__===p&&(this.__values__=Mc(this.value()));var e=this.__index__>=this.__values__.length,l=e?p:this.__values__[this.__index__++];return{done:e,value:l}}function mm(){return this}function _m(e){for(var l,m=this;m instanceof is;){var S=hc(m);S.__index__=0,S.__values__=p,l?E.__wrapped__=S:l=S;var E=S;m=m.__wrapped__}return E.__wrapped__=e,l}function ym(){var e=this.__wrapped__;if(e instanceof ze){var l=e;return this.__actions__.length&&(l=new ze(this)),l=l.reverse(),l.__actions__.push({func:_s,args:[lo],thisArg:p}),new zt(l,this.__chain__)}return this.thru(lo)}function Cm(){return ku(this.__wrapped__,this.__actions__)}var bm=cs(function(e,l,m){qe.call(e,m)?++e[m]:pn(e,m,1)});function wm(e,l,m){var S=ke(e)?Xl:fp;return m&&Tt(e,l,m)&&(l=p),S(e,Oe(l,3))}function Sm(e,l){var m=ke(e)?Pn:mu;return m(e,Oe(l,3))}var xm=Yu(fc),Tm=Yu(dc);function Om(e,l){return mt(ys(e,l),1)}function Em(e,l){return mt(ys(e,l),me)}function Pm(e,l,m){return m=m===p?1:Fe(m),mt(ys(e,l),m)}function yc(e,l){var m=ke(e)?Ut:Mn;return m(e,Oe(l,3))}function Cc(e,l){var m=ke(e)?Xd:vu;return m(e,Oe(l,3))}var Am=cs(function(e,l,m){qe.call(e,m)?e[m].push(l):pn(e,m,[l])});function Lm(e,l,m,S){e=At(e)?e:Oi(e),m=m&&!S?Fe(m):0;var E=e.length;return m<0&&(m=ft(E+m,0)),xs(e)?m<=E&&e.indexOf(l,m)>-1:!!E&&gi(e,l,m)>-1}var Dm=$e(function(e,l,m){var S=-1,E=typeof l=="function",M=At(e)?J(e.length):[];return Mn(e,function(N){M[++S]=E?It(l,N,m):hr(N,l,m)}),M}),Mm=cs(function(e,l,m){pn(e,m,l)});function ys(e,l){var m=ke(e)?nt:Su;return m(e,Oe(l,3))}function Im(e,l,m,S){return e==null?[]:(ke(l)||(l=l==null?[]:[l]),m=S?p:m,ke(m)||(m=m==null?[]:[m]),Eu(e,l,m))}var km=cs(function(e,l,m){e[m?0:1].push(l)},function(){return[[],[]]});function Fm(e,l,m){var S=ke(e)?ba:Jl,E=arguments.length<3;return S(e,Oe(l,4),m,E,Mn)}function Rm(e,l,m){var S=ke(e)?Vd:Jl,E=arguments.length<3;return S(e,Oe(l,4),m,E,vu)}function Bm(e,l){var m=ke(e)?Pn:mu;return m(e,ws(Oe(l,3)))}function Nm(e){var l=ke(e)?fu:Lp;return l(e)}function jm(e,l,m){(m?Tt(e,l,m):l===p)?l=1:l=Fe(l);var S=ke(e)?op:Dp;return S(e,l)}function $m(e){var l=ke(e)?lp:Ip;return l(e)}function Wm(e){if(e==null)return 0;if(At(e))return xs(e)?vi(e):e.length;var l=bt(e);return l==X||l==Ce?e.size:$a(e).length}function Um(e,l,m){var S=ke(e)?wa:kp;return m&&Tt(e,l,m)&&(l=p),S(e,Oe(l,3))}var Gm=$e(function(e,l){if(e==null)return[];var m=l.length;return m>1&&Tt(e,l[0],l[1])?l=[]:m>2&&Tt(l[0],l[1],l[2])&&(l=[l[0]]),Eu(e,mt(l,1),[])}),Cs=Sg||function(){return vt.Date.now()};function zm(e,l){if(typeof l!="function")throw new Gt(x);return e=Fe(e),function(){if(--e<1)return l.apply(this,arguments)}}function bc(e,l,m){return l=m?p:l,l=e&&l==null?e.length:l,vn(e,D,p,p,p,p,l)}function wc(e,l){var m;if(typeof l!="function")throw new Gt(x);return e=Fe(e),function(){return--e>0&&(m=l.apply(this,arguments)),e<=1&&(l=p),m}}var co=$e(function(e,l,m){var S=a;if(m.length){var E=Ln(m,xi(co));S|=T}return vn(e,S,l,m,E)}),Sc=$e(function(e,l,m){var S=a|g;if(m.length){var E=Ln(m,xi(Sc));S|=T}return vn(l,S,e,m,E)});function xc(e,l,m){l=m?p:l;var S=vn(e,_,p,p,p,p,p,l);return S.placeholder=xc.placeholder,S}function Tc(e,l,m){l=m?p:l;var S=vn(e,y,p,p,p,p,p,l);return S.placeholder=Tc.placeholder,S}function Oc(e,l,m){var S,E,M,N,W,V,ce=0,he=!1,ge=!1,ye=!0;if(typeof e!="function")throw new Gt(x);l=Vt(l)||0,it(m)&&(he=!!m.leading,ge="maxWait"in m,M=ge?ft(Vt(m.maxWait)||0,l):M,ye="trailing"in m?!!m.trailing:ye);function Te(ut){var Qt=S,bn=E;return S=E=p,ce=ut,N=e.apply(bn,Qt),N}function Pe(ut){return ce=ut,W=vr(Ge,l),he?Te(ut):N}function Ne(ut){var Qt=ut-V,bn=ut-ce,Yc=l-Qt;return ge?Ct(Yc,M-bn):Yc}function Ae(ut){var Qt=ut-V,bn=ut-ce;return V===p||Qt>=l||Qt<0||ge&&bn>=M}function Ge(){var ut=Cs();if(Ae(ut))return He(ut);W=vr(Ge,Ne(ut))}function He(ut){return W=p,ye&&S?Te(ut):(S=E=p,N)}function Bt(){W!==p&&Ru(W),ce=0,S=V=E=W=p}function Ot(){return W===p?N:He(Cs())}function Nt(){var ut=Cs(),Qt=Ae(ut);if(S=arguments,E=this,V=ut,Qt){if(W===p)return Pe(V);if(ge)return Ru(W),W=vr(Ge,l),Te(V)}return W===p&&(W=vr(Ge,l)),N}return Nt.cancel=Bt,Nt.flush=Ot,Nt}var Ym=$e(function(e,l){return pu(e,1,l)}),Hm=$e(function(e,l,m){return pu(e,Vt(l)||0,m)});function Xm(e){return vn(e,j)}function bs(e,l){if(typeof e!="function"||l!=null&&typeof l!="function")throw new Gt(x);var m=function(){var S=arguments,E=l?l.apply(this,S):S[0],M=m.cache;if(M.has(E))return M.get(E);var N=e.apply(this,S);return m.cache=M.set(E,N)||M,N};return m.cache=new(bs.Cache||gn),m}bs.Cache=gn;function ws(e){if(typeof e!="function")throw new Gt(x);return function(){var l=arguments;switch(l.length){case 0:return!e.call(this);case 1:return!e.call(this,l[0]);case 2:return!e.call(this,l[0],l[1]);case 3:return!e.call(this,l[0],l[1],l[2])}return!e.apply(this,l)}}function Vm(e){return wc(2,e)}var Km=Fp(function(e,l){l=l.length==1&&ke(l[0])?nt(l[0],kt(Oe())):nt(mt(l,1),kt(Oe()));var m=l.length;return $e(function(S){for(var E=-1,M=Ct(S.length,m);++E<M;)S[E]=l[E].call(this,S[E]);return It(e,this,S)})}),ho=$e(function(e,l){var m=Ln(l,xi(ho));return vn(e,T,p,l,m)}),Ec=$e(function(e,l){var m=Ln(l,xi(Ec));return vn(e,P,p,l,m)}),qm=mn(function(e,l){return vn(e,B,p,p,p,l)});function Jm(e,l){if(typeof e!="function")throw new Gt(x);return l=l===p?l:Fe(l),$e(e,l)}function Zm(e,l){if(typeof e!="function")throw new Gt(x);return l=l==null?0:ft(Fe(l),0),$e(function(m){var S=m[l],E=Fn(m,0,l);return S&&An(E,S),It(e,this,E)})}function Qm(e,l,m){var S=!0,E=!0;if(typeof e!="function")throw new Gt(x);return it(m)&&(S="leading"in m?!!m.leading:S,E="trailing"in m?!!m.trailing:E),Oc(e,l,{leading:S,maxWait:l,trailing:E})}function e0(e){return bc(e,1)}function t0(e,l){return ho(Ka(l),e)}function n0(){if(!arguments.length)return[];var e=arguments[0];return ke(e)?e:[e]}function i0(e){return Yt(e,n)}function r0(e,l){return l=typeof l=="function"?l:p,Yt(e,n,l)}function s0(e){return Yt(e,r|n)}function a0(e,l){return l=typeof l=="function"?l:p,Yt(e,r|n,l)}function o0(e,l){return l==null||gu(e,l,dt(l))}function Zt(e,l){return e===l||e!==e&&l!==l}var l0=gs(Ba),u0=gs(function(e,l){return e>=l}),ei=Cu(function(){return arguments}())?Cu:function(e){return ot(e)&&qe.call(e,"callee")&&!au.call(e,"callee")},ke=J.isArray,c0=Wl?kt(Wl):_p;function At(e){return e!=null&&Ss(e.length)&&!yn(e)}function lt(e){return ot(e)&&At(e)}function h0(e){return e===!0||e===!1||ot(e)&&xt(e)==Q}var Rn=Tg||So,f0=Ul?kt(Ul):yp;function d0(e){return ot(e)&&e.nodeType===1&&!mr(e)}function g0(e){if(e==null)return!0;if(At(e)&&(ke(e)||typeof e=="string"||typeof e.splice=="function"||Rn(e)||Ti(e)||ei(e)))return!e.length;var l=bt(e);if(l==X||l==Ce)return!e.size;if(pr(e))return!$a(e).length;for(var m in e)if(qe.call(e,m))return!1;return!0}function p0(e,l){return fr(e,l)}function v0(e,l,m){m=typeof m=="function"?m:p;var S=m?m(e,l):p;return S===p?fr(e,l,p,m):!!S}function fo(e){if(!ot(e))return!1;var l=xt(e);return l==de||l==le||typeof e.message=="string"&&typeof e.name=="string"&&!mr(e)}function m0(e){return typeof e=="number"&&lu(e)}function yn(e){if(!it(e))return!1;var l=xt(e);return l==ve||l==te||l==U||l==_e}function Pc(e){return typeof e=="number"&&e==Fe(e)}function Ss(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=G}function it(e){var l=typeof e;return e!=null&&(l=="object"||l=="function")}function ot(e){return e!=null&&typeof e=="object"}var Ac=Gl?kt(Gl):bp;function _0(e,l){return e===l||ja(e,l,no(l))}function y0(e,l,m){return m=typeof m=="function"?m:p,ja(e,l,no(l),m)}function C0(e){return Lc(e)&&e!=+e}function b0(e){if(rv(e))throw new Ie(w);return bu(e)}function w0(e){return e===null}function S0(e){return e==null}function Lc(e){return typeof e=="number"||ot(e)&&xt(e)==oe}function mr(e){if(!ot(e)||xt(e)!=q)return!1;var l=qr(e);if(l===null)return!0;var m=qe.call(l,"constructor")&&l.constructor;return typeof m=="function"&&m instanceof m&&Hr.call(m)==yg}var go=zl?kt(zl):wp;function x0(e){return Pc(e)&&e>=-G&&e<=G}var Dc=Yl?kt(Yl):Sp;function xs(e){return typeof e=="string"||!ke(e)&&ot(e)&&xt(e)==se}function Rt(e){return typeof e=="symbol"||ot(e)&&xt(e)==xe}var Ti=Hl?kt(Hl):xp;function T0(e){return e===p}function O0(e){return ot(e)&&bt(e)==Be}function E0(e){return ot(e)&&xt(e)==Ze}var P0=gs(Wa),A0=gs(function(e,l){return e<=l});function Mc(e){if(!e)return[];if(At(e))return xs(e)?qt(e):Pt(e);if(rr&&e[rr])return og(e[rr]());var l=bt(e),m=l==X?Pa:l==Ce?Gr:Oi;return m(e)}function Cn(e){if(!e)return e===0?e:0;if(e=Vt(e),e===me||e===-me){var l=e<0?-1:1;return l*O}return e===e?e:0}function Fe(e){var l=Cn(e),m=l%1;return l===l?m?l-m:l:0}function Ic(e){return e?qn(Fe(e),0,k):0}function Vt(e){if(typeof e=="number")return e;if(Rt(e))return I;if(it(e)){var l=typeof e.valueOf=="function"?e.valueOf():e;e=it(l)?l+"":l}if(typeof e!="string")return e===0?e:+e;e=Zl(e);var m=cd.test(e);return m||fd.test(e)?zd(e.slice(2),m?2:8):ud.test(e)?I:+e}function kc(e){return rn(e,Lt(e))}function L0(e){return e?qn(Fe(e),-G,G):e===0?e:0}function Ke(e){return e==null?"":Ft(e)}var D0=wi(function(e,l){if(pr(l)||At(l)){rn(l,dt(l),e);return}for(var m in l)qe.call(l,m)&&ur(e,m,l[m])}),Fc=wi(function(e,l){rn(l,Lt(l),e)}),Ts=wi(function(e,l,m,S){rn(l,Lt(l),e,S)}),M0=wi(function(e,l,m,S){rn(l,dt(l),e,S)}),I0=mn(ka);function k0(e,l){var m=bi(e);return l==null?m:du(m,l)}var F0=$e(function(e,l){e=Je(e);var m=-1,S=l.length,E=S>2?l[2]:p;for(E&&Tt(l[0],l[1],E)&&(S=1);++m<S;)for(var M=l[m],N=Lt(M),W=-1,V=N.length;++W<V;){var ce=N[W],he=e[ce];(he===p||Zt(he,_i[ce])&&!qe.call(e,ce))&&(e[ce]=M[ce])}return e}),R0=$e(function(e){return e.push(p,Zu),It(Rc,p,e)});function B0(e,l){return Vl(e,Oe(l,3),nn)}function N0(e,l){return Vl(e,Oe(l,3),Ra)}function j0(e,l){return e==null?e:Fa(e,Oe(l,3),Lt)}function $0(e,l){return e==null?e:_u(e,Oe(l,3),Lt)}function W0(e,l){return e&&nn(e,Oe(l,3))}function U0(e,l){return e&&Ra(e,Oe(l,3))}function G0(e){return e==null?[]:as(e,dt(e))}function z0(e){return e==null?[]:as(e,Lt(e))}function po(e,l,m){var S=e==null?p:Jn(e,l);return S===p?m:S}function Y0(e,l){return e!=null&&tc(e,l,gp)}function vo(e,l){return e!=null&&tc(e,l,pp)}var H0=Xu(function(e,l,m){l!=null&&typeof l.toString!="function"&&(l=Xr.call(l)),e[l]=m},_o(Dt)),X0=Xu(function(e,l,m){l!=null&&typeof l.toString!="function"&&(l=Xr.call(l)),qe.call(e,l)?e[l].push(m):e[l]=[m]},Oe),V0=$e(hr);function dt(e){return At(e)?hu(e):$a(e)}function Lt(e){return At(e)?hu(e,!0):Tp(e)}function K0(e,l){var m={};return l=Oe(l,3),nn(e,function(S,E,M){pn(m,l(S,E,M),S)}),m}function q0(e,l){var m={};return l=Oe(l,3),nn(e,function(S,E,M){pn(m,E,l(S,E,M))}),m}var J0=wi(function(e,l,m){os(e,l,m)}),Rc=wi(function(e,l,m,S){os(e,l,m,S)}),Z0=mn(function(e,l){var m={};if(e==null)return m;var S=!1;l=nt(l,function(M){return M=kn(M,e),S||(S=M.length>1),M}),rn(e,eo(e),m),S&&(m=Yt(m,r|s|n,Hp));for(var E=l.length;E--;)Ha(m,l[E]);return m});function Q0(e,l){return Bc(e,ws(Oe(l)))}var e1=mn(function(e,l){return e==null?{}:Ep(e,l)});function Bc(e,l){if(e==null)return{};var m=nt(eo(e),function(S){return[S]});return l=Oe(l),Pu(e,m,function(S,E){return l(S,E[0])})}function t1(e,l,m){l=kn(l,e);var S=-1,E=l.length;for(E||(E=1,e=p);++S<E;){var M=e==null?p:e[sn(l[S])];M===p&&(S=E,M=m),e=yn(M)?M.call(e):M}return e}function n1(e,l,m){return e==null?e:dr(e,l,m)}function i1(e,l,m,S){return S=typeof S=="function"?S:p,e==null?e:dr(e,l,m,S)}var Nc=qu(dt),jc=qu(Lt);function r1(e,l,m){var S=ke(e),E=S||Rn(e)||Ti(e);if(l=Oe(l,4),m==null){var M=e&&e.constructor;E?m=S?new M:[]:it(e)?m=yn(M)?bi(qr(e)):{}:m={}}return(E?Ut:nn)(e,function(N,W,V){return l(m,N,W,V)}),m}function s1(e,l){return e==null?!0:Ha(e,l)}function a1(e,l,m){return e==null?e:Iu(e,l,Ka(m))}function o1(e,l,m,S){return S=typeof S=="function"?S:p,e==null?e:Iu(e,l,Ka(m),S)}function Oi(e){return e==null?[]:Ea(e,dt(e))}function l1(e){return e==null?[]:Ea(e,Lt(e))}function u1(e,l,m){return m===p&&(m=l,l=p),m!==p&&(m=Vt(m),m=m===m?m:0),l!==p&&(l=Vt(l),l=l===l?l:0),qn(Vt(e),l,m)}function c1(e,l,m){return l=Cn(l),m===p?(m=l,l=0):m=Cn(m),e=Vt(e),vp(e,l,m)}function h1(e,l,m){if(m&&typeof m!="boolean"&&Tt(e,l,m)&&(l=m=p),m===p&&(typeof l=="boolean"?(m=l,l=p):typeof e=="boolean"&&(m=e,e=p)),e===p&&l===p?(e=0,l=1):(e=Cn(e),l===p?(l=e,e=0):l=Cn(l)),e>l){var S=e;e=l,l=S}if(m||e%1||l%1){var E=uu();return Ct(e+E*(l-e+Gd("1e-"+((E+"").length-1))),l)}return Ga(e,l)}var f1=Si(function(e,l,m){return l=l.toLowerCase(),e+(m?$c(l):l)});function $c(e){return mo(Ke(e).toLowerCase())}function Wc(e){return e=Ke(e),e&&e.replace(gd,ng).replace(Id,"")}function d1(e,l,m){e=Ke(e),l=Ft(l);var S=e.length;m=m===p?S:qn(Fe(m),0,S);var E=m;return m-=l.length,m>=0&&e.slice(m,E)==l}function g1(e){return e=Ke(e),e&&Vf.test(e)?e.replace(_l,ig):e}function p1(e){return e=Ke(e),e&&ed.test(e)?e.replace(ha,"\\$&"):e}var v1=Si(function(e,l,m){return e+(m?"-":"")+l.toLowerCase()}),m1=Si(function(e,l,m){return e+(m?" ":"")+l.toLowerCase()}),_1=zu("toLowerCase");function y1(e,l,m){e=Ke(e),l=Fe(l);var S=l?vi(e):0;if(!l||S>=l)return e;var E=(l-S)/2;return ds(es(E),m)+e+ds(Qr(E),m)}function C1(e,l,m){e=Ke(e),l=Fe(l);var S=l?vi(e):0;return l&&S<l?e+ds(l-S,m):e}function b1(e,l,m){e=Ke(e),l=Fe(l);var S=l?vi(e):0;return l&&S<l?ds(l-S,m)+e:e}function w1(e,l,m){return m||l==null?l=0:l&&(l=+l),Ag(Ke(e).replace(fa,""),l||0)}function S1(e,l,m){return(m?Tt(e,l,m):l===p)?l=1:l=Fe(l),za(Ke(e),l)}function x1(){var e=arguments,l=Ke(e[0]);return e.length<3?l:l.replace(e[1],e[2])}var T1=Si(function(e,l,m){return e+(m?"_":"")+l.toLowerCase()});function O1(e,l,m){return m&&typeof m!="number"&&Tt(e,l,m)&&(l=m=p),m=m===p?k:m>>>0,m?(e=Ke(e),e&&(typeof l=="string"||l!=null&&!go(l))&&(l=Ft(l),!l&&pi(e))?Fn(qt(e),0,m):e.split(l,m)):[]}var E1=Si(function(e,l,m){return e+(m?" ":"")+mo(l)});function P1(e,l,m){return e=Ke(e),m=m==null?0:qn(Fe(m),0,e.length),l=Ft(l),e.slice(m,m+l.length)==l}function A1(e,l,m){var S=L.templateSettings;m&&Tt(e,l,m)&&(l=p),e=Ke(e),l=Ts({},l,S,Ju);var E=Ts({},l.imports,S.imports,Ju),M=dt(E),N=Ea(E,M),W,V,ce=0,he=l.interpolate||Nr,ge="__p += '",ye=Aa((l.escape||Nr).source+"|"+he.source+"|"+(he===yl?ld:Nr).source+"|"+(l.evaluate||Nr).source+"|$","g"),Te="//# sourceURL="+(qe.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Nd+"]")+`
`;e.replace(ye,function(Ae,Ge,He,Bt,Ot,Nt){return He||(He=Bt),ge+=e.slice(ce,Nt).replace(pd,rg),Ge&&(W=!0,ge+=`' +
__e(`+Ge+`) +
'`),Ot&&(V=!0,ge+=`';
`+Ot+`;
__p += '`),He&&(ge+=`' +
((__t = (`+He+`)) == null ? '' : __t) +
'`),ce=Nt+Ae.length,Ae}),ge+=`';
`;var Pe=qe.call(l,"variable")&&l.variable;if(!Pe)ge=`with (obj) {
`+ge+`
}
`;else if(ad.test(Pe))throw new Ie(h);ge=(V?ge.replace(zf,""):ge).replace(Yf,"$1").replace(Hf,"$1;"),ge="function("+(Pe||"obj")+`) {
`+(Pe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(W?", __e = _.escape":"")+(V?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ge+`return __p
}`;var Ne=Gc(function(){return Ve(M,Te+"return "+ge).apply(p,N)});if(Ne.source=ge,fo(Ne))throw Ne;return Ne}function L1(e){return Ke(e).toLowerCase()}function D1(e){return Ke(e).toUpperCase()}function M1(e,l,m){if(e=Ke(e),e&&(m||l===p))return Zl(e);if(!e||!(l=Ft(l)))return e;var S=qt(e),E=qt(l),M=Ql(S,E),N=eu(S,E)+1;return Fn(S,M,N).join("")}function I1(e,l,m){if(e=Ke(e),e&&(m||l===p))return e.slice(0,nu(e)+1);if(!e||!(l=Ft(l)))return e;var S=qt(e),E=eu(S,qt(l))+1;return Fn(S,0,E).join("")}function k1(e,l,m){if(e=Ke(e),e&&(m||l===p))return e.replace(fa,"");if(!e||!(l=Ft(l)))return e;var S=qt(e),E=Ql(S,qt(l));return Fn(S,E).join("")}function F1(e,l){var m=z,S=ee;if(it(l)){var E="separator"in l?l.separator:E;m="length"in l?Fe(l.length):m,S="omission"in l?Ft(l.omission):S}e=Ke(e);var M=e.length;if(pi(e)){var N=qt(e);M=N.length}if(m>=M)return e;var W=m-vi(S);if(W<1)return S;var V=N?Fn(N,0,W).join(""):e.slice(0,W);if(E===p)return V+S;if(N&&(W+=V.length-W),go(E)){if(e.slice(W).search(E)){var ce,he=V;for(E.global||(E=Aa(E.source,Ke(Cl.exec(E))+"g")),E.lastIndex=0;ce=E.exec(he);)var ge=ce.index;V=V.slice(0,ge===p?W:ge)}}else if(e.indexOf(Ft(E),W)!=W){var ye=V.lastIndexOf(E);ye>-1&&(V=V.slice(0,ye))}return V+S}function R1(e){return e=Ke(e),e&&Xf.test(e)?e.replace(ml,hg):e}var B1=Si(function(e,l,m){return e+(m?" ":"")+l.toUpperCase()}),mo=zu("toUpperCase");function Uc(e,l,m){return e=Ke(e),l=m?p:l,l===p?ag(e)?gg(e):Jd(e):e.match(l)||[]}var Gc=$e(function(e,l){try{return It(e,p,l)}catch(m){return fo(m)?m:new Ie(m)}}),N1=mn(function(e,l){return Ut(l,function(m){m=sn(m),pn(e,m,co(e[m],e))}),e});function j1(e){var l=e==null?0:e.length,m=Oe();return e=l?nt(e,function(S){if(typeof S[1]!="function")throw new Gt(x);return[m(S[0]),S[1]]}):[],$e(function(S){for(var E=-1;++E<l;){var M=e[E];if(It(M[0],this,S))return It(M[1],this,S)}})}function $1(e){return hp(Yt(e,r))}function _o(e){return function(){return e}}function W1(e,l){return e==null||e!==e?l:e}var U1=Hu(),G1=Hu(!0);function Dt(e){return e}function yo(e){return wu(typeof e=="function"?e:Yt(e,r))}function z1(e){return xu(Yt(e,r))}function Y1(e,l){return Tu(e,Yt(l,r))}var H1=$e(function(e,l){return function(m){return hr(m,e,l)}}),X1=$e(function(e,l){return function(m){return hr(e,m,l)}});function Co(e,l,m){var S=dt(l),E=as(l,S);m==null&&!(it(l)&&(E.length||!S.length))&&(m=l,l=e,e=this,E=as(l,dt(l)));var M=!(it(m)&&"chain"in m)||!!m.chain,N=yn(e);return Ut(E,function(W){var V=l[W];e[W]=V,N&&(e.prototype[W]=function(){var ce=this.__chain__;if(M||ce){var he=e(this.__wrapped__),ge=he.__actions__=Pt(this.__actions__);return ge.push({func:V,args:arguments,thisArg:e}),he.__chain__=ce,he}return V.apply(e,An([this.value()],arguments))})}),e}function V1(){return vt._===this&&(vt._=Cg),this}function bo(){}function K1(e){return e=Fe(e),$e(function(l){return Ou(l,e)})}var q1=Ja(nt),J1=Ja(Xl),Z1=Ja(wa);function zc(e){return ro(e)?Sa(sn(e)):Pp(e)}function Q1(e){return function(l){return e==null?p:Jn(e,l)}}var e_=Vu(),t_=Vu(!0);function wo(){return[]}function So(){return!1}function n_(){return{}}function i_(){return""}function r_(){return!0}function s_(e,l){if(e=Fe(e),e<1||e>G)return[];var m=k,S=Ct(e,k);l=Oe(l),e-=k;for(var E=Oa(S,l);++m<e;)l(m);return E}function a_(e){return ke(e)?nt(e,sn):Rt(e)?[e]:Pt(cc(Ke(e)))}function o_(e){var l=++_g;return Ke(e)+l}var l_=fs(function(e,l){return e+l},0),u_=Za("ceil"),c_=fs(function(e,l){return e/l},1),h_=Za("floor");function f_(e){return e&&e.length?ss(e,Dt,Ba):p}function d_(e,l){return e&&e.length?ss(e,Oe(l,2),Ba):p}function g_(e){return ql(e,Dt)}function p_(e,l){return ql(e,Oe(l,2))}function v_(e){return e&&e.length?ss(e,Dt,Wa):p}function m_(e,l){return e&&e.length?ss(e,Oe(l,2),Wa):p}var __=fs(function(e,l){return e*l},1),y_=Za("round"),C_=fs(function(e,l){return e-l},0);function b_(e){return e&&e.length?Ta(e,Dt):0}function w_(e,l){return e&&e.length?Ta(e,Oe(l,2)):0}return L.after=zm,L.ary=bc,L.assign=D0,L.assignIn=Fc,L.assignInWith=Ts,L.assignWith=M0,L.at=I0,L.before=wc,L.bind=co,L.bindAll=N1,L.bindKey=Sc,L.castArray=n0,L.chain=_c,L.chunk=hv,L.compact=fv,L.concat=dv,L.cond=j1,L.conforms=$1,L.constant=_o,L.countBy=bm,L.create=k0,L.curry=xc,L.curryRight=Tc,L.debounce=Oc,L.defaults=F0,L.defaultsDeep=R0,L.defer=Ym,L.delay=Hm,L.difference=gv,L.differenceBy=pv,L.differenceWith=vv,L.drop=mv,L.dropRight=_v,L.dropRightWhile=yv,L.dropWhile=Cv,L.fill=bv,L.filter=Sm,L.flatMap=Om,L.flatMapDeep=Em,L.flatMapDepth=Pm,L.flatten=gc,L.flattenDeep=wv,L.flattenDepth=Sv,L.flip=Xm,L.flow=U1,L.flowRight=G1,L.fromPairs=xv,L.functions=G0,L.functionsIn=z0,L.groupBy=Am,L.initial=Ov,L.intersection=Ev,L.intersectionBy=Pv,L.intersectionWith=Av,L.invert=H0,L.invertBy=X0,L.invokeMap=Dm,L.iteratee=yo,L.keyBy=Mm,L.keys=dt,L.keysIn=Lt,L.map=ys,L.mapKeys=K0,L.mapValues=q0,L.matches=z1,L.matchesProperty=Y1,L.memoize=bs,L.merge=J0,L.mergeWith=Rc,L.method=H1,L.methodOf=X1,L.mixin=Co,L.negate=ws,L.nthArg=K1,L.omit=Z0,L.omitBy=Q0,L.once=Vm,L.orderBy=Im,L.over=q1,L.overArgs=Km,L.overEvery=J1,L.overSome=Z1,L.partial=ho,L.partialRight=Ec,L.partition=km,L.pick=e1,L.pickBy=Bc,L.property=zc,L.propertyOf=Q1,L.pull=Iv,L.pullAll=vc,L.pullAllBy=kv,L.pullAllWith=Fv,L.pullAt=Rv,L.range=e_,L.rangeRight=t_,L.rearg=qm,L.reject=Bm,L.remove=Bv,L.rest=Jm,L.reverse=lo,L.sampleSize=jm,L.set=n1,L.setWith=i1,L.shuffle=$m,L.slice=Nv,L.sortBy=Gm,L.sortedUniq=Yv,L.sortedUniqBy=Hv,L.split=O1,L.spread=Zm,L.tail=Xv,L.take=Vv,L.takeRight=Kv,L.takeRightWhile=qv,L.takeWhile=Jv,L.tap=fm,L.throttle=Qm,L.thru=_s,L.toArray=Mc,L.toPairs=Nc,L.toPairsIn=jc,L.toPath=a_,L.toPlainObject=kc,L.transform=r1,L.unary=e0,L.union=Zv,L.unionBy=Qv,L.unionWith=em,L.uniq=tm,L.uniqBy=nm,L.uniqWith=im,L.unset=s1,L.unzip=uo,L.unzipWith=mc,L.update=a1,L.updateWith=o1,L.values=Oi,L.valuesIn=l1,L.without=rm,L.words=Uc,L.wrap=t0,L.xor=sm,L.xorBy=am,L.xorWith=om,L.zip=lm,L.zipObject=um,L.zipObjectDeep=cm,L.zipWith=hm,L.entries=Nc,L.entriesIn=jc,L.extend=Fc,L.extendWith=Ts,Co(L,L),L.add=l_,L.attempt=Gc,L.camelCase=f1,L.capitalize=$c,L.ceil=u_,L.clamp=u1,L.clone=i0,L.cloneDeep=s0,L.cloneDeepWith=a0,L.cloneWith=r0,L.conformsTo=o0,L.deburr=Wc,L.defaultTo=W1,L.divide=c_,L.endsWith=d1,L.eq=Zt,L.escape=g1,L.escapeRegExp=p1,L.every=wm,L.find=xm,L.findIndex=fc,L.findKey=B0,L.findLast=Tm,L.findLastIndex=dc,L.findLastKey=N0,L.floor=h_,L.forEach=yc,L.forEachRight=Cc,L.forIn=j0,L.forInRight=$0,L.forOwn=W0,L.forOwnRight=U0,L.get=po,L.gt=l0,L.gte=u0,L.has=Y0,L.hasIn=vo,L.head=pc,L.identity=Dt,L.includes=Lm,L.indexOf=Tv,L.inRange=c1,L.invoke=V0,L.isArguments=ei,L.isArray=ke,L.isArrayBuffer=c0,L.isArrayLike=At,L.isArrayLikeObject=lt,L.isBoolean=h0,L.isBuffer=Rn,L.isDate=f0,L.isElement=d0,L.isEmpty=g0,L.isEqual=p0,L.isEqualWith=v0,L.isError=fo,L.isFinite=m0,L.isFunction=yn,L.isInteger=Pc,L.isLength=Ss,L.isMap=Ac,L.isMatch=_0,L.isMatchWith=y0,L.isNaN=C0,L.isNative=b0,L.isNil=S0,L.isNull=w0,L.isNumber=Lc,L.isObject=it,L.isObjectLike=ot,L.isPlainObject=mr,L.isRegExp=go,L.isSafeInteger=x0,L.isSet=Dc,L.isString=xs,L.isSymbol=Rt,L.isTypedArray=Ti,L.isUndefined=T0,L.isWeakMap=O0,L.isWeakSet=E0,L.join=Lv,L.kebabCase=v1,L.last=Xt,L.lastIndexOf=Dv,L.lowerCase=m1,L.lowerFirst=_1,L.lt=P0,L.lte=A0,L.max=f_,L.maxBy=d_,L.mean=g_,L.meanBy=p_,L.min=v_,L.minBy=m_,L.stubArray=wo,L.stubFalse=So,L.stubObject=n_,L.stubString=i_,L.stubTrue=r_,L.multiply=__,L.nth=Mv,L.noConflict=V1,L.noop=bo,L.now=Cs,L.pad=y1,L.padEnd=C1,L.padStart=b1,L.parseInt=w1,L.random=h1,L.reduce=Fm,L.reduceRight=Rm,L.repeat=S1,L.replace=x1,L.result=t1,L.round=y_,L.runInContext=H,L.sample=Nm,L.size=Wm,L.snakeCase=T1,L.some=Um,L.sortedIndex=jv,L.sortedIndexBy=$v,L.sortedIndexOf=Wv,L.sortedLastIndex=Uv,L.sortedLastIndexBy=Gv,L.sortedLastIndexOf=zv,L.startCase=E1,L.startsWith=P1,L.subtract=C_,L.sum=b_,L.sumBy=w_,L.template=A1,L.times=s_,L.toFinite=Cn,L.toInteger=Fe,L.toLength=Ic,L.toLower=L1,L.toNumber=Vt,L.toSafeInteger=L0,L.toString=Ke,L.toUpper=D1,L.trim=M1,L.trimEnd=I1,L.trimStart=k1,L.truncate=F1,L.unescape=R1,L.uniqueId=o_,L.upperCase=B1,L.upperFirst=mo,L.each=yc,L.eachRight=Cc,L.first=pc,Co(L,function(){var e={};return nn(L,function(l,m){qe.call(L.prototype,m)||(e[m]=l)}),e}(),{chain:!1}),L.VERSION=C,Ut(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){L[e].placeholder=L}),Ut(["drop","take"],function(e,l){ze.prototype[e]=function(m){m=m===p?1:ft(Fe(m),0);var S=this.__filtered__&&!l?new ze(this):this.clone();return S.__filtered__?S.__takeCount__=Ct(m,S.__takeCount__):S.__views__.push({size:Ct(m,k),type:e+(S.__dir__<0?"Right":"")}),S},ze.prototype[e+"Right"]=function(m){return this.reverse()[e](m).reverse()}}),Ut(["filter","map","takeWhile"],function(e,l){var m=l+1,S=m==Z||m==pe;ze.prototype[e]=function(E){var M=this.clone();return M.__iteratees__.push({iteratee:Oe(E,3),type:m}),M.__filtered__=M.__filtered__||S,M}}),Ut(["head","last"],function(e,l){var m="take"+(l?"Right":"");ze.prototype[e]=function(){return this[m](1).value()[0]}}),Ut(["initial","tail"],function(e,l){var m="drop"+(l?"":"Right");ze.prototype[e]=function(){return this.__filtered__?new ze(this):this[m](1)}}),ze.prototype.compact=function(){return this.filter(Dt)},ze.prototype.find=function(e){return this.filter(e).head()},ze.prototype.findLast=function(e){return this.reverse().find(e)},ze.prototype.invokeMap=$e(function(e,l){return typeof e=="function"?new ze(this):this.map(function(m){return hr(m,e,l)})}),ze.prototype.reject=function(e){return this.filter(ws(Oe(e)))},ze.prototype.slice=function(e,l){e=Fe(e);var m=this;return m.__filtered__&&(e>0||l<0)?new ze(m):(e<0?m=m.takeRight(-e):e&&(m=m.drop(e)),l!==p&&(l=Fe(l),m=l<0?m.dropRight(-l):m.take(l-e)),m)},ze.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ze.prototype.toArray=function(){return this.take(k)},nn(ze.prototype,function(e,l){var m=/^(?:filter|find|map|reject)|While$/.test(l),S=/^(?:head|last)$/.test(l),E=L[S?"take"+(l=="last"?"Right":""):l],M=S||/^find/.test(l);!E||(L.prototype[l]=function(){var N=this.__wrapped__,W=S?[1]:arguments,V=N instanceof ze,ce=W[0],he=V||ke(N),ge=function(Ge){var He=E.apply(L,An([Ge],W));return S&&ye?He[0]:He};he&&m&&typeof ce=="function"&&ce.length!=1&&(V=he=!1);var ye=this.__chain__,Te=!!this.__actions__.length,Pe=M&&!ye,Ne=V&&!Te;if(!M&&he){N=Ne?N:new ze(this);var Ae=e.apply(N,W);return Ae.__actions__.push({func:_s,args:[ge],thisArg:p}),new zt(Ae,ye)}return Pe&&Ne?e.apply(this,W):(Ae=this.thru(ge),Pe?S?Ae.value()[0]:Ae.value():Ae)})}),Ut(["pop","push","shift","sort","splice","unshift"],function(e){var l=zr[e],m=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",S=/^(?:pop|shift)$/.test(e);L.prototype[e]=function(){var E=arguments;if(S&&!this.__chain__){var M=this.value();return l.apply(ke(M)?M:[],E)}return this[m](function(N){return l.apply(ke(N)?N:[],E)})}}),nn(ze.prototype,function(e,l){var m=L[l];if(m){var S=m.name+"";qe.call(Ci,S)||(Ci[S]=[]),Ci[S].push({name:l,func:m})}}),Ci[hs(p,g).name]=[{name:"wrapper",func:p}],ze.prototype.clone=Rg,ze.prototype.reverse=Bg,ze.prototype.value=Ng,L.prototype.at=dm,L.prototype.chain=gm,L.prototype.commit=pm,L.prototype.next=vm,L.prototype.plant=_m,L.prototype.reverse=ym,L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=Cm,L.prototype.first=L.prototype.head,rr&&(L.prototype[rr]=mm),L},mi=pg();Hn?((Hn.exports=mi)._=mi,_a._=mi):vt._=mi}).call(_r)})(Dr,Dr.exports);const tn=f=>{const[t,p]=Xy(f),C={get(b,w){let x=Reflect.get(b,w);return typeof x!="object"||Array.isArray(x)||!x||(x.__path__?this.__path__.push(w):x=new Proxy(x,{__path__:[...this.__path__||[],w],...C})),x},set(b,w,x){return p(Vy(h=>{let i=[...this.__path__||[],w].join(".");Dr.exports.set(h,i,x)})),!0}};return new Proxy(t,C)},Cf=(f,t,p=window,C=!1)=>{St(()=>{!p||(p.addEventListener(f,t,{passive:!0}),C&&t())}),hi(()=>{!p||p.removeEventListener(f,t)})};const xh=je("<div></div>"),Ky=je('<div class="layout"><div class="overlay"><div class="preview"><div class="container"></div></div><div class="form"><div class="clipping-mask"></div><div class="shadow"></div></div></div><div class="content"><div class="preview"></div><div class="form"><div class="form-container"></div></div></div></div>'),qy=f=>{const t=tn({headerGradient:!1,footerGradient:!1}),p=()=>{let C=window.scrollY,b=document.body.scrollHeight-window.innerHeight,w=window.innerHeight!=b;t.headerGradient=w&&C>0,t.footerGradient=w&&C<b};return St(()=>{$y(document.body,({width:C,height:b},w)=>{p()})}),Cf("scroll",()=>{p()},window,!0),[(()=>{const C=xh.cloneNode(!0);return st(()=>gt(C,pt("shadow-gradient-header",{":active":t.headerGradient}))),C})(),(()=>{const C=xh.cloneNode(!0);return st(()=>gt(C,pt("shadow-gradient-footer",{":active":t.footerGradient}))),C})()]},Jy=f=>{const t=tn({clippingPath:""}),p={overlayForm:void 0},C=()=>{if(!p.overlayForm?.offsetWidth||!p.overlayForm?.offsetHeight)return;const w=p.overlayForm.offsetWidth,x=p.overlayForm.offsetHeight,h=2,i=16,c=48;t.clippingPath=`M${-h},${-h}L${w+h},${-h}L${w+h},${x+h}L${-h},${x+h}zM0,${c+i}L0,${x-(c+i)}Q0,${x-c} ${i},${x-c}L${w-i},${x-c}Q${w},${x-c} ${w},${x-(c+i)}L${w},${c+i}Q${w},${c} ${w-i},${c}L${i},${c}Q0,${c} 0,${c+i}z`},b=w=>{for(let x=0;x<f.children.length;x++){let h=f.children[x];if(h.key==w)return h()}};return St(()=>{C()}),Cf("resize",()=>{C()},window,!0),(()=>{const w=Ky.cloneNode(!0),x=w.firstChild,h=x.firstChild,i=h.firstChild,c=h.nextSibling,u=c.firstChild,r=x.nextSibling,s=r.firstChild,n=s.nextSibling,o=n.firstChild;return Re(i,()=>b("preview")),yt(d=>{p.overlayForm=d},c),Re(n,we(qy,{}),o),Re(o,()=>b("form")),st(d=>si(u,`clip-path: path('${t.clippingPath}');`,d)),w})()},Zy=f=>Object.assign(()=>f.children,{key:"preview"}),Qy=f=>Object.assign(()=>f.children,{key:"form"}),Ao=Object.assign(Jy,{Preview:Zy,Form:Qy});var eC=(f,t)=>{let p;const C=()=>clearTimeout(p);return Nh()&&hi(C),Object.assign((...w)=>{p!==void 0&&C(),p=setTimeout(()=>f(...w),t)},{clear:C})},bf=(f,t)=>{let p=!1,C,b;const w=(...h)=>{b=h,!p&&(p=!0,C=setTimeout(()=>{f(...b),p=!1},t))},x=()=>{clearTimeout(C),p=!1};return Nh()&&hi(x),Object.assign(w,{clear:x})},Hi={},tC=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},wf={},$t={};let hl;const nC=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];$t.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};$t.getSymbolTotalCodewords=function(t){return nC[t]};$t.getBCHDigit=function(f){let t=0;for(;f!==0;)t++,f>>>=1;return t};$t.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');hl=t};$t.isKanjiModeEnabled=function(){return typeof hl<"u"};$t.toSJIS=function(t){return hl(t)};var aa={};(function(f){f.L={bit:1},f.M={bit:0},f.Q={bit:3},f.H={bit:2};function t(p){if(typeof p!="string")throw new Error("Param is not a string");switch(p.toLowerCase()){case"l":case"low":return f.L;case"m":case"medium":return f.M;case"q":case"quartile":return f.Q;case"h":case"high":return f.H;default:throw new Error("Unknown EC Level: "+p)}}f.isValid=function(C){return C&&typeof C.bit<"u"&&C.bit>=0&&C.bit<4},f.from=function(C,b){if(f.isValid(C))return C;try{return t(C)}catch{return b}}})(aa);function Sf(){this.buffer=[],this.length=0}Sf.prototype={get:function(f){const t=Math.floor(f/8);return(this.buffer[t]>>>7-f%8&1)===1},put:function(f,t){for(let p=0;p<t;p++)this.putBit((f>>>t-p-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(f){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),f&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var iC=Sf;function Br(f){if(!f||f<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=f,this.data=new Uint8Array(f*f),this.reservedBit=new Uint8Array(f*f)}Br.prototype.set=function(f,t,p,C){const b=f*this.size+t;this.data[b]=p,C&&(this.reservedBit[b]=!0)};Br.prototype.get=function(f,t){return this.data[f*this.size+t]};Br.prototype.xor=function(f,t,p){this.data[f*this.size+t]^=p};Br.prototype.isReserved=function(f,t){return this.reservedBit[f*this.size+t]};var rC=Br,xf={};(function(f){const t=$t.getSymbolSize;f.getRowColCoords=function(C){if(C===1)return[];const b=Math.floor(C/7)+2,w=t(C),x=w===145?26:Math.ceil((w-13)/(2*b-2))*2,h=[w-7];for(let i=1;i<b-1;i++)h[i]=h[i-1]-x;return h.push(6),h.reverse()},f.getPositions=function(C){const b=[],w=f.getRowColCoords(C),x=w.length;for(let h=0;h<x;h++)for(let i=0;i<x;i++)h===0&&i===0||h===0&&i===x-1||h===x-1&&i===0||b.push([w[h],w[i]]);return b}})(xf);var Tf={};const sC=$t.getSymbolSize,Th=7;Tf.getPositions=function(t){const p=sC(t);return[[0,0],[p-Th,0],[0,p-Th]]};var Of={};(function(f){f.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};f.isValid=function(b){return b!=null&&b!==""&&!isNaN(b)&&b>=0&&b<=7},f.from=function(b){return f.isValid(b)?parseInt(b,10):void 0},f.getPenaltyN1=function(b){const w=b.size;let x=0,h=0,i=0,c=null,u=null;for(let r=0;r<w;r++){h=i=0,c=u=null;for(let s=0;s<w;s++){let n=b.get(r,s);n===c?h++:(h>=5&&(x+=t.N1+(h-5)),c=n,h=1),n=b.get(s,r),n===u?i++:(i>=5&&(x+=t.N1+(i-5)),u=n,i=1)}h>=5&&(x+=t.N1+(h-5)),i>=5&&(x+=t.N1+(i-5))}return x},f.getPenaltyN2=function(b){const w=b.size;let x=0;for(let h=0;h<w-1;h++)for(let i=0;i<w-1;i++){const c=b.get(h,i)+b.get(h,i+1)+b.get(h+1,i)+b.get(h+1,i+1);(c===4||c===0)&&x++}return x*t.N2},f.getPenaltyN3=function(b){const w=b.size;let x=0,h=0,i=0;for(let c=0;c<w;c++){h=i=0;for(let u=0;u<w;u++)h=h<<1&2047|b.get(c,u),u>=10&&(h===1488||h===93)&&x++,i=i<<1&2047|b.get(u,c),u>=10&&(i===1488||i===93)&&x++}return x*t.N3},f.getPenaltyN4=function(b){let w=0;const x=b.data.length;for(let i=0;i<x;i++)w+=b.data[i];return Math.abs(Math.ceil(w*100/x/5)-10)*t.N4};function p(C,b,w){switch(C){case f.Patterns.PATTERN000:return(b+w)%2===0;case f.Patterns.PATTERN001:return b%2===0;case f.Patterns.PATTERN010:return w%3===0;case f.Patterns.PATTERN011:return(b+w)%3===0;case f.Patterns.PATTERN100:return(Math.floor(b/2)+Math.floor(w/3))%2===0;case f.Patterns.PATTERN101:return b*w%2+b*w%3===0;case f.Patterns.PATTERN110:return(b*w%2+b*w%3)%2===0;case f.Patterns.PATTERN111:return(b*w%3+(b+w)%2)%2===0;default:throw new Error("bad maskPattern:"+C)}}f.applyMask=function(b,w){const x=w.size;for(let h=0;h<x;h++)for(let i=0;i<x;i++)w.isReserved(i,h)||w.xor(i,h,p(b,i,h))},f.getBestMask=function(b,w){const x=Object.keys(f.Patterns).length;let h=0,i=1/0;for(let c=0;c<x;c++){w(c),f.applyMask(c,b);const u=f.getPenaltyN1(b)+f.getPenaltyN2(b)+f.getPenaltyN3(b)+f.getPenaltyN4(b);f.applyMask(c,b),u<i&&(i=u,h=c)}return h}})(Of);var oa={};const $n=aa,Ms=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Is=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];oa.getBlocksCount=function(t,p){switch(p){case $n.L:return Ms[(t-1)*4+0];case $n.M:return Ms[(t-1)*4+1];case $n.Q:return Ms[(t-1)*4+2];case $n.H:return Ms[(t-1)*4+3];default:return}};oa.getTotalCodewordsCount=function(t,p){switch(p){case $n.L:return Is[(t-1)*4+0];case $n.M:return Is[(t-1)*4+1];case $n.Q:return Is[(t-1)*4+2];case $n.H:return Is[(t-1)*4+3];default:return}};var Ef={},la={};const Pr=new Uint8Array(512),Js=new Uint8Array(256);(function(){let t=1;for(let p=0;p<255;p++)Pr[p]=t,Js[t]=p,t<<=1,t&256&&(t^=285);for(let p=255;p<512;p++)Pr[p]=Pr[p-255]})();la.log=function(t){if(t<1)throw new Error("log("+t+")");return Js[t]};la.exp=function(t){return Pr[t]};la.mul=function(t,p){return t===0||p===0?0:Pr[Js[t]+Js[p]]};(function(f){const t=la;f.mul=function(C,b){const w=new Uint8Array(C.length+b.length-1);for(let x=0;x<C.length;x++)for(let h=0;h<b.length;h++)w[x+h]^=t.mul(C[x],b[h]);return w},f.mod=function(C,b){let w=new Uint8Array(C);for(;w.length-b.length>=0;){const x=w[0];for(let i=0;i<b.length;i++)w[i]^=t.mul(b[i],x);let h=0;for(;h<w.length&&w[h]===0;)h++;w=w.slice(h)}return w},f.generateECPolynomial=function(C){let b=new Uint8Array([1]);for(let w=0;w<C;w++)b=f.mul(b,new Uint8Array([1,t.exp(w)]));return b}})(Ef);const Pf=Ef;function fl(f){this.genPoly=void 0,this.degree=f,this.degree&&this.initialize(this.degree)}fl.prototype.initialize=function(t){this.degree=t,this.genPoly=Pf.generateECPolynomial(this.degree)};fl.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const p=new Uint8Array(t.length+this.degree);p.set(t);const C=Pf.mod(p,this.genPoly),b=this.degree-C.length;if(b>0){const w=new Uint8Array(this.degree);return w.set(C,b),w}return C};var aC=fl,Af={},Yn={},dl={};dl.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var hn={};const Lf="[0-9]+",oC="[A-Z $%*+\\-./:]+";let Mr="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Mr=Mr.replace(/u/g,"\\u");const lC="(?:(?![A-Z0-9 $%*+\\-./:]|"+Mr+`)(?:.|[\r
]))+`;hn.KANJI=new RegExp(Mr,"g");hn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");hn.BYTE=new RegExp(lC,"g");hn.NUMERIC=new RegExp(Lf,"g");hn.ALPHANUMERIC=new RegExp(oC,"g");const uC=new RegExp("^"+Mr+"$"),cC=new RegExp("^"+Lf+"$"),hC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");hn.testKanji=function(t){return uC.test(t)};hn.testNumeric=function(t){return cC.test(t)};hn.testAlphanumeric=function(t){return hC.test(t)};(function(f){const t=dl,p=hn;f.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},f.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},f.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},f.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},f.MIXED={bit:-1},f.getCharCountIndicator=function(w,x){if(!w.ccBits)throw new Error("Invalid mode: "+w);if(!t.isValid(x))throw new Error("Invalid version: "+x);return x>=1&&x<10?w.ccBits[0]:x<27?w.ccBits[1]:w.ccBits[2]},f.getBestModeForData=function(w){return p.testNumeric(w)?f.NUMERIC:p.testAlphanumeric(w)?f.ALPHANUMERIC:p.testKanji(w)?f.KANJI:f.BYTE},f.toString=function(w){if(w&&w.id)return w.id;throw new Error("Invalid mode")},f.isValid=function(w){return w&&w.bit&&w.ccBits};function C(b){if(typeof b!="string")throw new Error("Param is not a string");switch(b.toLowerCase()){case"numeric":return f.NUMERIC;case"alphanumeric":return f.ALPHANUMERIC;case"kanji":return f.KANJI;case"byte":return f.BYTE;default:throw new Error("Unknown mode: "+b)}}f.from=function(w,x){if(f.isValid(w))return w;try{return C(w)}catch{return x}}})(Yn);(function(f){const t=$t,p=oa,C=aa,b=Yn,w=dl,x=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,h=t.getBCHDigit(x);function i(s,n,o){for(let d=1;d<=40;d++)if(n<=f.getCapacity(d,o,s))return d}function c(s,n){return b.getCharCountIndicator(s,n)+4}function u(s,n){let o=0;return s.forEach(function(d){const a=c(d.mode,n);o+=a+d.getBitsLength()}),o}function r(s,n){for(let o=1;o<=40;o++)if(u(s,o)<=f.getCapacity(o,n,b.MIXED))return o}f.from=function(n,o){return w.isValid(n)?parseInt(n,10):o},f.getCapacity=function(n,o,d){if(!w.isValid(n))throw new Error("Invalid QR Code version");typeof d>"u"&&(d=b.BYTE);const a=t.getSymbolTotalCodewords(n),g=p.getTotalCodewordsCount(n,o),v=(a-g)*8;if(d===b.MIXED)return v;const _=v-c(d,n);switch(d){case b.NUMERIC:return Math.floor(_/10*3);case b.ALPHANUMERIC:return Math.floor(_/11*2);case b.KANJI:return Math.floor(_/13);case b.BYTE:default:return Math.floor(_/8)}},f.getBestVersionForData=function(n,o){let d;const a=C.from(o,C.M);if(Array.isArray(n)){if(n.length>1)return r(n,a);if(n.length===0)return 1;d=n[0]}else d=n;return i(d.mode,d.getLength(),a)},f.getEncodedBits=function(n){if(!w.isValid(n)||n<7)throw new Error("Invalid QR Code version");let o=n<<12;for(;t.getBCHDigit(o)-h>=0;)o^=x<<t.getBCHDigit(o)-h;return n<<12|o}})(Af);var Df={};const Yo=$t,Mf=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,fC=1<<14|1<<12|1<<10|1<<4|1<<1,Oh=Yo.getBCHDigit(Mf);Df.getEncodedBits=function(t,p){const C=t.bit<<3|p;let b=C<<10;for(;Yo.getBCHDigit(b)-Oh>=0;)b^=Mf<<Yo.getBCHDigit(b)-Oh;return(C<<10|b)^fC};var If={};const dC=Yn;function Xi(f){this.mode=dC.NUMERIC,this.data=f.toString()}Xi.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Xi.prototype.getLength=function(){return this.data.length};Xi.prototype.getBitsLength=function(){return Xi.getBitsLength(this.data.length)};Xi.prototype.write=function(t){let p,C,b;for(p=0;p+3<=this.data.length;p+=3)C=this.data.substr(p,3),b=parseInt(C,10),t.put(b,10);const w=this.data.length-p;w>0&&(C=this.data.substr(p),b=parseInt(C,10),t.put(b,w*3+1))};var gC=Xi;const pC=Yn,Lo=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Vi(f){this.mode=pC.ALPHANUMERIC,this.data=f}Vi.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Vi.prototype.getLength=function(){return this.data.length};Vi.prototype.getBitsLength=function(){return Vi.getBitsLength(this.data.length)};Vi.prototype.write=function(t){let p;for(p=0;p+2<=this.data.length;p+=2){let C=Lo.indexOf(this.data[p])*45;C+=Lo.indexOf(this.data[p+1]),t.put(C,11)}this.data.length%2&&t.put(Lo.indexOf(this.data[p]),6)};var vC=Vi,mC=function(t){for(var p=[],C=t.length,b=0;b<C;b++){var w=t.charCodeAt(b);if(w>=55296&&w<=56319&&C>b+1){var x=t.charCodeAt(b+1);x>=56320&&x<=57343&&(w=(w-55296)*1024+x-56320+65536,b+=1)}if(w<128){p.push(w);continue}if(w<2048){p.push(w>>6|192),p.push(w&63|128);continue}if(w<55296||w>=57344&&w<65536){p.push(w>>12|224),p.push(w>>6&63|128),p.push(w&63|128);continue}if(w>=65536&&w<=1114111){p.push(w>>18|240),p.push(w>>12&63|128),p.push(w>>6&63|128),p.push(w&63|128);continue}p.push(239,191,189)}return new Uint8Array(p).buffer};const _C=mC,yC=Yn;function Ki(f){this.mode=yC.BYTE,typeof f=="string"&&(f=_C(f)),this.data=new Uint8Array(f)}Ki.getBitsLength=function(t){return t*8};Ki.prototype.getLength=function(){return this.data.length};Ki.prototype.getBitsLength=function(){return Ki.getBitsLength(this.data.length)};Ki.prototype.write=function(f){for(let t=0,p=this.data.length;t<p;t++)f.put(this.data[t],8)};var CC=Ki;const bC=Yn,wC=$t;function qi(f){this.mode=bC.KANJI,this.data=f}qi.getBitsLength=function(t){return t*13};qi.prototype.getLength=function(){return this.data.length};qi.prototype.getBitsLength=function(){return qi.getBitsLength(this.data.length)};qi.prototype.write=function(f){let t;for(t=0;t<this.data.length;t++){let p=wC.toSJIS(this.data[t]);if(p>=33088&&p<=40956)p-=33088;else if(p>=57408&&p<=60351)p-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);p=(p>>>8&255)*192+(p&255),f.put(p,13)}};var SC=qi,kf={exports:{}};(function(f){var t={single_source_shortest_paths:function(p,C,b){var w={},x={};x[C]=0;var h=t.PriorityQueue.make();h.push(C,0);for(var i,c,u,r,s,n,o,d,a;!h.empty();){i=h.pop(),c=i.value,r=i.cost,s=p[c]||{};for(u in s)s.hasOwnProperty(u)&&(n=s[u],o=r+n,d=x[u],a=typeof x[u]>"u",(a||d>o)&&(x[u]=o,h.push(u,o),w[u]=c))}if(typeof b<"u"&&typeof x[b]>"u"){var g=["Could not find a path from ",C," to ",b,"."].join("");throw new Error(g)}return w},extract_shortest_path_from_predecessor_list:function(p,C){for(var b=[],w=C;w;)b.push(w),p[w],w=p[w];return b.reverse(),b},find_path:function(p,C,b){var w=t.single_source_shortest_paths(p,C,b);return t.extract_shortest_path_from_predecessor_list(w,b)},PriorityQueue:{make:function(p){var C=t.PriorityQueue,b={},w;p=p||{};for(w in C)C.hasOwnProperty(w)&&(b[w]=C[w]);return b.queue=[],b.sorter=p.sorter||C.default_sorter,b},default_sorter:function(p,C){return p.cost-C.cost},push:function(p,C){var b={value:p,cost:C};this.queue.push(b),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};f.exports=t})(kf);(function(f){const t=Yn,p=gC,C=vC,b=CC,w=SC,x=hn,h=$t,i=kf.exports;function c(g){return unescape(encodeURIComponent(g)).length}function u(g,v,_){const y=[];let T;for(;(T=g.exec(_))!==null;)y.push({data:T[0],index:T.index,mode:v,length:T[0].length});return y}function r(g){const v=u(x.NUMERIC,t.NUMERIC,g),_=u(x.ALPHANUMERIC,t.ALPHANUMERIC,g);let y,T;return h.isKanjiModeEnabled()?(y=u(x.BYTE,t.BYTE,g),T=u(x.KANJI,t.KANJI,g)):(y=u(x.BYTE_KANJI,t.BYTE,g),T=[]),v.concat(_,y,T).sort(function(D,B){return D.index-B.index}).map(function(D){return{data:D.data,mode:D.mode,length:D.length}})}function s(g,v){switch(v){case t.NUMERIC:return p.getBitsLength(g);case t.ALPHANUMERIC:return C.getBitsLength(g);case t.KANJI:return w.getBitsLength(g);case t.BYTE:return b.getBitsLength(g)}}function n(g){return g.reduce(function(v,_){const y=v.length-1>=0?v[v.length-1]:null;return y&&y.mode===_.mode?(v[v.length-1].data+=_.data,v):(v.push(_),v)},[])}function o(g){const v=[];for(let _=0;_<g.length;_++){const y=g[_];switch(y.mode){case t.NUMERIC:v.push([y,{data:y.data,mode:t.ALPHANUMERIC,length:y.length},{data:y.data,mode:t.BYTE,length:y.length}]);break;case t.ALPHANUMERIC:v.push([y,{data:y.data,mode:t.BYTE,length:y.length}]);break;case t.KANJI:v.push([y,{data:y.data,mode:t.BYTE,length:c(y.data)}]);break;case t.BYTE:v.push([{data:y.data,mode:t.BYTE,length:c(y.data)}])}}return v}function d(g,v){const _={},y={start:{}};let T=["start"];for(let P=0;P<g.length;P++){const D=g[P],B=[];for(let j=0;j<D.length;j++){const z=D[j],ee=""+P+j;B.push(ee),_[ee]={node:z,lastCount:0},y[ee]={};for(let ne=0;ne<T.length;ne++){const ie=T[ne];_[ie]&&_[ie].node.mode===z.mode?(y[ie][ee]=s(_[ie].lastCount+z.length,z.mode)-s(_[ie].lastCount,z.mode),_[ie].lastCount+=z.length):(_[ie]&&(_[ie].lastCount=z.length),y[ie][ee]=s(z.length,z.mode)+4+t.getCharCountIndicator(z.mode,v))}}T=B}for(let P=0;P<T.length;P++)y[T[P]].end=0;return{map:y,table:_}}function a(g,v){let _;const y=t.getBestModeForData(g);if(_=t.from(v,y),_!==t.BYTE&&_.bit<y.bit)throw new Error('"'+g+'" cannot be encoded with mode '+t.toString(_)+`.
 Suggested mode is: `+t.toString(y));switch(_===t.KANJI&&!h.isKanjiModeEnabled()&&(_=t.BYTE),_){case t.NUMERIC:return new p(g);case t.ALPHANUMERIC:return new C(g);case t.KANJI:return new w(g);case t.BYTE:return new b(g)}}f.fromArray=function(v){return v.reduce(function(_,y){return typeof y=="string"?_.push(a(y,null)):y.data&&_.push(a(y.data,y.mode)),_},[])},f.fromString=function(v,_){const y=r(v,h.isKanjiModeEnabled()),T=o(y),P=d(T,_),D=i.find_path(P.map,"start","end"),B=[];for(let j=1;j<D.length-1;j++)B.push(P.table[D[j]].node);return f.fromArray(n(B))},f.rawSplit=function(v){return f.fromArray(r(v,h.isKanjiModeEnabled()))}})(If);const ua=$t,Do=aa,xC=iC,TC=rC,OC=xf,EC=Tf,Ho=Of,Xo=oa,PC=aC,Zs=Af,AC=Df,LC=Yn,Mo=If;function DC(f,t){const p=f.size,C=EC.getPositions(t);for(let b=0;b<C.length;b++){const w=C[b][0],x=C[b][1];for(let h=-1;h<=7;h++)if(!(w+h<=-1||p<=w+h))for(let i=-1;i<=7;i++)x+i<=-1||p<=x+i||(h>=0&&h<=6&&(i===0||i===6)||i>=0&&i<=6&&(h===0||h===6)||h>=2&&h<=4&&i>=2&&i<=4?f.set(w+h,x+i,!0,!0):f.set(w+h,x+i,!1,!0))}}function MC(f){const t=f.size;for(let p=8;p<t-8;p++){const C=p%2===0;f.set(p,6,C,!0),f.set(6,p,C,!0)}}function IC(f,t){const p=OC.getPositions(t);for(let C=0;C<p.length;C++){const b=p[C][0],w=p[C][1];for(let x=-2;x<=2;x++)for(let h=-2;h<=2;h++)x===-2||x===2||h===-2||h===2||x===0&&h===0?f.set(b+x,w+h,!0,!0):f.set(b+x,w+h,!1,!0)}}function kC(f,t){const p=f.size,C=Zs.getEncodedBits(t);let b,w,x;for(let h=0;h<18;h++)b=Math.floor(h/3),w=h%3+p-8-3,x=(C>>h&1)===1,f.set(b,w,x,!0),f.set(w,b,x,!0)}function Io(f,t,p){const C=f.size,b=AC.getEncodedBits(t,p);let w,x;for(w=0;w<15;w++)x=(b>>w&1)===1,w<6?f.set(w,8,x,!0):w<8?f.set(w+1,8,x,!0):f.set(C-15+w,8,x,!0),w<8?f.set(8,C-w-1,x,!0):w<9?f.set(8,15-w-1+1,x,!0):f.set(8,15-w-1,x,!0);f.set(C-8,8,1,!0)}function FC(f,t){const p=f.size;let C=-1,b=p-1,w=7,x=0;for(let h=p-1;h>0;h-=2)for(h===6&&h--;;){for(let i=0;i<2;i++)if(!f.isReserved(b,h-i)){let c=!1;x<t.length&&(c=(t[x]>>>w&1)===1),f.set(b,h-i,c),w--,w===-1&&(x++,w=7)}if(b+=C,b<0||p<=b){b-=C,C=-C;break}}}function RC(f,t,p){const C=new xC;p.forEach(function(i){C.put(i.mode.bit,4),C.put(i.getLength(),LC.getCharCountIndicator(i.mode,f)),i.write(C)});const b=ua.getSymbolTotalCodewords(f),w=Xo.getTotalCodewordsCount(f,t),x=(b-w)*8;for(C.getLengthInBits()+4<=x&&C.put(0,4);C.getLengthInBits()%8!==0;)C.putBit(0);const h=(x-C.getLengthInBits())/8;for(let i=0;i<h;i++)C.put(i%2?17:236,8);return BC(C,f,t)}function BC(f,t,p){const C=ua.getSymbolTotalCodewords(t),b=Xo.getTotalCodewordsCount(t,p),w=C-b,x=Xo.getBlocksCount(t,p),h=C%x,i=x-h,c=Math.floor(C/x),u=Math.floor(w/x),r=u+1,s=c-u,n=new PC(s);let o=0;const d=new Array(x),a=new Array(x);let g=0;const v=new Uint8Array(f.buffer);for(let D=0;D<x;D++){const B=D<i?u:r;d[D]=v.slice(o,o+B),a[D]=n.encode(d[D]),o+=B,g=Math.max(g,B)}const _=new Uint8Array(C);let y=0,T,P;for(T=0;T<g;T++)for(P=0;P<x;P++)T<d[P].length&&(_[y++]=d[P][T]);for(T=0;T<s;T++)for(P=0;P<x;P++)_[y++]=a[P][T];return _}function NC(f,t,p,C){let b;if(Array.isArray(f))b=Mo.fromArray(f);else if(typeof f=="string"){let c=t;if(!c){const u=Mo.rawSplit(f);c=Zs.getBestVersionForData(u,p)}b=Mo.fromString(f,c||40)}else throw new Error("Invalid data");const w=Zs.getBestVersionForData(b,p);if(!w)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=w;else if(t<w)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+w+`.
`);const x=RC(t,p,b),h=ua.getSymbolSize(t),i=new TC(h);return DC(i,t),MC(i),IC(i,t),Io(i,p,0),t>=7&&kC(i,t),FC(i,x),isNaN(C)&&(C=Ho.getBestMask(i,Io.bind(null,i,p))),Ho.applyMask(C,i),Io(i,p,C),{modules:i,version:t,errorCorrectionLevel:p,maskPattern:C,segments:b}}wf.create=function(t,p){if(typeof t>"u"||t==="")throw new Error("No input text");let C=Do.M,b,w;return typeof p<"u"&&(C=Do.from(p.errorCorrectionLevel,Do.M),b=Zs.from(p.version),w=Ho.from(p.maskPattern),p.toSJISFunc&&ua.setToSJISFunction(p.toSJISFunc)),NC(t,b,C,w)};var Ff={},gl={};(function(f){function t(p){if(typeof p=="number"&&(p=p.toString()),typeof p!="string")throw new Error("Color should be defined as hex string");let C=p.slice().replace("#","").split("");if(C.length<3||C.length===5||C.length>8)throw new Error("Invalid hex color: "+p);(C.length===3||C.length===4)&&(C=Array.prototype.concat.apply([],C.map(function(w){return[w,w]}))),C.length===6&&C.push("F","F");const b=parseInt(C.join(""),16);return{r:b>>24&255,g:b>>16&255,b:b>>8&255,a:b&255,hex:"#"+C.slice(0,6).join("")}}f.getOptions=function(C){C||(C={}),C.color||(C.color={});const b=typeof C.margin>"u"||C.margin===null||C.margin<0?4:C.margin,w=C.width&&C.width>=21?C.width:void 0,x=C.scale||4;return{width:w,scale:w?4:x,margin:b,color:{dark:t(C.color.dark||"#000000ff"),light:t(C.color.light||"#ffffffff")},type:C.type,rendererOpts:C.rendererOpts||{}}},f.getScale=function(C,b){return b.width&&b.width>=C+b.margin*2?b.width/(C+b.margin*2):b.scale},f.getImageWidth=function(C,b){const w=f.getScale(C,b);return Math.floor((C+b.margin*2)*w)},f.qrToImageData=function(C,b,w){const x=b.modules.size,h=b.modules.data,i=f.getScale(x,w),c=Math.floor((x+w.margin*2)*i),u=w.margin*i,r=[w.color.light,w.color.dark];for(let s=0;s<c;s++)for(let n=0;n<c;n++){let o=(s*c+n)*4,d=w.color.light;if(s>=u&&n>=u&&s<c-u&&n<c-u){const a=Math.floor((s-u)/i),g=Math.floor((n-u)/i);d=r[h[a*x+g]?1:0]}C[o++]=d.r,C[o++]=d.g,C[o++]=d.b,C[o]=d.a}}})(gl);(function(f){const t=gl;function p(b,w,x){b.clearRect(0,0,w.width,w.height),w.style||(w.style={}),w.height=x,w.width=x,w.style.height=x+"px",w.style.width=x+"px"}function C(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}f.render=function(w,x,h){let i=h,c=x;typeof i>"u"&&(!x||!x.getContext)&&(i=x,x=void 0),x||(c=C()),i=t.getOptions(i);const u=t.getImageWidth(w.modules.size,i),r=c.getContext("2d"),s=r.createImageData(u,u);return t.qrToImageData(s.data,w,i),p(r,c,u),r.putImageData(s,0,0),c},f.renderToDataURL=function(w,x,h){let i=h;typeof i>"u"&&(!x||!x.getContext)&&(i=x,x=void 0),i||(i={});const c=f.render(w,x,i),u=i.type||"image/png",r=i.rendererOpts||{};return c.toDataURL(u,r.quality)}})(Ff);var Rf={};const jC=gl;function Eh(f,t){const p=f.a/255,C=t+'="'+f.hex+'"';return p<1?C+" "+t+'-opacity="'+p.toFixed(2).slice(1)+'"':C}function ko(f,t,p){let C=f+t;return typeof p<"u"&&(C+=" "+p),C}function $C(f,t,p){let C="",b=0,w=!1,x=0;for(let h=0;h<f.length;h++){const i=Math.floor(h%t),c=Math.floor(h/t);!i&&!w&&(w=!0),f[h]?(x++,h>0&&i>0&&f[h-1]||(C+=w?ko("M",i+p,.5+c+p):ko("m",b,0),b=0,w=!1),i+1<t&&f[h+1]||(C+=ko("h",x),x=0)):b++}return C}Rf.render=function(t,p,C){const b=jC.getOptions(p),w=t.modules.size,x=t.modules.data,h=w+b.margin*2,i=b.color.light.a?"<path "+Eh(b.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",c="<path "+Eh(b.color.dark,"stroke")+' d="'+$C(x,w,b.margin)+'"/>',u='viewBox="0 0 '+h+" "+h+'"',s='<svg xmlns="http://www.w3.org/2000/svg" '+(b.width?'width="'+b.width+'" height="'+b.width+'" ':"")+u+' shape-rendering="crispEdges">'+i+c+`</svg>
`;return typeof C=="function"&&C(null,s),s};const WC=tC,Vo=wf,Bf=Ff,UC=Rf;function pl(f,t,p,C,b){const w=[].slice.call(arguments,1),x=w.length,h=typeof w[x-1]=="function";if(!h&&!WC())throw new Error("Callback required as last argument");if(h){if(x<2)throw new Error("Too few arguments provided");x===2?(b=p,p=t,t=C=void 0):x===3&&(t.getContext&&typeof b>"u"?(b=C,C=void 0):(b=C,C=p,p=t,t=void 0))}else{if(x<1)throw new Error("Too few arguments provided");return x===1?(p=t,t=C=void 0):x===2&&!t.getContext&&(C=p,p=t,t=void 0),new Promise(function(i,c){try{const u=Vo.create(p,C);i(f(u,t,C))}catch(u){c(u)}})}try{const i=Vo.create(p,C);b(null,f(i,t,C))}catch(i){b(i)}}Hi.create=Vo.create;Hi.toCanvas=pl.bind(null,Bf.render);Hi.toDataURL=pl.bind(null,Bf.renderToDataURL);Hi.toString=pl.bind(null,function(f,t,p){return UC.render(f,p)});const Xe=Ii(()=>({state:tn({contentType:"LINK",value:void 0,export:{size:1024,includeBackground:!0}})})),Ko=(f,t=1,p=0)=>Math.round((f+p)/t)*t-p,Ni=(f,t,p)=>p[0]+(f-t[0])*(p[1]-p[0])/(t[1]-t[0]),Ir=(f,t,p)=>Math.min(Math.max(f,t),p),Qs=(f,t)=>Math.abs(f-t),ks=f=>f==0?0:f/Math.abs(f),Fs=(f,t)=>f>=0&&t>=0?Math.max(f,t):Math.min(f,t),Fo=(f,t)=>(f%=t,f<0&&(f+=t),f),GC=(f,t,p)=>Ir(Ni(f,t,p),p[0],p[1]);Array.prototype.last=function(){return this[this.length-1]};const We=0,Ue=1,Rs=[[0,-1],[1,0],[0,1],[-1,0]],zC=[[-1,-1],[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0]],Ph=[[0,0],[1,0],[1,1],[0,1]],Sn=0,xn=2,Tn=1,Bn=3,yr=!1,Pi=7,YC=["L","M","Q","H"],Se=Ii(()=>{const f=tn({data:"",isGenerated:!1,margin:2,size:21,shapes:[],roundCorner:100,eyeRoundCorner:50,foregroundColor:[0,0,0],backgroundColor:[0,0,100]}),t=()=>{if(f.data=Xe.state.value,!f.data||f.data.length==0){f.isGenerated=!1;return}let b=Hi.create(f.data,{errorCorrectionLevel:"L"}).modules,w=1;for(;b.size<=21&&w<4;)b=Hi.create(f.data,{errorCorrectionLevel:YC[w]}).modules,w++;let x=b.size,h=b.data,i=x+f.margin*2,c=Array(i);for(let a=0;a<i;a++){c[a]=Array(i);for(let g=0;g<i;g++){let v=g-f.margin,_=a-f.margin;c[a][g]={groupIndex:void 0},c[a][g].data=v<0||_<0||v>=x||_>=x?0:h[_*x+v],c[a][g].type=v<0||_<0||v>=x||_>=x?0:v<Pi&&_<Pi||v>=x-Pi&&_<Pi||v<Pi&&_>=x-Pi?1:0}}let u=[],r=[],s=-1,n=[],o=!1;const d=a=>{if(c[a[Ue]][a[We]].groupIndex!=null)return!1;let g=c[a[Ue]][a[We]].data;for(r[s]||(r[s]={data:g,blocks:[]}),c[a[Ue]][a[We]].groupIndex=s,r[s].blocks.push([a[We],a[Ue]]),o=!0,g?zC.forEach(v=>{let _=a[We]+v[We],y=a[Ue]+v[Ue];_<0||y<0||_>=i||y>=i||!c[y][_].data||n.push([_,y])}):Rs.forEach(v=>{let _=a[We]+v[We],y=a[Ue]+v[Ue];_<0||y<0||_>=i||y>=i||c[y][_].data||n.push([_,y])});n.length;)d(n.shift());return o};for(let a=0;a<i;a++)for(let g=0;g<i;g++)d([g,a]),o&&(s++,n=[],o=!1);for(let a=0;a<r.length;a++){let g=r[a],v=[],_=[],y=0,T=!1;for(;!T&&(y++,!(y>999999999));){if(v.length==0){if(g.data==yr){let ie=g.blocks[0][We],Z=g.blocks[0][Ue],re=ie+1,pe=Z;v.push([ie,Z]),_.push(void 0),v.push([re,pe]),_.push(1)}else for(let ie=0;ie<4;ie++){let Z=Rs[ie],re=g.blocks[0][We]+Z[We],pe=g.blocks[0][Ue]+Z[Ue];if(c[pe][re].groupIndex!=a){let G=g.blocks[0][We],O=g.blocks[0][Ue],I=Fo(ie+1,4),k=G+Ph[ie][We],R=O+Ph[ie][Ue],Y=k+Rs[I][We],F=R+Rs[I][Ue];v.push([k,R]),_.push(void 0),v.push([Y,F]),_.push(I);break}}continue}let B=v.last(),j=_.last(),z=[[0,-1],[0,0],[-1,0]],ee=[[0,-1],[1,0],[0,1]],ne=[Sn,Tn,xn];g.data==yr?j==Tn?(z=[[0,0],[0,-1],[-1,-1]],ee=[[0,1],[1,0],[0,-1]],ne=[xn,Tn,Sn]):j==xn?(z=[[-1,0],[0,0],[0,-1]],ee=[[-1,0],[0,1],[1,0]],ne=[Bn,xn,Tn]):j==Bn?(z=[[-1,-1],[-1,0],[0,0]],ee=[[0,-1],[-1,0],[0,1]],ne=[Sn,Bn,xn]):j==Sn&&(z=[[0,-1],[-1,-1],[-1,0]],ee=[[1,0],[0,-1],[-1,0]],ne=[Tn,Sn,Bn]):j==Tn?(z=[[0,-1],[0,0],[-1,0]],ee=[[0,-1],[1,0],[0,1]],ne=[Sn,Tn,xn]):j==xn?(z=[[0,0],[-1,0],[-1,-1]],ee=[[1,0],[0,1],[-1,0]],ne=[Tn,xn,Bn]):j==Bn?(z=[[-1,0],[-1,-1],[0,-1]],ee=[[0,1],[-1,0],[0,-1]],ne=[xn,Bn,Sn]):j==Sn&&(z=[[-1,-1],[0,-1],[0,0]],ee=[[-1,0],[0,-1],[1,0]],ne=[Bn,Sn,Tn]);for(let ie=0;ie<3;ie++){let Z=z[ie],re=B[We]+Z[We],pe=B[Ue]+Z[Ue],me=c[pe][re],G=!1;if(g.data==yr?G=me.groupIndex!=a:G=me.groupIndex==a,G){let O=B[We]+ee[ie][We],I=B[Ue]+ee[ie][Ue];if(j==ne[ie]&&v.pop(),O==v[0][We]&&I==v[0][Ue]){T=!0;break}v.push([O,I]),_.push(ne[ie]);break}}}if(v.length==0)continue;let P=(()=>{if(v.length!=4||g.data!=yr)return!1;let B=1/0,j=1/0,z=0,ee=0;for(let ne=0;ne<v.length;ne++)B=Math.min(B,v[ne][We]),j=Math.min(j,v[ne][Ue]),z=Math.max(z,v[ne][We]),ee=Math.max(ee,v[ne][Ue]);return Qs(B,z)==3&&Qs(j,ee)==3})();g.data==yr&&v.reverse();let D=c[g.blocks[0][Ue]][g.blocks[0][We]].type||P;u.push([v,D])}f.size=i,f.shapes=u},p=bf(t,50);return Mt(()=>{if(Xe.state.value,f.margin,!Xe.state.value)return t();p()}),{state:f,ganerateSVGPathCommand:({canvasSize:b=void 0}={})=>{let w=b?b/f.size:1,x="";for(let h=0;h<f.shapes.length;h++){let i=f.shapes[h][0],c=f.shapes[h][1],u=f.roundCorner/100||0,r=f.eyeRoundCorner/100||0;if(!c&&u==0||c&&u==0&&r==0)for(let s=0;s<i.length;s++)x+=s==0?"M":"L",x+=`${i[s][We]*w},${i[s][Ue]*w}`;else for(let s=0;s<i.length;s++){x+=s==0?"M":"L";let n=i[Fo(s-1,i.length)],o=i[s],d=i[Fo(s+1,i.length)],a=ks(n[We]-o[We]),g=ks(n[Ue]-o[Ue]),v=ks(d[We]-o[We]),_=ks(d[Ue]-o[Ue]),y=o[We],T=o[Ue],P=o[We],D=o[Ue],B=o[We],j=o[Ue];if(c){let z=Math.abs(n[We]-o[We])/2,ee=Math.abs(n[Ue]-o[Ue])/2,ne=Math.abs(d[We]-o[We])/2,ie=Math.abs(d[Ue]-o[Ue])/2;y=o[We]+a*Fs(u/2,z*r),T=o[Ue]+g*Fs(u/2,ee*r),B=o[We]+v*Fs(u/2,ne*r),j=o[Ue]+_*Fs(u/2,ie*r)}else y=o[We]+a*u/2,T=o[Ue]+g*u/2,B=o[We]+v*u/2,j=o[Ue]+_*u/2;x+=`${y*w},${T*w}L${y*w},${T*w}Q${P*w},${D*w} ${B*w},${j*w}`}x+="z"}return x}}}),Ro=(f,t,p)=>(p<0&&(p+=1),p>1&&(p-=1),p<1/6?f+(t-f)*6*p:p<1/2?t:p<2/3?f+(t-f)*(2/3-p)*6:f),HC=(f,t,p)=>{let C,b,w;if(f=f/360,t==0)C=b=w=p;else{const x=p<.5?p*(1+t):p+t-p*t,h=2*p-x;C=Ro(h,x,f+1/3),b=Ro(h,x,f),w=Ro(h,x,f-1/3)}return[Math.max(0,Math.min(Math.round(C*255),255)),Math.max(0,Math.min(Math.round(b*255),255)),Math.max(0,Math.min(Math.round(w*255),255))]};var Nf=HC;const qo=f=>{let t={};for(let p in f)f.hasOwnProperty(p)&&(t[p]=parseFloat(f[p]/255,10));return t},Jo=f=>{let t=qo(f),p={};for(let C in t)if(t.hasOwnProperty(C)){let b=parseFloat(t[C],10);b<=.03928?p[C]=b/12.92:p[C]=Math.pow((b+.055)/1.055,2.4)}return p},Bo=f=>("0"+f.toString(16).toUpperCase()).slice(-2),kr=([f,t,p,C=100]=[])=>{const[b,w,x]=Nf(f,t/100,p/100);return new XC([b,w,x,C])},Zo=f=>.2126*f.r+.7152*f.g+.0722*f.b;class XC{constructor([t,p,C,b=100]=[]){this.r=t,this.g=p,this.b=C,this.a=b}}class on{constructor([t,p,C,b=100]=[]){this.h=t,this.s=p,this.l=C,this.a=b}toStringHSL=()=>`hsl(${this.h}, ${this.s}%, ${this.l}%)`;toStringHSLA=()=>`hsla(${this.h}, ${this.s}%, ${this.l}%, ${this.a}%)`;toHex=()=>{const[t,p,C]=Nf(this.h,this.s/100,this.l/100);let b=`${Bo(t)}${Bo(p)}${Bo(C)}`;return/([0-9A-F])\1+([0-9A-F])\2+([0-9A-F])\3/gi.test(b)&&(b=b.substring(0,1)+b.substring(2,3)+b.substring(4,5)),`#${b}`};getLuminance=()=>Zo(Jo(kr([this.h,this.s,this.l])))}const VC=(f,t)=>{const p=Zo(Jo(kr(f))),C=Zo(Jo(kr(t))),b=Math.max(p,C),w=Math.min(p,C);return(b+.05)/(w+.05)},KC=(f,t)=>{const p=qo(kr(f)),C=qo(kr(t));return Math.sqrt((C.r-p.r)**2+(C.g-p.g)**2+(C.b-p.b)**2)},qC=je("<svg><path></path></svg>"),JC=je('<svg viewBox="0 0 27 27" class="placeholder"><path d="M 1 7.75 C 1 7.89 1.11 8 1.25 8 L 7.75 8 C 7.89 8 8 7.89 8 7.75 L 8 1.25 C 8 1.11 7.89 1 7.75 1 L 1.25 1 C 1.11 1 1 1.11 1 1.25 L 1 7.75 Z M 2 2.25 C 2 2.11 2.11 2 2.25 2 L 6.75 2 C 6.89 2 7 2.11 7 2.25 L 7 6.75 C 7 6.89 6.89 7 6.75 7 L 2.25 7 C 2.11 7 2 6.89 2 6.75 L 2 2.25 Z M 3 5.75 C 3 5.89 3.11 6 3.25 6 L 5.75 6 C 5.89 6 6 5.89 6 5.75 L 6 3.25 C 6 3.11 5.89 3 5.75 3 L 3.25 3 C 3.11 3 3 3.11 3 3.25 L 3 5.75 Z M 19.25 1 C 19.11 1 19 1.11 19 1.25 L 19 7.75 C 19 7.89 19.11 8 19.25 8 L 25.75 8 C 25.89 8 26 7.89 26 7.75 L 26 1.25 C 26 1.11 25.89 1 25.75 1 L 19.25 1 Z M 25 6.75 C 25 6.89 24.89 7 24.75 7 L 20.25 7 C 20.11 7 20 6.89 20 6.75 L 20 2.25 C 20 2.11 20.11 2 20.25 2 L 24.75 2 C 24.89 2 25 2.11 25 2.25 L 25 6.75 Z M 17 21.75 C 17 21.89 17.11 22 17.25 22 L 21.75 22 C 21.89 22 22 21.89 22 21.75 L 22 17.25 C 22 17.11 21.89 17 21.75 17 L 17.25 17 C 17.11 17 17 17.11 17 17.25 L 17 21.75 Z M 18 18.25 C 18 18.11 18.11 18 18.25 18 L 20.75 18 C 20.89 18 21 18.11 21 18.25 L 21 20.75 C 21 20.89 20.89 21 20.75 21 L 18.25 21 C 18.11 21 18 20.89 18 20.75 L 18 18.25 Z M 24 3.25 C 24 3.11 23.89 3 23.75 3 L 21.25 3 C 21.11 3 21 3.11 21 3.25 L 21 5.75 C 21 5.89 21.11 6 21.25 6 L 23.75 6 C 23.89 6 24 5.89 24 5.75 L 24 3.25 Z M 7 11.75 C 7 11.89 7.11 12 7.25 12 L 7.75 12 C 7.89 12 8 11.89 8 11.75 L 8 11.25 C 8 11.11 7.89 11 7.75 11 L 7.25 11 C 7.11 11 7 11.11 7 11.25 L 7 11.75 Z M 7 9.75 C 7 9.89 7.11 10 7.25 10 L 7.75 10 C 7.89 10 8 9.89 8 9.75 L 8 9.25 C 8 9.11 7.89 9 7.75 9 L 7.25 9 C 7.11 9 7 9.11 7 9.25 L 7 9.75 Z M 9 7.75 C 9 7.89 9.11 8 9.25 8 L 9.75 8 C 9.89 8 10 7.89 10 7.75 L 10 7.25 C 10 7.11 9.89 7 9.75 7 L 9.25 7 C 9.11 7 9 7.11 9 7.25 L 9 7.75 Z M 11 7.75 C 11 7.89 11.11 8 11.25 8 L 11.75 8 C 11.89 8 12 7.89 12 7.75 L 12 7.25 C 12 7.11 11.89 7 11.75 7 L 11.25 7 C 11.11 7 11 7.11 11 7.25 L 11 7.75 Z M 13 7.75 C 13 7.89 13.11 8 13.25 8 L 13.75 8 C 13.89 8 14 7.89 14 7.75 L 14 7.25 C 14 7.11 13.89 7 13.75 7 L 13.25 7 C 13.11 7 13 7.11 13 7.25 L 13 7.75 Z M 15 7.75 C 15 7.89 15.11 8 15.25 8 L 15.75 8 C 15.89 8 16 7.89 16 7.75 L 16 7.25 C 16 7.11 15.89 7 15.75 7 L 15.25 7 C 15.11 7 15 7.11 15 7.25 L 15 7.75 Z M 18 7.25 C 18 7.11 17.89 7 17.75 7 L 17.25 7 C 17.11 7 17 7.11 17 7.25 L 17 7.75 C 17 7.89 17.11 8 17.25 8 L 17.75 8 C 17.89 8 18 7.89 18 7.75 L 18 7.25 Z M 19 19.75 C 19 19.89 19.11 20 19.25 20 L 19.75 20 C 19.89 20 20 19.89 20 19.75 L 20 19.25 C 20 19.11 19.89 19 19.75 19 L 19.25 19 C 19.11 19 19 19.11 19 19.25 L 19 19.75 Z M 7 13.75 C 7 13.89 7.11 14 7.25 14 L 7.75 14 C 7.89 14 8 13.89 8 13.75 L 8 13.25 C 8 13.11 7.89 13 7.75 13 L 7.25 13 C 7.11 13 7 13.11 7 13.25 L 7 13.75 Z M 7 15.75 C 7 15.89 7.11 16 7.25 16 L 7.75 16 C 7.89 16 8 15.89 8 15.75 L 8 15.25 C 8 15.11 7.89 15 7.75 15 L 7.25 15 C 7.11 15 7 15.11 7 15.25 L 7 15.75 Z M 7 17.75 C 7 17.89 7.11 18 7.25 18 L 7.75 18 C 7.89 18 8 17.89 8 17.75 L 8 17.25 C 8 17.11 7.89 17 7.75 17 L 7.25 17 C 7.11 17 7 17.11 7 17.25 L 7 17.75 Z M 1 25.75 C 1 25.89 1.11 26 1.25 26 L 7.75 26 C 7.89 26 8 25.89 8 25.75 L 8 19.25 C 8 19.11 7.89 19 7.75 19 L 1.25 19 C 1.11 19 1 19.11 1 19.25 L 1 25.75 Z M 2 20.25 C 2 20.11 2.11 20 2.25 20 L 6.75 20 C 6.89 20 7 20.11 7 20.25 L 7 24.75 C 7 24.89 6.89 25 6.75 25 L 2.25 25 C 2.11 25 2 24.89 2 24.75 L 2 20.25 Z M 3 23.75 C 3 23.89 3.11 24 3.25 24 L 5.75 24 C 5.89 24 6 23.89 6 23.75 L 6 21.25 C 6 21.11 5.89 21 5.75 21 L 3.25 21 C 3.11 21 3 21.11 3 21.25 L 3 23.75 Z"></path></svg>'),ZC=f=>{const t=tn({viewBox:"",d:""}),p=()=>{!Se.state.data||Se.state.data.length==0||(t.viewBox=`0 0 ${Se.state.size} ${Se.state.size}`,t.d=Se.ganerateSVGPathCommand(),Se.state.isGenerated=!0)},C=bf(p,20);return St(()=>p()),Mt(()=>{Se.state.data,Se.state.size,Se.state.shapes,Se.state.roundCorner,Se.state.eyeRoundCorner,C()}),we(rt,{get children(){return[we(rt.Case,{expression:()=>Se.state.isGenerated,get children(){const b=qC.cloneNode(!0),w=b.firstChild;return st(x=>{const h=t.viewBox,i=`background-color: ${new on(Se.state.backgroundColor).toStringHSL()};`,c=t.d,u=new on(Se.state.foregroundColor).toStringHSL();return h!==x._v$&&Wn(b,"viewBox",x._v$=h),x._v$2=si(b,i,x._v$2),c!==x._v$3&&Wn(w,"d",x._v$3=c),u!==x._v$4&&Wn(w,"fill",x._v$4=u),x},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),b}}),we(rt.Fallback,{get children(){return JC.cloneNode(!0)}})]}})},jf=f=>we(zh,{get each(){return f.each},children:(t,p)=>an(()=>f.children(t,p()))});const QC=je('<div class="checkbox"><input type="checkbox"><div class="box"><div class="check"><svg viewBox="0 0 60.31 49.97"><path d="M 21.65999984741211 49.970001220703125 L 0 28.309999465942383 L 11.3100004196167 17 L 21.65999984741211 27.34000015258789 L 49 0 L 60.310001373291016 11.3100004196167 L 21.65999984741211 49.970001220703125 Z"></path></svg></div></div></div>'),$f=f=>{const t=p=>{!f.onChange||f.onChange(p.target.checked)};return(()=>{const p=QC.cloneNode(!0),C=p.firstChild;C.addEventListener("change",t);const b=f.ref;return typeof b=="function"?yt(b,C):f.ref=C,st(()=>C.checked=f.value),p})()},eb=function(f){let t=0,p=0;do t+=f.offsetTop||0,p+=f.offsetLeft||0,f=f.offsetParent;while(f);return{top:t,left:p}},Wf=(f,t)=>{let p=!1;const C=h=>{if(!p)return;const i=h||window.event,c=(i.clientX||h.touches[0]?.pageX)+window.scrollX,u=(i.clientY||h.touches[0]?.pageY)+window.scrollY,r=eb(f),s=r.top,n=r.left,o=f.offsetWidth,d=f.offsetHeight;let a=Ni(Ir(c-n,0,o),[0,o],[0,1]),g=Ni(Ir(u-s,0,d),[0,d],[0,1]);t()?.({x:a,y:g})},b=h=>{p=!0,t()?.({isFocus:!0}),h.preventDefault(),C(h)},w=h=>{p=!1,t()?.({isFocus:!1})},x=h=>{C(h)};St(()=>{f.addEventListener("mousedown",b),window.addEventListener("mouseup",w),window.addEventListener("mousemove",x),f.addEventListener("touchstart",b),window.addEventListener("touchend",w),window.addEventListener("touchmove",x)}),hi(()=>{f.removeEventListener("mousedown",b),window.removeEventListener("mouseup",w),window.removeEventListener("mousemove",x),f.removeEventListener("touchstart",b),window.removeEventListener("touchend",w),window.removeEventListener("touchmove",x)})};const tb=je('<div><div class="bar"><div class="bar-content"><div class="handler-container"><div class="handler"></div></div></div></div></div>'),nb=je("<div></div>"),Cr=f=>Dr.exports.isNumber(f)&&!Dr.exports.isNaN(f),ib=(f,t)=>{for(let p=t.length-1;p>=0;p--)if(t[p]<=f){if(t[p+1]==null)return t[p];let C=Qs(t[p],f),b=Qs(t[p+1],f);return C<b?t[p]:t[p+1]}},ji=f=>{const t=tn({props:{min:(()=>{let p=Number(f.min);return Cr(p)||f.stops&&(p=Math.min(...f.stops.map(C=>Number(C))),Cr(p))?p:0})(),max:(()=>{let p=Number(f.max);return Cr(p)||f.stops&&(p=Math.max(...f.stops.map(C=>Number(C))),Cr(p))?p:100})(),step:(()=>{if(f.step){let p=Number(f.step);if(Cr(p))return p}return 1})(),stops:f.stops?f.stops.map(p=>Number(p)):void 0},px:0,isFocus:!1,value:f.value});return Mt(()=>{t.px=Ni(t.value,[t.props.min,t.props.max],[0,100]),f.onChange&&f.onChange(t.value)}),Mt(()=>{t.value=f.value}),(()=>{const p=tb.cloneNode(!0),C=p.firstChild,b=C.firstChild,w=b.firstChild;return yt(Wf,p,()=>({isFocus:x,x:h,y:i})=>{if(x!==void 0&&(t.isFocus=x),h!==void 0)if(t.props.stops){let c=Ni(h,[0,1],[t.props.min,t.props.max]);t.value=ib(c,t.props.stops)}else t.value=Ko(Ni(h,[0,1],[t.props.min,t.props.max]),t.props.step)}),Re(b,we(jf,{get each(){return f.grids},children:(x,h)=>(()=>{const i=nb.cloneNode(!0);return st(c=>{const u=pt("grid",{"grid-major":f.majorGrids?.includes(x)}),r=`left: ${x}%`;return u!==c._v$3&&gt(i,c._v$3=u),c._v$4=si(i,r,c._v$4),c},{_v$3:void 0,_v$4:void 0}),i})()}),null),st(x=>{const h=pt("input-range",{":focus":t.isFocus}),i=`left: ${t.px}%`;return h!==x._v$&&gt(p,x._v$=h),x._v$2=si(w,i,x._v$2),x},{_v$:void 0,_v$2:void 0}),p})()},Uf=(f,t)=>{const p=C=>{const b=f.contains(C.target);t()?.(b)};St(()=>{window.addEventListener("click",p)}),hi(()=>{window.removeEventListener("click",p)})};const rb=je('<div><div class="input-preview"></div><div class="input-option"><div class="input-option-color-container"><div class="input-option-color"><div class="input-option-color-selection"></div><div class="input-option-color-gradient-v"></div><div class="input-option-color-gradient-h"></div></div></div><div class="input-option-list g:6"><div class="input-option-list-each gh:6"><div class="c-input-title">H</div><div class="c-input-range"></div><div class="c-input-value"><input type="number"></div></div><div class="input-option-list-each gh:6"><div class="c-input-title">S</div><div class="c-input-range"></div><div class="c-input-value"><input type="number"></div></div><div class="input-option-list-each gh:6"><div class="c-input-title">L</div><div class="c-input-range"></div><div class="c-input-value"><input type="number"></div></div></div></div></div>');let sb=(f,t,p,C=t*Math.min(p,1-p)+p)=>[f,C?2-2*p/C:0,C],ab=(f,t,p,C=p-p*t/2,b=Math.min(C,1-C))=>[f,b?(p-C)/b:0,C];const Ah=f=>{const t=tn({isFocus:!1,h:f.value?.[0]!=null?f.value[0]:0,s:f.value?.[1]!=null?f.value[1]:0,l:f.value?.[2]!=null?f.value[2]:100,x:0,y:0});return Mt(()=>{t.h=f.value?.[0]!=null?f.value[0]:0,t.s=f.value?.[1]!=null?f.value[1]:0,t.l=f.value?.[2]!=null?f.value[2]:100}),Mt(()=>{let p=sb(t.h,t.s/100,t.l/100);t.x=p[1],t.y=1-p[2]}),Mt(()=>{f.onChange&&f.onChange([t.h,t.s,t.l])}),(()=>{const p=rb.cloneNode(!0),C=p.firstChild,b=C.nextSibling,w=b.firstChild,x=w.firstChild,h=x.firstChild,i=h.nextSibling,c=i.nextSibling,u=w.nextSibling,r=u.firstChild,s=r.firstChild,n=s.nextSibling,o=n.nextSibling,d=o.firstChild,a=r.nextSibling,g=a.firstChild,v=g.nextSibling,_=v.nextSibling,y=_.firstChild,T=a.nextSibling,P=T.firstChild,D=P.nextSibling,B=D.nextSibling,j=B.firstChild;return yt(Uf,p,()=>z=>{z||(t.isFocus=!1)}),C.$$click=z=>{t.isFocus=!t.isFocus},yt(Wf,x,()=>({isFocus:z,x:ee,y:ne})=>{if(ee==null||ne==null)return;t.x=ee,t.y=ne;let ie=t.h,Z=1-ne,pe=ab(ie,ee,Z);t.s=Ko((pe[1]||0)*100),t.l=Ko((pe[2]||0)*100)}),Re(n,we(ji,{max:"360",get value(){return t.h},onChange:z=>{t.h=z}})),d.$$input=z=>{t.h=z.target.value},Re(v,we(ji,{get value(){return t.s},onChange:z=>{t.s=z}})),y.$$input=z=>{t.s=z.target.value},Re(D,we(ji,{get value(){return t.l},onChange:z=>{t.l=z}})),j.$$input=z=>{t.l=z.target.value},st(z=>{const ee=pt("input input-color",{":focus":t.isFocus,":right":f.right}),ne=`background-color: hsl(${t.h}, ${t.s}%, ${t.l}%);`,ie=`top: ${t.y*100}%; left: ${t.x*100}%;`,Z=`background: linear-gradient(90deg, hsla(${t.h}, 100%, 50%, 0%) 0%, hsla(${t.h}, 100%, 50%, 100%) 100%);`;return ee!==z._v$&&gt(p,z._v$=ee),z._v$2=si(C,ne,z._v$2),z._v$3=si(h,ie,z._v$3),z._v$4=si(c,Z,z._v$4),z},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),st(()=>d.value=t.h),st(()=>y.value=t.s),st(()=>j.value=t.l),p})()};cn(["click","input"]);const ob=f=>{const[t,p]=ea();return Mt(()=>{let C=f.children,b,w=!1;Array.isArray(C)||(C=[C]);for(let x=0;x<C.length;x++)if(C[x].key=="fallback")b=C[x];else if(C[x].key=="case"&&C[x].value==f.value){p(C[x]),w=!0;break}w||p(b)}),t},lb=f=>Object.assign(()=>f.children,{key:"case",value:f.value}),ub=f=>Object.assign(()=>f.children,{key:"fallback"}),ti=Object.assign(ob,{Case:lb,Fallback:ub}),cb=je('<div class="g:6"><label for="__data">Text or Data <i class="required"></i></label><input type="text" id="__data" placeholder="Any message goes here.."></div>'),hb=()=>{let f;const t=()=>{if(f.value.length==0){Xe.state.value=null;return}Xe.state.value=f.value};return St(()=>{f&&f.focus(),t()}),(()=>{const p=cb.cloneNode(!0),C=p.firstChild,b=C.nextSibling;b.$$input=()=>t();const w=f;return typeof w=="function"?yt(w,b):f=b,p})()};cn(["input"]);const fb=je('<div class="g:6"><label for="__link">Link (URL) <i class="required"></i></label><input type="text" id="__link" placeholder="google.com"></div>'),db=()=>{let f;const t=()=>{let p=f.value;if(p.length==0){Xe.state.value=null;return}/^(.+:\/\/)/g.test(p)||(p=`https://${p}`),Xe.state.value=p};return St(()=>{f&&f.focus(),t()}),(()=>{const p=fb.cloneNode(!0),C=p.firstChild,b=C.nextSibling;b.$$input=()=>t();const w=f;return typeof w=="function"?yt(w,b):f=b,p})()};cn(["input"]);const gb=je('<div class="dummy"><input type="text"></div>'),pb=je('<div><div class="input-select-preview"><div class="input-select-arrow"><svg viewBox="0 0 320 512"><path d="M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"></path></svg></div></div><div class="input-select-option"><div class="input-select-option-list"></div></div></div>'),vb=je("<i></i>"),mb=je('<div class="input-select-search"><input type="text"></div>'),_b=je("<a></a>"),yb=f=>{const t=tn({isFocus:!1,value:f.value,search:"",options:[],showOptions:[]});return St(()=>{if(f.options){t.options=f.options;return}if(f.children){let p=f.children,C=[];p.forEach((b,w)=>{C[w]={value:b.value,node:b}}),t.options=C}}),Mt(()=>{if(f.searchBox&&t.search.length>0){console.log(t.search),t.showOptions=[...t.options].filter(p=>{for(let C of p.keywords)if(C.match(new RegExp(t.search.replace(/(\.|\+|\*|\?|\^|\$|\/|\\|\||\(|\)|\[|\]|\{|\})+/g,b=>`\\${b}`),"gi")))return!0;return!1});return}t.showOptions=t.options}),Mt(()=>{f.onChange&&f.onChange(t.value)}),[(()=>{const p=gb.cloneNode(!0),C=p.firstChild;C.addEventListener("change",w=>{t.value=w.target.value}),C.$$input=w=>{t.value=w.target.value};const b=f.ref;return typeof b=="function"?yt(b,C):f.ref=C,st(()=>C.value=t.value),p})(),(()=>{const p=pb.cloneNode(!0),C=p.firstChild,b=C.firstChild,w=C.nextSibling,x=w.firstChild;return yt(Uf,p,()=>h=>{h||(t.isFocus=!1)}),C.$$click=h=>{t.isFocus=!t.isFocus},Re(C,()=>t.options.find(h=>h.value==t.value)?.[f.preview||"node"]||(()=>{const h=vb.cloneNode(!0);return Re(h,()=>f.placeholder),h})()||null,b),Re(w,(()=>{const h=an(()=>!!f.searchBox);return()=>h()?(()=>{const i=mb.cloneNode(!0),c=i.firstChild;return c.$$input=u=>{t.search=u.target.value},st(()=>Wn(c,"placeholder",f.searchBox?.placeholder)),i})():null})(),x),Re(x,we(zh,{get each(){return t.showOptions},children:(h,i)=>(()=>{const c=_b.cloneNode(!0);return c.$$click=u=>{u.stopPropagation(),t.value=h.value,t.isFocus=!1},Re(c,()=>h.node),st(()=>gt(c,pt("input hc hnul",{":selected":t.value==h.value}))),c})()})),st(()=>gt(p,pt("input input-select",{":focus":t.isFocus}))),p})()]},Cb=f=>Object.assign(()=>f.children,{...f}),Di=Object.assign(yb,{Option:Cb});cn(["input","click"]);const Lh=je("<i>/</i>"),bb=je('<div class="g:16"><div class="g:6"><label for="__ssid">Wifi Name (SSID) <i class="required"></i></label><input type="text" id="__ssid" placeholder="SSID"></div><div class="g:6"><label for="__password">Password</label><input type="text" id="__password" placeholder="Password"></div><div class="g:6"><label for="__encryption">Encryption</label></div><div class="g:6"><label class="checkbox">Is hidden network</label></div></div>'),wb=()=>{let f,t,p,C;const b=x=>x.replace(/(\\|,|;|")/g,h=>`\\${h}`),w=()=>{let x=f.value,h=t.value,i=p.value,c=C.checked?"H:true;":"";if(x.length==0){Xe.state.value=null;return}x=b(x),h=b(h),Xe.state.value=`WIFI:S:${x};P:${h};T:${i};${c}`};return St(()=>{f&&f.focus(),w()}),(()=>{const x=bb.cloneNode(!0),h=x.firstChild,i=h.firstChild,c=i.nextSibling,u=h.nextSibling,r=u.firstChild,s=r.nextSibling,n=u.nextSibling;n.firstChild;const o=n.nextSibling,d=o.firstChild,a=d.firstChild;c.$$input=()=>w();const g=f;typeof g=="function"?yt(g,c):f=c,s.$$input=()=>w();const v=t;return typeof v=="function"?yt(v,s):t=s,Re(n,we(Di,{ref(_){const y=p;typeof y=="function"?y(_):p=_},value:"WPA",onChange:()=>w(),get children(){return[we(Di.Option,{value:"",children:"No encryption"}),we(Di.Option,{value:"WEP",children:"WEP"}),we(Di.Option,{value:"WPA",get children(){return["WPA",Lh.cloneNode(!0),"WPA2",Lh.cloneNode(!0),"WPA3"]}})]}}),null),Re(d,we($f,{ref(_){const y=C;typeof y=="function"?y(_):C=_},onChange:()=>w()}),a),x})()};cn(["input"]);/*! js-cookie v3.0.1 | MIT */function Bs(f){for(var t=1;t<arguments.length;t++){var p=arguments[t];for(var C in p)f[C]=p[C]}return f}var Sb={read:function(f){return f[0]==='"'&&(f=f.slice(1,-1)),f.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(f){return encodeURIComponent(f).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Qo(f,t){function p(b,w,x){if(!(typeof document>"u")){x=Bs({},t,x),typeof x.expires=="number"&&(x.expires=new Date(Date.now()+x.expires*864e5)),x.expires&&(x.expires=x.expires.toUTCString()),b=encodeURIComponent(b).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var h="";for(var i in x)!x[i]||(h+="; "+i,x[i]!==!0&&(h+="="+x[i].split(";")[0]));return document.cookie=b+"="+f.write(w,b)+h}}function C(b){if(!(typeof document>"u"||arguments.length&&!b)){for(var w=document.cookie?document.cookie.split("; "):[],x={},h=0;h<w.length;h++){var i=w[h].split("="),c=i.slice(1).join("=");try{var u=decodeURIComponent(i[0]);if(x[u]=f.read(c,u),b===u)break}catch{}}return b?x[b]:x}}return Object.create({set:p,get:C,remove:function(b,w){p(b,"",Bs({},w,{expires:-1}))},withAttributes:function(b){return Qo(this.converter,Bs({},this.attributes,b))},withConverter:function(b){return Qo(Bs({},this.converter,b),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(f)}})}var br=Qo(Sb,{path:"/"});const el=[{name:"Afghanistan",dial_code:"+93",code:"AF"},{name:"Aland Islands",dial_code:"+358",code:"AX"},{name:"Albania",dial_code:"+355",code:"AL"},{name:"Algeria",dial_code:"+213",code:"DZ"},{name:"AmericanSamoa",dial_code:"+1684",code:"AS"},{name:"Andorra",dial_code:"+376",code:"AD"},{name:"Angola",dial_code:"+244",code:"AO"},{name:"Anguilla",dial_code:"+1264",code:"AI"},{name:"Antarctica",dial_code:"+672",code:"AQ"},{name:"Antigua and Barbuda",dial_code:"+1268",code:"AG"},{name:"Argentina",dial_code:"+54",code:"AR"},{name:"Armenia",dial_code:"+374",code:"AM"},{name:"Aruba",dial_code:"+297",code:"AW"},{name:"Australia",dial_code:"+61",code:"AU"},{name:"Austria",dial_code:"+43",code:"AT"},{name:"Azerbaijan",dial_code:"+994",code:"AZ"},{name:"Bahamas",dial_code:"+1242",code:"BS"},{name:"Bahrain",dial_code:"+973",code:"BH"},{name:"Bangladesh",dial_code:"+880",code:"BD"},{name:"Barbados",dial_code:"+1246",code:"BB"},{name:"Belarus",dial_code:"+375",code:"BY"},{name:"Belgium",dial_code:"+32",code:"BE"},{name:"Belize",dial_code:"+501",code:"BZ"},{name:"Benin",dial_code:"+229",code:"BJ"},{name:"Bermuda",dial_code:"+1441",code:"BM"},{name:"Bhutan",dial_code:"+975",code:"BT"},{name:"Bolivia, Plurinational State of",dial_code:"+591",code:"BO"},{name:"Bosnia and Herzegovina",dial_code:"+387",code:"BA"},{name:"Botswana",dial_code:"+267",code:"BW"},{name:"Brazil",dial_code:"+55",code:"BR"},{name:"British Indian Ocean Territory",dial_code:"+246",code:"IO"},{name:"Brunei Darussalam",dial_code:"+673",code:"BN"},{name:"Bulgaria",dial_code:"+359",code:"BG"},{name:"Burkina Faso",dial_code:"+226",code:"BF"},{name:"Burundi",dial_code:"+257",code:"BI"},{name:"Cambodia",dial_code:"+855",code:"KH"},{name:"Cameroon",dial_code:"+237",code:"CM"},{name:"Canada",dial_code:"+1",code:"CA"},{name:"Cape Verde",dial_code:"+238",code:"CV"},{name:"Cayman Islands",dial_code:"+ 345",code:"KY"},{name:"Central African Republic",dial_code:"+236",code:"CF"},{name:"Chad",dial_code:"+235",code:"TD"},{name:"Chile",dial_code:"+56",code:"CL"},{name:"China",dial_code:"+86",code:"CN"},{name:"Christmas Island",dial_code:"+61",code:"CX"},{name:"Cocos (Keeling) Islands",dial_code:"+61",code:"CC"},{name:"Colombia",dial_code:"+57",code:"CO"},{name:"Comoros",dial_code:"+269",code:"KM"},{name:"Congo",dial_code:"+242",code:"CG"},{name:"Congo, The Democratic Republic of the Congo",dial_code:"+243",code:"CD"},{name:"Cook Islands",dial_code:"+682",code:"CK"},{name:"Costa Rica",dial_code:"+506",code:"CR"},{name:"Cote d'Ivoire",dial_code:"+225",code:"CI"},{name:"Croatia",dial_code:"+385",code:"HR"},{name:"Cuba",dial_code:"+53",code:"CU"},{name:"Cyprus",dial_code:"+357",code:"CY"},{name:"Czech Republic",dial_code:"+420",code:"CZ"},{name:"Denmark",dial_code:"+45",code:"DK"},{name:"Djibouti",dial_code:"+253",code:"DJ"},{name:"Dominica",dial_code:"+1767",code:"DM"},{name:"Dominican Republic",dial_code:"+1849",code:"DO"},{name:"Ecuador",dial_code:"+593",code:"EC"},{name:"Egypt",dial_code:"+20",code:"EG"},{name:"El Salvador",dial_code:"+503",code:"SV"},{name:"Equatorial Guinea",dial_code:"+240",code:"GQ"},{name:"Eritrea",dial_code:"+291",code:"ER"},{name:"Estonia",dial_code:"+372",code:"EE"},{name:"Ethiopia",dial_code:"+251",code:"ET"},{name:"Falkland Islands (Malvinas)",dial_code:"+500",code:"FK"},{name:"Faroe Islands",dial_code:"+298",code:"FO"},{name:"Fiji",dial_code:"+679",code:"FJ"},{name:"Finland",dial_code:"+358",code:"FI"},{name:"France",dial_code:"+33",code:"FR"},{name:"French Guiana",dial_code:"+594",code:"GF"},{name:"French Polynesia",dial_code:"+689",code:"PF"},{name:"Gabon",dial_code:"+241",code:"GA"},{name:"Gambia",dial_code:"+220",code:"GM"},{name:"Georgia",dial_code:"+995",code:"GE"},{name:"Germany",dial_code:"+49",code:"DE"},{name:"Ghana",dial_code:"+233",code:"GH"},{name:"Gibraltar",dial_code:"+350",code:"GI"},{name:"Greece",dial_code:"+30",code:"GR"},{name:"Greenland",dial_code:"+299",code:"GL"},{name:"Grenada",dial_code:"+1473",code:"GD"},{name:"Guadeloupe",dial_code:"+590",code:"GP"},{name:"Guam",dial_code:"+1671",code:"GU"},{name:"Guatemala",dial_code:"+502",code:"GT"},{name:"Guernsey",dial_code:"+44",code:"GG"},{name:"Guinea",dial_code:"+224",code:"GN"},{name:"Guinea-Bissau",dial_code:"+245",code:"GW"},{name:"Guyana",dial_code:"+595",code:"GY"},{name:"Haiti",dial_code:"+509",code:"HT"},{name:"Holy See (Vatican City State)",dial_code:"+379",code:"VA"},{name:"Honduras",dial_code:"+504",code:"HN"},{name:"Hong Kong",dial_code:"+852",code:"HK"},{name:"Hungary",dial_code:"+36",code:"HU"},{name:"Iceland",dial_code:"+354",code:"IS"},{name:"India",dial_code:"+91",code:"IN"},{name:"Indonesia",dial_code:"+62",code:"ID"},{name:"Iran, Islamic Republic of Persian Gulf",dial_code:"+98",code:"IR"},{name:"Iraq",dial_code:"+964",code:"IQ"},{name:"Ireland",dial_code:"+353",code:"IE"},{name:"Isle of Man",dial_code:"+44",code:"IM"},{name:"Israel",dial_code:"+972",code:"IL"},{name:"Italy",dial_code:"+39",code:"IT"},{name:"Jamaica",dial_code:"+1876",code:"JM"},{name:"Japan",dial_code:"+81",code:"JP"},{name:"Jersey",dial_code:"+44",code:"JE"},{name:"Jordan",dial_code:"+962",code:"JO"},{name:"Kazakhstan",dial_code:"+77",code:"KZ"},{name:"Kenya",dial_code:"+254",code:"KE"},{name:"Kiribati",dial_code:"+686",code:"KI"},{name:"Korea, Democratic People's Republic of Korea",dial_code:"+850",code:"KP"},{name:"Korea, Republic of South Korea",dial_code:"+82",code:"KR"},{name:"Kuwait",dial_code:"+965",code:"KW"},{name:"Kyrgyzstan",dial_code:"+996",code:"KG"},{name:"Laos",dial_code:"+856",code:"LA"},{name:"Latvia",dial_code:"+371",code:"LV"},{name:"Lebanon",dial_code:"+961",code:"LB"},{name:"Lesotho",dial_code:"+266",code:"LS"},{name:"Liberia",dial_code:"+231",code:"LR"},{name:"Libyan Arab Jamahiriya",dial_code:"+218",code:"LY"},{name:"Liechtenstein",dial_code:"+423",code:"LI"},{name:"Lithuania",dial_code:"+370",code:"LT"},{name:"Luxembourg",dial_code:"+352",code:"LU"},{name:"Macao",dial_code:"+853",code:"MO"},{name:"Macedonia",dial_code:"+389",code:"MK"},{name:"Madagascar",dial_code:"+261",code:"MG"},{name:"Malawi",dial_code:"+265",code:"MW"},{name:"Malaysia",dial_code:"+60",code:"MY"},{name:"Maldives",dial_code:"+960",code:"MV"},{name:"Mali",dial_code:"+223",code:"ML"},{name:"Malta",dial_code:"+356",code:"MT"},{name:"Marshall Islands",dial_code:"+692",code:"MH"},{name:"Martinique",dial_code:"+596",code:"MQ"},{name:"Mauritania",dial_code:"+222",code:"MR"},{name:"Mauritius",dial_code:"+230",code:"MU"},{name:"Mayotte",dial_code:"+262",code:"YT"},{name:"Mexico",dial_code:"+52",code:"MX"},{name:"Micronesia, Federated States of Micronesia",dial_code:"+691",code:"FM"},{name:"Moldova",dial_code:"+373",code:"MD"},{name:"Monaco",dial_code:"+377",code:"MC"},{name:"Mongolia",dial_code:"+976",code:"MN"},{name:"Montenegro",dial_code:"+382",code:"ME"},{name:"Montserrat",dial_code:"+1664",code:"MS"},{name:"Morocco",dial_code:"+212",code:"MA"},{name:"Mozambique",dial_code:"+258",code:"MZ"},{name:"Myanmar",dial_code:"+95",code:"MM"},{name:"Namibia",dial_code:"+264",code:"NA"},{name:"Nauru",dial_code:"+674",code:"NR"},{name:"Nepal",dial_code:"+977",code:"NP"},{name:"Netherlands",dial_code:"+31",code:"NL"},{name:"New Caledonia",dial_code:"+687",code:"NC"},{name:"New Zealand",dial_code:"+64",code:"NZ"},{name:"Nicaragua",dial_code:"+505",code:"NI"},{name:"Niger",dial_code:"+227",code:"NE"},{name:"Nigeria",dial_code:"+234",code:"NG"},{name:"Niue",dial_code:"+683",code:"NU"},{name:"Norfolk Island",dial_code:"+672",code:"NF"},{name:"Northern Mariana Islands",dial_code:"+1670",code:"MP"},{name:"Norway",dial_code:"+47",code:"NO"},{name:"Oman",dial_code:"+968",code:"OM"},{name:"Pakistan",dial_code:"+92",code:"PK"},{name:"Palau",dial_code:"+680",code:"PW"},{name:"Palestinian Territory, Occupied",dial_code:"+970",code:"PS"},{name:"Panama",dial_code:"+507",code:"PA"},{name:"Papua New Guinea",dial_code:"+675",code:"PG"},{name:"Paraguay",dial_code:"+595",code:"PY"},{name:"Peru",dial_code:"+51",code:"PE"},{name:"Philippines",dial_code:"+63",code:"PH"},{name:"Pitcairn",dial_code:"+872",code:"PN"},{name:"Poland",dial_code:"+48",code:"PL"},{name:"Portugal",dial_code:"+351",code:"PT"},{name:"Puerto Rico",dial_code:"+1939",code:"PR"},{name:"Qatar",dial_code:"+974",code:"QA"},{name:"Romania",dial_code:"+40",code:"RO"},{name:"Russia",dial_code:"+7",code:"RU"},{name:"Rwanda",dial_code:"+250",code:"RW"},{name:"Reunion",dial_code:"+262",code:"RE"},{name:"Saint Barthelemy",dial_code:"+590",code:"BL"},{name:"Saint Helena, Ascension and Tristan Da Cunha",dial_code:"+290",code:"SH"},{name:"Saint Kitts and Nevis",dial_code:"+1869",code:"KN"},{name:"Saint Lucia",dial_code:"+1758",code:"LC"},{name:"Saint Martin",dial_code:"+590",code:"MF"},{name:"Saint Pierre and Miquelon",dial_code:"+508",code:"PM"},{name:"Saint Vincent and the Grenadines",dial_code:"+1784",code:"VC"},{name:"Samoa",dial_code:"+685",code:"WS"},{name:"San Marino",dial_code:"+378",code:"SM"},{name:"Sao Tome and Principe",dial_code:"+239",code:"ST"},{name:"Saudi Arabia",dial_code:"+966",code:"SA"},{name:"Senegal",dial_code:"+221",code:"SN"},{name:"Serbia",dial_code:"+381",code:"RS"},{name:"Seychelles",dial_code:"+248",code:"SC"},{name:"Sierra Leone",dial_code:"+232",code:"SL"},{name:"Singapore",dial_code:"+65",code:"SG"},{name:"Slovakia",dial_code:"+421",code:"SK"},{name:"Slovenia",dial_code:"+386",code:"SI"},{name:"Solomon Islands",dial_code:"+677",code:"SB"},{name:"Somalia",dial_code:"+252",code:"SO"},{name:"South Africa",dial_code:"+27",code:"ZA"},{name:"South Sudan",dial_code:"+211",code:"SS"},{name:"South Georgia and the South Sandwich Islands",dial_code:"+500",code:"GS"},{name:"Spain",dial_code:"+34",code:"ES"},{name:"Sri Lanka",dial_code:"+94",code:"LK"},{name:"Sudan",dial_code:"+249",code:"SD"},{name:"Suriname",dial_code:"+597",code:"SR"},{name:"Svalbard and Jan Mayen",dial_code:"+47",code:"SJ"},{name:"Swaziland",dial_code:"+268",code:"SZ"},{name:"Sweden",dial_code:"+46",code:"SE"},{name:"Switzerland",dial_code:"+41",code:"CH"},{name:"Syrian Arab Republic",dial_code:"+963",code:"SY"},{name:"Taiwan",dial_code:"+886",code:"TW"},{name:"Tajikistan",dial_code:"+992",code:"TJ"},{name:"Tanzania, United Republic of Tanzania",dial_code:"+255",code:"TZ"},{name:"Thailand",dial_code:"+66",code:"TH"},{name:"Timor-Leste",dial_code:"+670",code:"TL"},{name:"Togo",dial_code:"+228",code:"TG"},{name:"Tokelau",dial_code:"+690",code:"TK"},{name:"Tonga",dial_code:"+676",code:"TO"},{name:"Trinidad and Tobago",dial_code:"+1868",code:"TT"},{name:"Tunisia",dial_code:"+216",code:"TN"},{name:"Turkey",dial_code:"+90",code:"TR"},{name:"Turkmenistan",dial_code:"+993",code:"TM"},{name:"Turks and Caicos Islands",dial_code:"+1649",code:"TC"},{name:"Tuvalu",dial_code:"+688",code:"TV"},{name:"Uganda",dial_code:"+256",code:"UG"},{name:"Ukraine",dial_code:"+380",code:"UA"},{name:"United Arab Emirates",dial_code:"+971",code:"AE"},{name:"United Kingdom",dial_code:"+44",code:"GB"},{name:"United States",dial_code:"+1",code:"US"},{name:"Uruguay",dial_code:"+598",code:"UY"},{name:"Uzbekistan",dial_code:"+998",code:"UZ"},{name:"Vanuatu",dial_code:"+678",code:"VU"},{name:"Venezuela, Bolivarian Republic of Venezuela",dial_code:"+58",code:"VE"},{name:"Vietnam",dial_code:"+84",code:"VN"},{name:"Virgin Islands, British",dial_code:"+1284",code:"VG"},{name:"Virgin Islands, U.S.",dial_code:"+1340",code:"VI"},{name:"Wallis and Futuna",dial_code:"+681",code:"WF"},{name:"Yemen",dial_code:"+967",code:"YE"},{name:"Zambia",dial_code:"+260",code:"ZM"},{name:"Zimbabwe",dial_code:"+263",code:"ZW"}];const xb=je('<div class="icon"><img></div>'),Tb=je("<div> <i>(<!>)</i></div>"),Ob=je('<div class="g:6"><label for="__phonenumber">Phone Number <i class="required"></i></label><div class="input input-phone"><input type="text" pattern="[0-9]" id="__phonenumber" placeholder="Phone Number"></div></div>'),Eb=el.map(f=>({node:()=>[(()=>{const t=xb.cloneNode(!0),p=t.firstChild;return st(()=>Wn(p,"src",`https://raw.githubusercontent.com/lipis/flag-icons/main/flags/4x3/${f.code.toLowerCase()}.svg`)),t})(),(()=>{const t=Tb.cloneNode(!0),p=t.firstChild,C=p.nextSibling,b=C.firstChild,w=b.nextSibling;return w.nextSibling,Re(t,()=>f.name,p),Re(C,()=>f.dial_code,w),t})()],keywords:[f.name,f.code,f.dial_code],value:f.dial_code})),Pb=()=>{let f,t;const p=()=>{let C=f.value,b=t.value.replace(/^0/g,"");if(b.length==0){Xe.state.value=null;return}Xe.state.value=`tel:${C}${b}`};return St(()=>{t&&t.focus(),p()}),St(()=>{let C=br.get("dial_code");if(C){f.value=C,f.dispatchEvent(new Event("input",{bubbles:!0}));return}if(br.get("country_code")){let w=el.find(x=>x.code.toUpperCase()==data.countryCode.toUpperCase());if(!w?.dial_code)return;br.set("dial_code",w.dial_code),f.value=w.dial_code,f.dispatchEvent(new Event("input",{bubbles:!0}));return}fetch("https://api.ipregistry.co/?key=tryout").then(w=>w.json()).then(w=>{if(!w?.location.country.code)return;let x=el.find(h=>h.code.toUpperCase()==w.location.country.code.toUpperCase());!x?.dial_code||(x?.code&&br.set("country_code",x.code),br.set("dial_code",x.dial_code),f.value=x.dial_code,f.dispatchEvent(new Event("input",{bubbles:!0})))})}),(()=>{const C=Ob.cloneNode(!0),b=C.firstChild,w=b.nextSibling,x=w.firstChild;Re(w,we(Di,{ref(i){const c=f;typeof c=="function"?c(i):f=i},value:"",placeholder:"+??",preview:"value",searchBox:{placeholder:"Search country.."},options:Eb,onChange:()=>p()}),x),x.$$input=i=>{i.target.value=i.target.value.replace(/\D/g,""),p()};const h=t;return typeof h=="function"?yt(h,x):t=x,C})()};cn(["input"]);const Ab=je('<div class="g:16"><div class="g:6"><label for="__query">Place Name or Coordinate <i class="required"></i></label><input type="text" id="__query" placeholder="Tokyo Tower  or  35.658577, 139.745432"></div><div class="g:6"><small class="fade">Preview</small><div><iframe></iframe></div></div></div>'),Lb=()=>{let f;const t=tn({preview:{url:"https://maps.google.com/?q=&output=embed",loading:!0}}),p=()=>{let w=f.value;if(w.length==0){Xe.state.value=null;return}Xe.state.value=`https://maps.google.com/?q=${encodeURIComponent(w).replace(/%20/g,"+")||""}`,t.preview.loading=!0,b()},b=eC(()=>{t.preview.url=`${Xe.state.value}&output=embed`,t.preview.loading=!1},1e3);return St(()=>{f&&f.focus(),p()}),(()=>{const w=Ab.cloneNode(!0),x=w.firstChild,h=x.firstChild,i=h.nextSibling,c=x.nextSibling,u=c.firstChild,r=u.nextSibling,s=r.firstChild;i.$$input=()=>p();const n=f;return typeof n=="function"?yt(n,i):f=i,st(o=>{const d=pt("google-map",{":deactive":!Xe.state.value,":loading":t.preview.loading}),a=t.preview.url;return d!==o._v$&&gt(r,o._v$=d),a!==o._v$2&&Wn(s,"src",o._v$2=a),o},{_v$:void 0,_v$2:void 0}),w})()};cn(["input"]);const Db=je('<div class="g:16"><div class="g:6"><label>Currency <i class="required"></i></label></div><div class="g:6"><label for="__address">Address <i class="required"></i></label><input type="text" id="__address" placeholder="Your wallet address"></div><div class="g:6"><label for="__amount">Amount&nbsp;<small class="fade italic">(Optional)</small></label><input type="number" id="__amount" placeholder="0.01"></div></div>'),Mb=je("<img>"),No={default:({currency:f,address:t,amount:p})=>p?`${f}:${t}?amount=${p}`:`${f}:${t}`,xrpl:({address:f,amount:t})=>t?`xrpl://to=${f}&amount=${t}`:`xrpl://to=${f}`},Ib=[{name:"Bitcoin",value:"bitcoin",code:"BTC"},{name:"Bitcoin Cash",value:"bitcoincash",code:"BTC"},{name:"Ethereum",value:"ethereum",code:"ETH"},{name:"Litecoin",value:"litecoin",code:"LTC"},{name:"Dash",value:"dash",code:"DASH"},{name:"Monero",value:"monero",code:"XMR"},{name:"XRP",value:"xrpl",code:"XRP"}].sort((f,t)=>f.value<t.value?-1:f.value>t.value?1:0),kb=()=>{let f,t,p;const C=w=>No[w]?No[w]:No.default,b=()=>{let w=f.value,x=t.value,h=p.value;if(x.length==0){Xe.state.value=null;return}let i=C(w);Xe.state.value=i({currency:w,address:x,amount:h})};return St(()=>{t&&t.focus(),b()}),(()=>{const w=Db.cloneNode(!0),x=w.firstChild;x.firstChild;const h=x.nextSibling,i=h.firstChild,c=i.nextSibling,u=h.nextSibling,r=u.firstChild,s=r.nextSibling;Re(x,we(Di,{ref(d){const a=f;typeof a=="function"?a(d):f=d},value:"bitcoin",onChange:()=>b(),get options(){return Ib.map(d=>({value:d.value,node:()=>[(()=>{const a=Mb.cloneNode(!0);return st(()=>Wn(a,"src",`https://raw.githubusercontent.com/chainbitdev/logos/main/logos/${d.code.toUpperCase()}/logo.svg`)),a})(),an(()=>d.name)]}))}}),null),c.$$input=()=>b();const n=t;typeof n=="function"?yt(n,c):t=c,s.$$input=()=>b();const o=p;return typeof o=="function"?yt(o,s):p=s,w})()};cn(["input"]);const Fb=je('<small class="warning">* Inverted colors may not be scannable by some apps.</small>'),Rb=je('<div class="color-note g:4"><small><span class="fade">Color Difference Rating:&nbsp;</span><span class="noti"></span></small></div>'),Bb=[{value:1.6,name:"Excellent"},{value:1,name:"Very Good"},{value:.5,name:"Good"},{value:.2,name:"Fair"},{name:"Poor"}],Nb=f=>{for(let t of Bb)if(!t.value||f>=t.value)return t.name},jb=f=>{const t=tn({colorDiff:0,colorContrastRatio:0,score:0,foregroundLuminance:0,backgroundLuminance:0});return Mt(()=>{t.colorDiff=KC(Se.state.foregroundColor,Se.state.backgroundColor),t.colorContrastRatio=VC(Se.state.foregroundColor,Se.state.backgroundColor)/7,t.score=Math.min(t.colorDiff,t.colorContrastRatio),t.foregroundLuminance=new on(Se.state.foregroundColor).getLuminance(),t.backgroundLuminance=new on(Se.state.backgroundColor).getLuminance()}),(()=>{const p=Rb.cloneNode(!0),C=p.firstChild,b=C.firstChild,w=b.nextSibling;return Re(w,()=>Nb(t.score)),Re(p,we(rt,{get children(){return we(rt.Case,{expression:()=>t.foregroundLuminance>t.backgroundLuminance,get children(){return Fb.cloneNode(!0)}})}}),null),p})()};var ii={};const $b={},Wb=Object.freeze(Object.defineProperty({__proto__:null,default:$b},Symbol.toStringTag,{value:"Module"})),jo=Wy(Wb);(function(f){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"5.2.4"};if(f.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var p=jo,C=new p.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=C.document,t.jsdomImplForWrapper=jo.implForWrapper,t.nodeCanvas=jo.Canvas,t.window=C,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function h(n,o){if(!!this.__eventListeners[n]){var d=this.__eventListeners[n];o?d[d.indexOf(o)]=!1:t.util.array.fill(d,!1)}}function i(n,o){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var d in n)this.on(d,n[d]);else this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(o);return this}function c(n,o){var d=function(){o.apply(this,arguments),this.off(n,d)}.bind(this);this.on(n,d)}function u(n,o){if(arguments.length===1)for(var d in n)c.call(this,d,n[d]);else c.call(this,n,o);return this}function r(n,o){if(!this.__eventListeners)return this;if(arguments.length===0)for(n in this.__eventListeners)h.call(this,n);else if(arguments.length===1&&typeof arguments[0]=="object")for(var d in n)h.call(this,d,n[d]);else h.call(this,n,o);return this}function s(n,o){if(!this.__eventListeners)return this;var d=this.__eventListeners[n];if(!d)return this;for(var a=0,g=d.length;a<g;a++)d[a]&&d[a].call(this,o||{});return this.__eventListeners[n]=d.filter(function(v){return v!==!1}),this}t.Observable={fire:s,on:i,once:u,off:r}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var h=0,i=arguments.length;h<i;h++)this._onObjectAdded(arguments[h]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(h,i,c){var u=this._objects;return c?u[i]=h:u.splice(i,0,h),this._onObjectAdded&&this._onObjectAdded(h),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var h=this._objects,i,c=!1,u=0,r=arguments.length;u<r;u++)i=h.indexOf(arguments[u]),i!==-1&&(c=!0,h.splice(i,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[u]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(h,i){for(var c=this.getObjects(),u=0,r=c.length;u<r;u++)h.call(i,c[u],u,c);return this},getObjects:function(h){return typeof h>"u"?this._objects.concat():this._objects.filter(function(i){return i.type===h})},item:function(h){return this._objects[h]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(h,i){return this._objects.indexOf(h)>-1?!0:i?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(h,!0)}):!1},complexity:function(){return this._objects.reduce(function(h,i){return h+=i.complexity?i.complexity():0,h},0)}},t.CommonMethods={_setOptions:function(h){for(var i in h)this.set(i,h[i])},_initGradient:function(h,i){h&&h.colorStops&&!(h instanceof t.Gradient)&&this.set(i,new t.Gradient(h))},_initPattern:function(h,i,c){h&&h.source&&!(h instanceof t.Pattern)?this.set(i,new t.Pattern(h,c)):c&&c()},_setObject:function(h){for(var i in h)this._set(i,h[i])},set:function(h,i){return typeof h=="object"?this._setObject(h):this._set(h,i),this},_set:function(h,i){this[h]=i},toggle:function(h){var i=this.get(h);return typeof i=="boolean"&&this.set(h,!i),this},get:function(h){return this[h]}},function(h){var i=Math.sqrt,c=Math.atan2,u=Math.pow,r=Math.PI/180,s=Math.PI/2;t.util={cos:function(n){if(n===0)return 1;n<0&&(n=-n);var o=n/s;switch(o){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},sin:function(n){if(n===0)return 0;var o=n/s,d=1;switch(n<0&&(d=-1),o){case 1:return d;case 2:return 0;case 3:return-d}return Math.sin(n)},removeFromArray:function(n,o){var d=n.indexOf(o);return d!==-1&&n.splice(d,1),n},getRandomInt:function(n,o){return Math.floor(Math.random()*(o-n+1))+n},degreesToRadians:function(n){return n*r},radiansToDegrees:function(n){return n/r},rotatePoint:function(n,o,d){var a=new t.Point(n.x-o.x,n.y-o.y),g=t.util.rotateVector(a,d);return new t.Point(g.x,g.y).addEquals(o)},rotateVector:function(n,o){var d=t.util.sin(o),a=t.util.cos(o),g=n.x*a-n.y*d,v=n.x*d+n.y*a;return{x:g,y:v}},createVector:function(n,o){return new t.Point(o.x-n.x,o.y-n.y)},calcAngleBetweenVectors:function(n,o){return Math.acos((n.x*o.x+n.y*o.y)/(Math.hypot(n.x,n.y)*Math.hypot(o.x,o.y)))},getHatVector:function(n){return new t.Point(n.x,n.y).multiply(1/Math.hypot(n.x,n.y))},getBisector:function(n,o,d){var a=t.util.createVector(n,o),g=t.util.createVector(n,d),v=t.util.calcAngleBetweenVectors(a,g),_=t.util.calcAngleBetweenVectors(t.util.rotateVector(a,v),g),y=v*(_===0?1:-1)/2;return{vector:t.util.getHatVector(t.util.rotateVector(a,y)),angle:v}},projectStrokeOnPoints:function(n,o,d){var a=[],g=o.strokeWidth/2,v=o.strokeUniform?new t.Point(1/o.scaleX,1/o.scaleY):new t.Point(1,1),_=function(y){var T=g/Math.hypot(y.x,y.y);return new t.Point(y.x*T*v.x,y.y*T*v.y)};return n.length<=1||n.forEach(function(y,T){var P=new t.Point(y.x,y.y),D,B;T===0?(B=n[T+1],D=d?_(t.util.createVector(B,P)).addEquals(P):n[n.length-1]):T===n.length-1?(D=n[T-1],B=d?_(t.util.createVector(D,P)).addEquals(P):n[0]):(D=n[T-1],B=n[T+1]);var j=t.util.getBisector(P,D,B),z=j.vector,ee=j.angle,ne,ie;if(o.strokeLineJoin==="miter"&&(ne=-g/Math.sin(ee/2),ie=new t.Point(z.x*ne*v.x,z.y*ne*v.y),Math.hypot(ie.x,ie.y)/g<=o.strokeMiterLimit)){a.push(P.add(ie)),a.push(P.subtract(ie));return}ne=-g*Math.SQRT2,ie=new t.Point(z.x*ne*v.x,z.y*ne*v.y),a.push(P.add(ie)),a.push(P.subtract(ie))}),a},transformPoint:function(n,o,d){return d?new t.Point(o[0]*n.x+o[2]*n.y,o[1]*n.x+o[3]*n.y):new t.Point(o[0]*n.x+o[2]*n.y+o[4],o[1]*n.x+o[3]*n.y+o[5])},makeBoundingBoxFromPoints:function(n,o){if(o)for(var d=0;d<n.length;d++)n[d]=t.util.transformPoint(n[d],o);var a=[n[0].x,n[1].x,n[2].x,n[3].x],g=t.util.array.min(a),v=t.util.array.max(a),_=v-g,y=[n[0].y,n[1].y,n[2].y,n[3].y],T=t.util.array.min(y),P=t.util.array.max(y),D=P-T;return{left:g,top:T,width:_,height:D}},invertTransform:function(n){var o=1/(n[0]*n[3]-n[1]*n[2]),d=[o*n[3],-o*n[1],-o*n[2],o*n[0]],a=t.util.transformPoint({x:n[4],y:n[5]},d,!0);return d[4]=-a.x,d[5]=-a.y,d},toFixed:function(n,o){return parseFloat(Number(n).toFixed(o))},parseUnit:function(n,o){var d=/\D{0,2}$/.exec(n),a=parseFloat(n);switch(o||(o=t.Text.DEFAULT_SVG_FONT_SIZE),d[0]){case"mm":return a*t.DPI/25.4;case"cm":return a*t.DPI/2.54;case"in":return a*t.DPI;case"pt":return a*t.DPI/72;case"pc":return a*t.DPI/72*12;case"em":return a*o;default:return a}},falseFunction:function(){return!1},getKlass:function(n,o){return n=t.util.string.camelize(n.charAt(0).toUpperCase()+n.slice(1)),t.util.resolveNamespace(o)[n]},getSvgAttributes:function(n){var o=["instantiated_by_use","style","id","class"];switch(n){case"linearGradient":o=o.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":o=o.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":o=o.concat(["offset","stop-color","stop-opacity"]);break}return o},resolveNamespace:function(n){if(!n)return t;var o=n.split("."),d=o.length,a,g=h||t.window;for(a=0;a<d;++a)g=g[o[a]];return g},loadImage:function(n,o,d,a){if(!n){o&&o.call(d,n);return}var g=t.util.createImage(),v=function(){o&&o.call(d,g,!1),g=g.onload=g.onerror=null};g.onload=v,g.onerror=function(){t.log("Error loading "+g.src),o&&o.call(d,null,!0),g=g.onload=g.onerror=null},n.indexOf("data")!==0&&a!==void 0&&a!==null&&(g.crossOrigin=a),n.substring(0,14)==="data:image/svg"&&(g.onload=null,t.util.loadImageInDom(g,v)),g.src=n},loadImageInDom:function(n,o){var d=t.document.createElement("div");d.style.width=d.style.height="1px",d.style.left=d.style.top="-100%",d.style.position="absolute",d.appendChild(n),t.document.querySelector("body").appendChild(d),n.onload=function(){o(),d.parentNode.removeChild(d),d=null}},enlivenObjects:function(n,o,d,a){n=n||[];var g=[],v=0,_=n.length;function y(){++v===_&&o&&o(g.filter(function(T){return T}))}if(!_){o&&o(g);return}n.forEach(function(T,P){if(!T||!T.type){y();return}var D=t.util.getKlass(T.type,d);D.fromObject(T,function(B,j){j||(g[P]=B),a&&a(T,B,j),y()})})},enlivenObjectEnlivables:function(n,o,d){var a=t.Object.ENLIVEN_PROPS.filter(function(g){return!!n[g]});t.util.enlivenObjects(a.map(function(g){return n[g]}),function(g){var v={};a.forEach(function(_,y){v[_]=g[y],o&&(o[_]=g[y])}),d&&d(v)})},enlivenPatterns:function(n,o){n=n||[];function d(){++g===v&&o&&o(a)}var a=[],g=0,v=n.length;if(!v){o&&o(a);return}n.forEach(function(_,y){_&&_.source?new t.Pattern(_,function(T){a[y]=T,d()}):(a[y]=_,d())})},groupSVGElements:function(n,o,d){var a;return n&&n.length===1?(typeof d<"u"&&(n[0].sourcePath=d),n[0]):(o&&(o.width&&o.height?o.centerPoint={x:o.width/2,y:o.height/2}:(delete o.width,delete o.height)),a=new t.Group(n,o),typeof d<"u"&&(a.sourcePath=d),a)},populateWithProperties:function(n,o,d){if(d&&Array.isArray(d))for(var a=0,g=d.length;a<g;a++)d[a]in n&&(o[d[a]]=n[d[a]])},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(n){var o=t.util.createCanvasElement();return o.width=n.width,o.height=n.height,o.getContext("2d").drawImage(n,0,0),o},toDataURL:function(n,o,d){return n.toDataURL("image/"+o,d)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(n,o,d){return[n[0]*o[0]+n[2]*o[1],n[1]*o[0]+n[3]*o[1],n[0]*o[2]+n[2]*o[3],n[1]*o[2]+n[3]*o[3],d?0:n[0]*o[4]+n[2]*o[5]+n[4],d?0:n[1]*o[4]+n[3]*o[5]+n[5]]},qrDecompose:function(n){var o=c(n[1],n[0]),d=u(n[0],2)+u(n[1],2),a=i(d),g=(n[0]*n[3]-n[2]*n[1])/a,v=c(n[0]*n[2]+n[1]*n[3],d);return{angle:o/r,scaleX:a,scaleY:g,skewX:v/r,skewY:0,translateX:n[4],translateY:n[5]}},calcRotateMatrix:function(n){if(!n.angle)return t.iMatrix.concat();var o=t.util.degreesToRadians(n.angle),d=t.util.cos(o),a=t.util.sin(o);return[d,a,-a,d,0,0]},calcDimensionsMatrix:function(n){var o=typeof n.scaleX>"u"?1:n.scaleX,d=typeof n.scaleY>"u"?1:n.scaleY,a=[n.flipX?-o:o,0,0,n.flipY?-d:d,0,0],g=t.util.multiplyTransformMatrices,v=t.util.degreesToRadians;return n.skewX&&(a=g(a,[1,0,Math.tan(v(n.skewX)),1],!0)),n.skewY&&(a=g(a,[1,Math.tan(v(n.skewY)),0,1],!0)),a},composeMatrix:function(n){var o=[1,0,0,1,n.translateX||0,n.translateY||0],d=t.util.multiplyTransformMatrices;return n.angle&&(o=d(o,t.util.calcRotateMatrix(n))),(n.scaleX!==1||n.scaleY!==1||n.skewX||n.skewY||n.flipX||n.flipY)&&(o=d(o,t.util.calcDimensionsMatrix(n))),o},resetObjectTransform:function(n){n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},saveObjectTransform:function(n){return{scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}},isTransparent:function(n,o,d,a){a>0&&(o>a?o-=a:o=0,d>a?d-=a:d=0);var g=!0,v,_,y=n.getImageData(o,d,a*2||1,a*2||1),T=y.data.length;for(v=3;v<T&&(_=y.data[v],g=_<=0,g!==!1);v+=4);return y=null,g},parsePreserveAspectRatioAttribute:function(n){var o="meet",d="Mid",a="Mid",g=n.split(" "),v;return g&&g.length&&(o=g.pop(),o!=="meet"&&o!=="slice"?(v=o,o="meet"):g.length&&(v=g.pop())),d=v!=="none"?v.slice(1,4):"none",a=v!=="none"?v.slice(5,8):"none",{meetOrSlice:o,alignX:d,alignY:a}},clearFabricFontCache:function(n){n=(n||"").toLowerCase(),n?t.charWidthsCache[n]&&delete t.charWidthsCache[n]:t.charWidthsCache={}},limitDimsByArea:function(n,o){var d=Math.sqrt(o*n),a=Math.floor(o/d);return{x:Math.floor(d),y:a}},capValue:function(n,o,d){return Math.max(n,Math.min(o,d))},findScaleToFit:function(n,o){return Math.min(o.width/n.width,o.height/n.height)},findScaleToCover:function(n,o){return Math.max(o.width/n.width,o.height/n.height)},matrixToSVG:function(n){return"matrix("+n.map(function(o){return t.util.toFixed(o,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(n,o){var d=t.util.invertTransform(o),a=t.util.multiplyTransformMatrices(d,n.calcOwnMatrix());t.util.applyTransformToObject(n,a)},addTransformToObject:function(n,o){t.util.applyTransformToObject(n,t.util.multiplyTransformMatrices(o,n.calcOwnMatrix()))},applyTransformToObject:function(n,o){var d=t.util.qrDecompose(o),a=new t.Point(d.translateX,d.translateY);n.flipX=!1,n.flipY=!1,n.set("scaleX",d.scaleX),n.set("scaleY",d.scaleY),n.skewX=d.skewX,n.skewY=d.skewY,n.angle=d.angle,n.setPositionByOrigin(a,"center","center")},sizeAfterTransform:function(n,o,d){var a=n/2,g=o/2,v=[{x:-a,y:-g},{x:a,y:-g},{x:-a,y:g},{x:a,y:g}],_=t.util.calcDimensionsMatrix(d),y=t.util.makeBoundingBoxFromPoints(v,_);return{x:y.width,y:y.height}},mergeClipPaths:function(n,o){var d=n,a=o;d.inverted&&!a.inverted&&(d=o,a=n),t.util.applyTransformToObject(a,t.util.multiplyTransformMatrices(t.util.invertTransform(d.calcTransformMatrix()),a.calcTransformMatrix()));var g=d.inverted&&a.inverted;return g&&(d.inverted=a.inverted=!1),new t.Group([d],{clipPath:a,inverted:g})},hasStyleChanged:function(n,o,d){return d=d||!1,n.fill!==o.fill||n.stroke!==o.stroke||n.strokeWidth!==o.strokeWidth||n.fontSize!==o.fontSize||n.fontFamily!==o.fontFamily||n.fontWeight!==o.fontWeight||n.fontStyle!==o.fontStyle||n.deltaY!==o.deltaY||d&&(n.overline!==o.overline||n.underline!==o.underline||n.linethrough!==o.linethrough)},stylesToArray:function(d,o){for(var d=t.util.object.clone(d,!0),a=o.split(`
`),g=-1,v={},_=[],y=0;y<a.length;y++){if(!d[y]){g+=a[y].length;continue}for(var T=0;T<a[y].length;T++){g++;var P=d[y][T];if(P){var D=t.util.hasStyleChanged(v,P,!0);D?_.push({start:g,end:g+1,style:P}):_[_.length-1].end++}v=P||{}}}return _},stylesFromArray:function(n,o){if(!Array.isArray(n))return n;for(var d=o.split(`
`),a=-1,g=0,v={},_=0;_<d.length;_++)for(var y=0;y<d[_].length;y++)a++,n[g]&&n[g].start<=a&&a<n[g].end&&(v[_]=v[_]||{},v[_][y]=Object.assign({},n[g].style),a===n[g].end-1&&g++);return v}}}(f),function(){var h=Array.prototype.join,i={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function u(O,I,k,R,Y,F,A,$,U,Q,K){var le=t.util.cos(O),de=t.util.sin(O),ve=t.util.cos(I),te=t.util.sin(I),X=k*Y*ve-R*F*te+A,oe=R*Y*ve+k*F*te+$,ue=Q+U*(-k*Y*de-R*F*le),q=K+U*(-R*Y*de+k*F*le),fe=X+U*(k*Y*te+R*F*ve),_e=oe+U*(R*Y*te-k*F*ve);return["C",ue,q,fe,_e,X,oe]}function r(O,I,k,R,Y,F,A){var $=Math.PI,U=A*$/180,Q=t.util.sin(U),K=t.util.cos(U),le=0,de=0;k=Math.abs(k),R=Math.abs(R);var ve=-K*O*.5-Q*I*.5,te=-K*I*.5+Q*O*.5,X=k*k,oe=R*R,ue=te*te,q=ve*ve,fe=X*oe-X*ue-oe*q,_e=0;if(fe<0){var Ee=Math.sqrt(1-fe/(X*oe));k*=Ee,R*=Ee}else _e=(Y===F?-1:1)*Math.sqrt(fe/(X*ue+oe*q));var Ce=_e*k*te/R,se=-_e*R*ve/k,xe=K*Ce-Q*se+O*.5,Me=Q*Ce+K*se+I*.5,Be=s(1,0,(ve-Ce)/k,(te-se)/R),Ze=s((ve-Ce)/k,(te-se)/R,(-ve-Ce)/k,(-te-se)/R);F===0&&Ze>0?Ze-=2*$:F===1&&Ze<0&&(Ze+=2*$);for(var Ye=Math.ceil(Math.abs(Ze/$*2)),at=[],tt=Ze/Ye,Kt=8/3*Math.sin(tt/4)*Math.sin(tt/4)/Math.sin(tt/2),fn=Be+tt,Et=0;Et<Ye;Et++)at[Et]=u(Be,fn,K,Q,k,R,xe,Me,Kt,le,de),le=at[Et][5],de=at[Et][6],Be=fn,fn+=tt;return at}function s(O,I,k,R){var Y=Math.atan2(I,O),F=Math.atan2(R,k);return F>=Y?F-Y:2*Math.PI-(Y-F)}function n(O,I,k,R,Y,F,A,$){var U;if(t.cachesBoundsOfCurve&&(U=h.call(arguments),t.boundsOfCurveCache[U]))return t.boundsOfCurveCache[U];var Q=Math.sqrt,K=Math.min,le=Math.max,de=Math.abs,ve=[],te=[[],[]],X,oe,ue,q,fe,_e,Ee,Ce;oe=6*O-12*k+6*Y,X=-3*O+9*k-9*Y+3*A,ue=3*k-3*O;for(var se=0;se<2;++se){if(se>0&&(oe=6*I-12*R+6*F,X=-3*I+9*R-9*F+3*$,ue=3*R-3*I),de(X)<1e-12){if(de(oe)<1e-12)continue;q=-ue/oe,0<q&&q<1&&ve.push(q);continue}Ee=oe*oe-4*ue*X,!(Ee<0)&&(Ce=Q(Ee),fe=(-oe+Ce)/(2*X),0<fe&&fe<1&&ve.push(fe),_e=(-oe-Ce)/(2*X),0<_e&&_e<1&&ve.push(_e))}for(var xe,Me,Be=ve.length,Ze=Be,Ye;Be--;)q=ve[Be],Ye=1-q,xe=Ye*Ye*Ye*O+3*Ye*Ye*q*k+3*Ye*q*q*Y+q*q*q*A,te[0][Be]=xe,Me=Ye*Ye*Ye*I+3*Ye*Ye*q*R+3*Ye*q*q*F+q*q*q*$,te[1][Be]=Me;te[0][Ze]=O,te[1][Ze]=I,te[0][Ze+1]=A,te[1][Ze+1]=$;var at=[{x:K.apply(null,te[0]),y:K.apply(null,te[1])},{x:le.apply(null,te[0]),y:le.apply(null,te[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[U]=at),at}function o(O,I,k){for(var R=k[1],Y=k[2],F=k[3],A=k[4],$=k[5],U=k[6],Q=k[7],K=r(U-O,Q-I,R,Y,A,$,F),le=0,de=K.length;le<de;le++)K[le][1]+=O,K[le][2]+=I,K[le][3]+=O,K[le][4]+=I,K[le][5]+=O,K[le][6]+=I;return K}function d(O){var I=0,k=0,R=O.length,Y=0,F=0,A,$,U,Q=[],K,le,de;for($=0;$<R;++$){switch(U=!1,A=O[$].slice(0),A[0]){case"l":A[0]="L",A[1]+=I,A[2]+=k;case"L":I=A[1],k=A[2];break;case"h":A[1]+=I;case"H":A[0]="L",A[2]=k,I=A[1];break;case"v":A[1]+=k;case"V":A[0]="L",k=A[1],A[1]=I,A[2]=k;break;case"m":A[0]="M",A[1]+=I,A[2]+=k;case"M":I=A[1],k=A[2],Y=A[1],F=A[2];break;case"c":A[0]="C",A[1]+=I,A[2]+=k,A[3]+=I,A[4]+=k,A[5]+=I,A[6]+=k;case"C":le=A[3],de=A[4],I=A[5],k=A[6];break;case"s":A[0]="S",A[1]+=I,A[2]+=k,A[3]+=I,A[4]+=k;case"S":K==="C"?(le=2*I-le,de=2*k-de):(le=I,de=k),I=A[3],k=A[4],A[0]="C",A[5]=A[3],A[6]=A[4],A[3]=A[1],A[4]=A[2],A[1]=le,A[2]=de,le=A[3],de=A[4];break;case"q":A[0]="Q",A[1]+=I,A[2]+=k,A[3]+=I,A[4]+=k;case"Q":le=A[1],de=A[2],I=A[3],k=A[4];break;case"t":A[0]="T",A[1]+=I,A[2]+=k;case"T":K==="Q"?(le=2*I-le,de=2*k-de):(le=I,de=k),A[0]="Q",I=A[1],k=A[2],A[1]=le,A[2]=de,A[3]=I,A[4]=k;break;case"a":A[0]="A",A[6]+=I,A[7]+=k;case"A":U=!0,Q=Q.concat(o(I,k,A)),I=A[6],k=A[7];break;case"z":case"Z":I=Y,k=F;break}U||Q.push(A),K=A[0]}return Q}function a(O,I,k,R){return Math.sqrt((k-O)*(k-O)+(R-I)*(R-I))}function g(O){return O*O*O}function v(O){return 3*O*O*(1-O)}function _(O){return 3*O*(1-O)*(1-O)}function y(O){return(1-O)*(1-O)*(1-O)}function T(O,I,k,R,Y,F,A,$){return function(U){var Q=g(U),K=v(U),le=_(U),de=y(U);return{x:A*Q+Y*K+k*le+O*de,y:$*Q+F*K+R*le+I*de}}}function P(O,I,k,R,Y,F,A,$){return function(U){var Q=1-U,K=3*Q*Q*(k-O)+6*Q*U*(Y-k)+3*U*U*(A-Y),le=3*Q*Q*(R-I)+6*Q*U*(F-R)+3*U*U*($-F);return Math.atan2(le,K)}}function D(O){return O*O}function B(O){return 2*O*(1-O)}function j(O){return(1-O)*(1-O)}function z(O,I,k,R,Y,F){return function(A){var $=D(A),U=B(A),Q=j(A);return{x:Y*$+k*U+O*Q,y:F*$+R*U+I*Q}}}function ee(O,I,k,R,Y,F){return function(A){var $=1-A,U=2*$*(k-O)+2*A*(Y-k),Q=2*$*(R-I)+2*A*(F-R);return Math.atan2(Q,U)}}function ne(O,I,k){var R={x:I,y:k},Y,F=0,A;for(A=1;A<=100;A+=1)Y=O(A/100),F+=a(R.x,R.y,Y.x,Y.y),R=Y;return F}function ie(O,I){for(var k=0,R=0,Y=O.iterator,F={x:O.x,y:O.y},A,$,U=.01,Q=O.angleFinder,K;R<I&&U>1e-4;)A=Y(k),K=k,$=a(F.x,F.y,A.x,A.y),$+R>I?(k-=U,U/=2):(F=A,k+=U,R+=$);return A.angle=Q(K),A}function Z(O){for(var I=0,k=O.length,R,Y=0,F=0,A=0,$=0,U=[],Q,K,le,de=0;de<k;de++){switch(R=O[de],K={x:Y,y:F,command:R[0]},R[0]){case"M":K.length=0,A=Y=R[1],$=F=R[2];break;case"L":K.length=a(Y,F,R[1],R[2]),Y=R[1],F=R[2];break;case"C":Q=T(Y,F,R[1],R[2],R[3],R[4],R[5],R[6]),le=P(Y,F,R[1],R[2],R[3],R[4],R[5],R[6]),K.iterator=Q,K.angleFinder=le,K.length=ne(Q,Y,F),Y=R[5],F=R[6];break;case"Q":Q=z(Y,F,R[1],R[2],R[3],R[4]),le=ee(Y,F,R[1],R[2],R[3],R[4]),K.iterator=Q,K.angleFinder=le,K.length=ne(Q,Y,F),Y=R[3],F=R[4];break;case"Z":case"z":K.destX=A,K.destY=$,K.length=a(Y,F,A,$),Y=A,F=$;break}I+=K.length,U.push(K)}return U.push({length:I,x:Y,y:F}),U}function re(O,I,k){k||(k=Z(O));for(var R=0;I-k[R].length>0&&R<k.length-2;)I-=k[R].length,R++;var Y=k[R],F=I/Y.length,A=Y.command,$=O[R],U;switch(A){case"M":return{x:Y.x,y:Y.y,angle:0};case"Z":case"z":return U=new t.Point(Y.x,Y.y).lerp(new t.Point(Y.destX,Y.destY),F),U.angle=Math.atan2(Y.destY-Y.y,Y.destX-Y.x),U;case"L":return U=new t.Point(Y.x,Y.y).lerp(new t.Point($[1],$[2]),F),U.angle=Math.atan2($[2]-Y.y,$[1]-Y.x),U;case"C":return ie(Y,I);case"Q":return ie(Y,I)}}function pe(O){var I=[],k=[],R,Y,F=t.rePathCommand,A="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",$="("+A+")"+t.commaWsp,U="([01])"+t.commaWsp+"?",Q=$+"?"+$+"?"+$+U+U+$+"?("+A+")",K=new RegExp(Q,"g"),le,de,ve;if(!O||!O.match)return I;ve=O.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var te=0,X,oe=ve.length;te<oe;te++){R=ve[te],de=R.slice(1).trim(),k.length=0;var ue=R.charAt(0);if(X=[ue],ue.toLowerCase()==="a")for(var q;q=K.exec(de);)for(var fe=1;fe<q.length;fe++)k.push(q[fe]);else for(;le=F.exec(de);)k.push(le[0]);for(var fe=0,_e=k.length;fe<_e;fe++)Y=parseFloat(k[fe]),isNaN(Y)||X.push(Y);var Ee=i[ue.toLowerCase()],Ce=c[ue]||ue;if(X.length-1>Ee)for(var se=1,xe=X.length;se<xe;se+=Ee)I.push([ue].concat(X.slice(se,se+Ee))),ue=Ce;else I.push(X)}return I}function me(O,I){var k=[],R,Y=new t.Point(O[0].x,O[0].y),F=new t.Point(O[1].x,O[1].y),A=O.length,$=1,U=0,Q=A>2;for(I=I||0,Q&&($=O[2].x<F.x?-1:O[2].x===F.x?0:1,U=O[2].y<F.y?-1:O[2].y===F.y?0:1),k.push(["M",Y.x-$*I,Y.y-U*I]),R=1;R<A;R++){if(!Y.eq(F)){var K=Y.midPointFrom(F);k.push(["Q",Y.x,Y.y,K.x,K.y])}Y=O[R],R+1<O.length&&(F=O[R+1])}return Q&&($=Y.x>O[R-2].x?1:Y.x===O[R-2].x?0:-1,U=Y.y>O[R-2].y?1:Y.y===O[R-2].y?0:-1),k.push(["L",Y.x+$*I,Y.y+U*I]),k}function G(O,I,k){return k&&(I=t.util.multiplyTransformMatrices(I,[1,0,0,1,-k.x,-k.y])),O.map(function(R){for(var Y=R.slice(0),F={},A=1;A<R.length-1;A+=2)F.x=R[A],F.y=R[A+1],F=t.util.transformPoint(F,I),Y[A]=F.x,Y[A+1]=F.y;return Y})}t.util.joinPath=function(O){return O.map(function(I){return I.join(" ")}).join(" ")},t.util.parsePath=pe,t.util.makePathSimpler=d,t.util.getSmoothPathFromPoints=me,t.util.getPathSegmentsInfo=Z,t.util.getBoundsOfCurve=n,t.util.getPointOnPath=re,t.util.transformPath=G}(),function(){var h=Array.prototype.slice;function i(n,o){for(var d=h.call(arguments,2),a=[],g=0,v=n.length;g<v;g++)a[g]=d.length?n[g][o].apply(n[g],d):n[g][o].call(n[g]);return a}function c(n,o){return s(n,o,function(d,a){return d>=a})}function u(n,o){return s(n,o,function(d,a){return d<a})}function r(n,o){for(var d=n.length;d--;)n[d]=o;return n}function s(n,o,d){if(!(!n||n.length===0)){var a=n.length-1,g=o?n[a][o]:n[a];if(o)for(;a--;)d(n[a][o],g)&&(g=n[a][o]);else for(;a--;)d(n[a],g)&&(g=n[a]);return g}}t.util.array={fill:r,invoke:i,min:u,max:c}}(),function(){function h(c,u,r){if(r)if(!t.isLikelyNode&&u instanceof Element)c=u;else if(u instanceof Array){c=[];for(var s=0,n=u.length;s<n;s++)c[s]=h({},u[s],r)}else if(u&&typeof u=="object")for(var o in u)o==="canvas"||o==="group"?c[o]=null:u.hasOwnProperty(o)&&(c[o]=h({},u[o],r));else c=u;else for(var o in u)c[o]=u[o];return c}function i(c,u){return h({},c,u)}t.util.object={extend:h,clone:i},t.util.object.extend(t.util,t.Observable)}(),function(){function h(s){return s.replace(/-+(.)?/g,function(n,o){return o?o.toUpperCase():""})}function i(s,n){return s.charAt(0).toUpperCase()+(n?s.slice(1):s.slice(1).toLowerCase())}function c(s){return s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(s){var n=0,o,d=[];for(n=0,o;n<s.length;n++)(o=r(s,n))!==!1&&d.push(o);return d}function r(s,n){var o=s.charCodeAt(n);if(isNaN(o))return"";if(o<55296||o>57343)return s.charAt(n);if(55296<=o&&o<=56319){if(s.length<=n+1)throw"High surrogate without following low surrogate";var d=s.charCodeAt(n+1);if(56320>d||d>57343)throw"High surrogate without following low surrogate";return s.charAt(n)+s.charAt(n+1)}if(n===0)throw"Low surrogate without preceding high surrogate";var a=s.charCodeAt(n-1);if(55296>a||a>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:h,capitalize:i,escapeXml:c,graphemeSplit:u}}(),function(){var h=Array.prototype.slice,i=function(){},c=function(){for(var o in{toString:1})if(o==="toString")return!1;return!0}(),u=function(o,d,a){for(var g in d)g in o.prototype&&typeof o.prototype[g]=="function"&&(d[g]+"").indexOf("callSuper")>-1?o.prototype[g]=function(v){return function(){var _=this.constructor.superclass;this.constructor.superclass=a;var y=d[v].apply(this,arguments);if(this.constructor.superclass=_,v!=="initialize")return y}}(g):o.prototype[g]=d[g],c&&(d.toString!==Object.prototype.toString&&(o.prototype.toString=d.toString),d.valueOf!==Object.prototype.valueOf&&(o.prototype.valueOf=d.valueOf))};function r(){}function s(o){for(var d=null,a=this;a.constructor.superclass;){var g=a.constructor.superclass.prototype[o];if(a[o]!==g){d=g;break}a=a.constructor.superclass.prototype}return d?arguments.length>1?d.apply(this,h.call(arguments,1)):d.call(this):console.log("tried to callSuper "+o+", method not found in prototype chain",this)}function n(){var o=null,d=h.call(arguments,0);typeof d[0]=="function"&&(o=d.shift());function a(){this.initialize.apply(this,arguments)}a.superclass=o,a.subclasses=[],o&&(r.prototype=o.prototype,a.prototype=new r,o.subclasses.push(a));for(var g=0,v=d.length;g<v;g++)u(a,d[g],o);return a.prototype.initialize||(a.prototype.initialize=i),a.prototype.constructor=a,a.prototype.callSuper=s,a}t.util.createClass=n}(),function(){var h=!!t.document.createElement("div").attachEvent,i=["touchstart","touchmove","touchend"];t.util.addListener=function(u,r,s,n){u&&u.addEventListener(r,s,h?!1:n)},t.util.removeListener=function(u,r,s,n){u&&u.removeEventListener(r,s,h?!1:n)};function c(u){var r=u.changedTouches;return r&&r[0]?r[0]:u}t.util.getPointer=function(u){var r=u.target,s=t.util.getScrollLeftTop(r),n=c(u);return{x:n.clientX+s.left,y:n.clientY+s.top}},t.util.isTouchEvent=function(u){return i.indexOf(u.type)>-1||u.pointerType==="touch"}}(),function(){function h(n,o){var d=n.style;if(!d)return n;if(typeof o=="string")return n.style.cssText+=";"+o,o.indexOf("opacity")>-1?s(n,o.match(/opacity:\s*(\d?\.?\d*)/)[1]):n;for(var a in o)if(a==="opacity")s(n,o[a]);else{var g=a==="float"||a==="cssFloat"?typeof d.styleFloat>"u"?"cssFloat":"styleFloat":a;d.setProperty(g,o[a])}return n}var i=t.document.createElement("div"),c=typeof i.style.opacity=="string",u=typeof i.style.filter=="string",r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(n){return n};c?s=function(n,o){return n.style.opacity=o,n}:u&&(s=function(n,o){var d=n.style;return n.currentStyle&&!n.currentStyle.hasLayout&&(d.zoom=1),r.test(d.filter)?(o=o>=.9999?"":"alpha(opacity="+o*100+")",d.filter=d.filter.replace(r,o)):d.filter+=" alpha(opacity="+o*100+")",n}),t.util.setStyle=h}(),function(){var h=Array.prototype.slice;function i(y){return typeof y=="string"?t.document.getElementById(y):y}var c,u=function(y){return h.call(y,0)};try{c=u(t.document.childNodes)instanceof Array}catch{}c||(u=function(y){for(var T=new Array(y.length),P=y.length;P--;)T[P]=y[P];return T});function r(y,T){var P=t.document.createElement(y);for(var D in T)D==="class"?P.className=T[D]:D==="for"?P.htmlFor=T[D]:P.setAttribute(D,T[D]);return P}function s(y,T){y&&(" "+y.className+" ").indexOf(" "+T+" ")===-1&&(y.className+=(y.className?" ":"")+T)}function n(y,T,P){return typeof T=="string"&&(T=r(T,P)),y.parentNode&&y.parentNode.replaceChild(T,y),T.appendChild(y),T}function o(y){for(var T=0,P=0,D=t.document.documentElement,B=t.document.body||{scrollLeft:0,scrollTop:0};y&&(y.parentNode||y.host)&&(y=y.parentNode||y.host,y===t.document?(T=B.scrollLeft||D.scrollLeft||0,P=B.scrollTop||D.scrollTop||0):(T+=y.scrollLeft||0,P+=y.scrollTop||0),!(y.nodeType===1&&y.style.position==="fixed")););return{left:T,top:P}}function d(y){var T,P=y&&y.ownerDocument,D={left:0,top:0},B={left:0,top:0},j,z={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!P)return B;for(var ee in z)B[z[ee]]+=parseInt(a(y,ee),10)||0;return T=P.documentElement,typeof y.getBoundingClientRect<"u"&&(D=y.getBoundingClientRect()),j=o(y),{left:D.left+j.left-(T.clientLeft||0)+B.left,top:D.top+j.top-(T.clientTop||0)+B.top}}var a;t.document.defaultView&&t.document.defaultView.getComputedStyle?a=function(y,T){var P=t.document.defaultView.getComputedStyle(y,null);return P?P[T]:void 0}:a=function(y,T){var P=y.style[T];return!P&&y.currentStyle&&(P=y.currentStyle[T]),P},function(){var y=t.document.documentElement.style,T="userSelect"in y?"userSelect":"MozUserSelect"in y?"MozUserSelect":"WebkitUserSelect"in y?"WebkitUserSelect":"KhtmlUserSelect"in y?"KhtmlUserSelect":"";function P(B){return typeof B.onselectstart<"u"&&(B.onselectstart=t.util.falseFunction),T?B.style[T]="none":typeof B.unselectable=="string"&&(B.unselectable="on"),B}function D(B){return typeof B.onselectstart<"u"&&(B.onselectstart=null),T?B.style[T]="":typeof B.unselectable=="string"&&(B.unselectable=""),B}t.util.makeElementUnselectable=P,t.util.makeElementSelectable=D}();function g(y){var T=t.jsdomImplForWrapper(y);return T._canvas||T._image}function v(y){if(!!t.isLikelyNode){var T=t.jsdomImplForWrapper(y);T&&(T._image=null,T._canvas=null,T._currentSrc=null,T._attributes=null,T._classList=null)}}function _(y,T){y.imageSmoothingEnabled=y.imageSmoothingEnabled||y.webkitImageSmoothingEnabled||y.mozImageSmoothingEnabled||y.msImageSmoothingEnabled||y.oImageSmoothingEnabled,y.imageSmoothingEnabled=T}t.util.setImageSmoothing=_,t.util.getById=i,t.util.toArray=u,t.util.addClass=s,t.util.makeElement=r,t.util.wrapElement=n,t.util.getScrollLeftTop=o,t.util.getElementOffset=d,t.util.getNodeCanvas=g,t.util.cleanUpJsdomNode=v}(),function(){function h(u,r){return u+(/\?/.test(u)?"&":"?")+r}function i(){}function c(u,r){r||(r={});var s=r.method?r.method.toUpperCase():"GET",n=r.onComplete||function(){},o=new t.window.XMLHttpRequest,d=r.body||r.parameters;return o.onreadystatechange=function(){o.readyState===4&&(n(o),o.onreadystatechange=i)},s==="GET"&&(d=null,typeof r.parameters=="string"&&(u=h(u,r.parameters))),o.open(s,u,!0),(s==="POST"||s==="PUT")&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(d),o}t.util.request=c}(),t.log=console.log,t.warn=console.warn,function(){var h=t.util.object.extend,i=t.util.object.clone,c=[];t.util.object.extend(c,{cancelAll:function(){var g=this.splice(0);return g.forEach(function(v){v.cancel()}),g},cancelByCanvas:function(g){if(!g)return[];var v=this.filter(function(_){return typeof _.target=="object"&&_.target.canvas===g});return v.forEach(function(_){_.cancel()}),v},cancelByTarget:function(g){var v=this.findAnimationsByTarget(g);return v.forEach(function(_){_.cancel()}),v},findAnimationIndex:function(g){return this.indexOf(this.findAnimation(g))},findAnimation:function(g){return this.find(function(v){return v.cancel===g})},findAnimationsByTarget:function(g){return g?this.filter(function(v){return v.target===g}):[]}});function u(){return!1}function r(g,v,_,y){return-_*Math.cos(g/y*(Math.PI/2))+_+v}function s(g){g||(g={});var v=!1,_,y=function(){var T=t.runningAnimations.indexOf(_);return T>-1&&t.runningAnimations.splice(T,1)[0]};return _=h(i(g),{cancel:function(){return v=!0,y()},currentValue:"startValue"in g?g.startValue:0,completionRate:0,durationRate:0}),t.runningAnimations.push(_),d(function(T){var P=T||+new Date,D=g.duration||500,B=P+D,j,z=g.onChange||u,ee=g.abort||u,ne=g.onComplete||u,ie=g.easing||r,Z="startValue"in g?g.startValue.length>0:!1,re="startValue"in g?g.startValue:0,pe="endValue"in g?g.endValue:100,me=g.byValue||(Z?re.map(function(G,O){return pe[O]-re[O]}):pe-re);g.onStart&&g.onStart(),function G(O){j=O||+new Date;var I=j>B?D:j-P,k=I/D,R=Z?re.map(function(F,A){return ie(I,re[A],me[A],D)}):ie(I,re,me,D),Y=Math.abs(Z?(R[0]-re[0])/me[0]:(R-re)/me);if(_.currentValue=Z?R.slice():R,_.completionRate=Y,_.durationRate=k,!v){if(ee(R,Y,k)){y();return}if(j>B){_.currentValue=Z?pe.slice():pe,_.completionRate=1,_.durationRate=1,z(Z?pe.slice():pe,1,1),ne(pe,1,1),y();return}else z(R,Y,k),d(G)}}(P)}),_.cancel}var n=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(g){return t.window.setTimeout(g,1e3/60)},o=t.window.cancelAnimationFrame||t.window.clearTimeout;function d(){return n.apply(t.window,arguments)}function a(){return o.apply(t.window,arguments)}t.util.animate=s,t.util.requestAnimFrame=d,t.util.cancelAnimFrame=a,t.runningAnimations=c}(),function(){function h(c,u,r){var s="rgba("+parseInt(c[0]+r*(u[0]-c[0]),10)+","+parseInt(c[1]+r*(u[1]-c[1]),10)+","+parseInt(c[2]+r*(u[2]-c[2]),10);return s+=","+(c&&u?parseFloat(c[3]+r*(u[3]-c[3])):1),s+=")",s}function i(c,u,r,s){var n=new t.Color(c).getSource(),o=new t.Color(u).getSource(),d=s.onComplete,a=s.onChange;return s=s||{},t.util.animate(t.util.object.extend(s,{duration:r||500,startValue:n,endValue:o,byValue:o,easing:function(g,v,_,y){var T=s.colorEasing?s.colorEasing(g,y):1-Math.cos(g/y*(Math.PI/2));return h(v,_,T)},onComplete:function(g,v,_){if(d)return d(h(o,o,0),v,_)},onChange:function(g,v,_){if(a){if(Array.isArray(g))return a(h(g,g,0),v,_);a(g,v,_)}}}))}t.util.animateColor=i}(),function(){function h(O,I,k,R){return O<Math.abs(I)?(O=I,R=k/4):I===0&&O===0?R=k/(2*Math.PI)*Math.asin(1):R=k/(2*Math.PI)*Math.asin(I/O),{a:O,c:I,p:k,s:R}}function i(O,I,k){return O.a*Math.pow(2,10*(I-=1))*Math.sin((I*k-O.s)*(2*Math.PI)/O.p)}function c(O,I,k,R){return k*((O=O/R-1)*O*O+1)+I}function u(O,I,k,R){return O/=R/2,O<1?k/2*O*O*O+I:k/2*((O-=2)*O*O+2)+I}function r(O,I,k,R){return k*(O/=R)*O*O*O+I}function s(O,I,k,R){return-k*((O=O/R-1)*O*O*O-1)+I}function n(O,I,k,R){return O/=R/2,O<1?k/2*O*O*O*O+I:-k/2*((O-=2)*O*O*O-2)+I}function o(O,I,k,R){return k*(O/=R)*O*O*O*O+I}function d(O,I,k,R){return k*((O=O/R-1)*O*O*O*O+1)+I}function a(O,I,k,R){return O/=R/2,O<1?k/2*O*O*O*O*O+I:k/2*((O-=2)*O*O*O*O+2)+I}function g(O,I,k,R){return-k*Math.cos(O/R*(Math.PI/2))+k+I}function v(O,I,k,R){return k*Math.sin(O/R*(Math.PI/2))+I}function _(O,I,k,R){return-k/2*(Math.cos(Math.PI*O/R)-1)+I}function y(O,I,k,R){return O===0?I:k*Math.pow(2,10*(O/R-1))+I}function T(O,I,k,R){return O===R?I+k:k*(-Math.pow(2,-10*O/R)+1)+I}function P(O,I,k,R){return O===0?I:O===R?I+k:(O/=R/2,O<1?k/2*Math.pow(2,10*(O-1))+I:k/2*(-Math.pow(2,-10*--O)+2)+I)}function D(O,I,k,R){return-k*(Math.sqrt(1-(O/=R)*O)-1)+I}function B(O,I,k,R){return k*Math.sqrt(1-(O=O/R-1)*O)+I}function j(O,I,k,R){return O/=R/2,O<1?-k/2*(Math.sqrt(1-O*O)-1)+I:k/2*(Math.sqrt(1-(O-=2)*O)+1)+I}function z(O,I,k,R){var Y=1.70158,F=0,A=k;if(O===0)return I;if(O/=R,O===1)return I+k;F||(F=R*.3);var $=h(A,k,F,Y);return-i($,O,R)+I}function ee(O,I,k,R){var Y=1.70158,F=0,A=k;if(O===0)return I;if(O/=R,O===1)return I+k;F||(F=R*.3);var $=h(A,k,F,Y);return $.a*Math.pow(2,-10*O)*Math.sin((O*R-$.s)*(2*Math.PI)/$.p)+$.c+I}function ne(O,I,k,R){var Y=1.70158,F=0,A=k;if(O===0)return I;if(O/=R/2,O===2)return I+k;F||(F=R*(.3*1.5));var $=h(A,k,F,Y);return O<1?-.5*i($,O,R)+I:$.a*Math.pow(2,-10*(O-=1))*Math.sin((O*R-$.s)*(2*Math.PI)/$.p)*.5+$.c+I}function ie(O,I,k,R,Y){return Y===void 0&&(Y=1.70158),k*(O/=R)*O*((Y+1)*O-Y)+I}function Z(O,I,k,R,Y){return Y===void 0&&(Y=1.70158),k*((O=O/R-1)*O*((Y+1)*O+Y)+1)+I}function re(O,I,k,R,Y){return Y===void 0&&(Y=1.70158),O/=R/2,O<1?k/2*(O*O*(((Y*=1.525)+1)*O-Y))+I:k/2*((O-=2)*O*(((Y*=1.525)+1)*O+Y)+2)+I}function pe(O,I,k,R){return k-me(R-O,0,k,R)+I}function me(O,I,k,R){return(O/=R)<1/2.75?k*(7.5625*O*O)+I:O<2/2.75?k*(7.5625*(O-=1.5/2.75)*O+.75)+I:O<2.5/2.75?k*(7.5625*(O-=2.25/2.75)*O+.9375)+I:k*(7.5625*(O-=2.625/2.75)*O+.984375)+I}function G(O,I,k,R){return O<R/2?pe(O*2,0,k,R)*.5+I:me(O*2-R,0,k,R)*.5+k*.5+I}t.util.ease={easeInQuad:function(O,I,k,R){return k*(O/=R)*O+I},easeOutQuad:function(O,I,k,R){return-k*(O/=R)*(O-2)+I},easeInOutQuad:function(O,I,k,R){return O/=R/2,O<1?k/2*O*O+I:-k/2*(--O*(O-2)-1)+I},easeInCubic:function(O,I,k,R){return k*(O/=R)*O*O+I},easeOutCubic:c,easeInOutCubic:u,easeInQuart:r,easeOutQuart:s,easeInOutQuart:n,easeInQuint:o,easeOutQuint:d,easeInOutQuint:a,easeInSine:g,easeOutSine:v,easeInOutSine:_,easeInExpo:y,easeOutExpo:T,easeInOutExpo:P,easeInCirc:D,easeOutCirc:B,easeInOutCirc:j,easeInElastic:z,easeOutElastic:ee,easeInOutElastic:ne,easeInBack:ie,easeOutBack:Z,easeInOutBack:re,easeInBounce:pe,easeOutBounce:me,easeInOutBounce:G}}(),function(h){var i=h.fabric||(h.fabric={}),c=i.util.object.extend,u=i.util.object.clone,r=i.util.toFixed,s=i.util.parseUnit,n=i.util.multiplyTransformMatrices,o=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],d=["symbol","image","marker","pattern","view","svg"],a=["pattern","defs","symbol","metadata","clipPath","mask","desc"],g=["symbol","g","a","svg","clipPath","defs"],v={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},_={stroke:"strokeOpacity",fill:"fillOpacity"},y="font-size",T="clip-path";i.svgValidTagNamesRegEx=B(o),i.svgViewBoxElementsRegEx=B(d),i.svgInvalidAncestorsRegEx=B(a),i.svgValidParentsRegEx=B(g),i.cssRules={},i.gradientDefs={},i.clipPaths={};function P(F){return F in v?v[F]:F}function D(F,A,$,U){var Q=Array.isArray(A),K;if((F==="fill"||F==="stroke")&&A==="none")A="";else{if(F==="strokeUniform")return A==="non-scaling-stroke";if(F==="strokeDashArray")A==="none"?A=null:A=A.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(F==="transformMatrix")$&&$.transformMatrix?A=n($.transformMatrix,i.parseTransformAttribute(A)):A=i.parseTransformAttribute(A);else if(F==="visible")A=A!=="none"&&A!=="hidden",$&&$.visible===!1&&(A=!1);else if(F==="opacity")A=parseFloat(A),$&&typeof $.opacity<"u"&&(A*=$.opacity);else if(F==="textAnchor")A=A==="start"?"left":A==="end"?"right":"center";else if(F==="charSpacing")K=s(A,U)/U*1e3;else if(F==="paintFirst"){var le=A.indexOf("fill"),de=A.indexOf("stroke"),A="fill";(le>-1&&de>-1&&de<le||le===-1&&de>-1)&&(A="stroke")}else{if(F==="href"||F==="xlink:href"||F==="font")return A;if(F==="imageSmoothing")return A==="optimizeQuality";K=Q?A.map(s):s(A,U)}}return!Q&&isNaN(K)?A:K}function B(F){return new RegExp("^("+F.join("|")+")\\b","i")}function j(F){for(var A in _)if(!(typeof F[_[A]]>"u"||F[A]==="")){if(typeof F[A]>"u"){if(!i.Object.prototype[A])continue;F[A]=i.Object.prototype[A]}if(F[A].indexOf("url(")!==0){var $=new i.Color(F[A]);F[A]=$.setAlpha(r($.getAlpha()*F[_[A]],2)).toRgba()}}return F}function z(F,A){var $,U=[],Q,K,le;for(K=0,le=A.length;K<le;K++)$=A[K],Q=F.getElementsByTagName($),U=U.concat(Array.prototype.slice.call(Q));return U}i.parseTransformAttribute=function(){function F(se,xe){var Me=i.util.cos(xe[0]),Be=i.util.sin(xe[0]),Ze=0,Ye=0;xe.length===3&&(Ze=xe[1],Ye=xe[2]),se[0]=Me,se[1]=Be,se[2]=-Be,se[3]=Me,se[4]=Ze-(Me*Ze-Be*Ye),se[5]=Ye-(Be*Ze+Me*Ye)}function A(se,xe){var Me=xe[0],Be=xe.length===2?xe[1]:xe[0];se[0]=Me,se[3]=Be}function $(se,xe,Me){se[Me]=Math.tan(i.util.degreesToRadians(xe[0]))}function U(se,xe){se[4]=xe[0],xe.length===2&&(se[5]=xe[1])}var Q=i.iMatrix,K=i.reNum,le=i.commaWsp,de="(?:(skewX)\\s*\\(\\s*("+K+")\\s*\\))",ve="(?:(skewY)\\s*\\(\\s*("+K+")\\s*\\))",te="(?:(rotate)\\s*\\(\\s*("+K+")(?:"+le+"("+K+")"+le+"("+K+"))?\\s*\\))",X="(?:(scale)\\s*\\(\\s*("+K+")(?:"+le+"("+K+"))?\\s*\\))",oe="(?:(translate)\\s*\\(\\s*("+K+")(?:"+le+"("+K+"))?\\s*\\))",ue="(?:(matrix)\\s*\\(\\s*("+K+")"+le+"("+K+")"+le+"("+K+")"+le+"("+K+")"+le+"("+K+")"+le+"("+K+")\\s*\\))",q="(?:"+ue+"|"+oe+"|"+X+"|"+te+"|"+de+"|"+ve+")",fe="(?:"+q+"(?:"+le+"*"+q+")*)",_e="^\\s*(?:"+fe+"?)\\s*$",Ee=new RegExp(_e),Ce=new RegExp(q,"g");return function(se){var xe=Q.concat(),Me=[];if(!se||se&&!Ee.test(se))return xe;se.replace(Ce,function(Ze){var Ye=new RegExp(q).exec(Ze).filter(function(Kt){return!!Kt}),at=Ye[1],tt=Ye.slice(2).map(parseFloat);switch(at){case"translate":U(xe,tt);break;case"rotate":tt[0]=i.util.degreesToRadians(tt[0]),F(xe,tt);break;case"scale":A(xe,tt);break;case"skewX":$(xe,tt,2);break;case"skewY":$(xe,tt,1);break;case"matrix":xe=tt;break}Me.push(xe.concat()),xe=Q.concat()});for(var Be=Me[0];Me.length>1;)Me.shift(),Be=i.util.multiplyTransformMatrices(Be,Me[0]);return Be}}();function ee(F,A){var $,U;F.replace(/;\s*$/,"").split(";").forEach(function(Q){var K=Q.split(":");$=K[0].trim().toLowerCase(),U=K[1].trim(),A[$]=U})}function ne(F,A){var $,U;for(var Q in F)typeof F[Q]>"u"||($=Q.toLowerCase(),U=F[Q],A[$]=U)}function ie(F,A){var $={};for(var U in i.cssRules[A])if(Z(F,U.split(" ")))for(var Q in i.cssRules[A][U])$[Q]=i.cssRules[A][U][Q];return $}function Z(F,A){var $,U=!0;return $=pe(F,A.pop()),$&&A.length&&(U=re(F,A)),$&&U&&A.length===0}function re(F,A){for(var $,U=!0;F.parentNode&&F.parentNode.nodeType===1&&A.length;)U&&($=A.pop()),F=F.parentNode,U=pe(F,$);return A.length===0}function pe(F,A){var $=F.nodeName,U=F.getAttribute("class"),Q=F.getAttribute("id"),K,le;if(K=new RegExp("^"+$,"i"),A=A.replace(K,""),Q&&A.length&&(K=new RegExp("#"+Q+"(?![a-zA-Z\\-]+)","i"),A=A.replace(K,"")),U&&A.length)for(U=U.split(" "),le=U.length;le--;)K=new RegExp("\\."+U[le]+"(?![a-zA-Z\\-]+)","i"),A=A.replace(K,"");return A.length===0}function me(F,A){var $;if(F.getElementById&&($=F.getElementById(A)),$)return $;var U,Q,K,le=F.getElementsByTagName("*");for(Q=0,K=le.length;Q<K;Q++)if(U=le[Q],A===U.getAttribute("id"))return U}function G(F){for(var A=z(F,["use","svg:use"]),$=0;A.length&&$<A.length;){var U=A[$],Q=U.getAttribute("xlink:href")||U.getAttribute("href");if(Q===null)return;var K=Q.slice(1),le=U.getAttribute("x")||0,de=U.getAttribute("y")||0,ve=me(F,K).cloneNode(!0),te=(ve.getAttribute("transform")||"")+" translate("+le+", "+de+")",X,oe=A.length,ue,q,fe,_e,Ee=i.svgNS;if(I(ve),/^svg$/i.test(ve.nodeName)){var Ce=ve.ownerDocument.createElementNS(Ee,"g");for(q=0,fe=ve.attributes,_e=fe.length;q<_e;q++)ue=fe.item(q),Ce.setAttributeNS(Ee,ue.nodeName,ue.nodeValue);for(;ve.firstChild;)Ce.appendChild(ve.firstChild);ve=Ce}for(q=0,fe=U.attributes,_e=fe.length;q<_e;q++)ue=fe.item(q),!(ue.nodeName==="x"||ue.nodeName==="y"||ue.nodeName==="xlink:href"||ue.nodeName==="href")&&(ue.nodeName==="transform"?te=ue.nodeValue+" "+te:ve.setAttribute(ue.nodeName,ue.nodeValue));ve.setAttribute("transform",te),ve.setAttribute("instantiated_by_use","1"),ve.removeAttribute("id"),X=U.parentNode,X.replaceChild(ve,U),A.length===oe&&$++}}var O=new RegExp("^\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*$");function I(F){if(!i.svgViewBoxElementsRegEx.test(F.nodeName))return{};var A=F.getAttribute("viewBox"),$=1,U=1,Q=0,K=0,le,de,ve,te,X=F.getAttribute("width"),oe=F.getAttribute("height"),ue=F.getAttribute("x")||0,q=F.getAttribute("y")||0,fe=F.getAttribute("preserveAspectRatio")||"",_e=!A||!(A=A.match(O)),Ee=!X||!oe||X==="100%"||oe==="100%",Ce=_e&&Ee,se={},xe="",Me=0,Be=0;if(se.width=0,se.height=0,se.toBeParsed=Ce,_e&&(ue||q)&&F.parentNode&&F.parentNode.nodeName!=="#document"&&(xe=" translate("+s(ue)+" "+s(q)+") ",ve=(F.getAttribute("transform")||"")+xe,F.setAttribute("transform",ve),F.removeAttribute("x"),F.removeAttribute("y")),Ce)return se;if(_e)return se.width=s(X),se.height=s(oe),se;if(Q=-parseFloat(A[1]),K=-parseFloat(A[2]),le=parseFloat(A[3]),de=parseFloat(A[4]),se.minX=Q,se.minY=K,se.viewBoxWidth=le,se.viewBoxHeight=de,Ee?(se.width=le,se.height=de):(se.width=s(X),se.height=s(oe),$=se.width/le,U=se.height/de),fe=i.util.parsePreserveAspectRatioAttribute(fe),fe.alignX!=="none"&&(fe.meetOrSlice==="meet"&&(U=$=$>U?U:$),fe.meetOrSlice==="slice"&&(U=$=$>U?$:U),Me=se.width-le*$,Be=se.height-de*$,fe.alignX==="Mid"&&(Me/=2),fe.alignY==="Mid"&&(Be/=2),fe.alignX==="Min"&&(Me=0),fe.alignY==="Min"&&(Be=0)),$===1&&U===1&&Q===0&&K===0&&ue===0&&q===0)return se;if((ue||q)&&F.parentNode.nodeName!=="#document"&&(xe=" translate("+s(ue)+" "+s(q)+") "),ve=xe+" matrix("+$+" 0 0 "+U+" "+(Q*$+Me)+" "+(K*U+Be)+") ",F.nodeName==="svg"){for(te=F.ownerDocument.createElementNS(i.svgNS,"g");F.firstChild;)te.appendChild(F.firstChild);F.appendChild(te)}else te=F,te.removeAttribute("x"),te.removeAttribute("y"),ve=te.getAttribute("transform")+ve;return te.setAttribute("transform",ve),se}function k(F,A){for(;F&&(F=F.parentNode);)if(F.nodeName&&A.test(F.nodeName.replace("svg:",""))&&!F.getAttribute("instantiated_by_use"))return!0;return!1}i.parseSVGDocument=function(F,A,$,U){if(!!F){G(F);var Q=i.Object.__uid++,K,le,de=I(F),ve=i.util.toArray(F.getElementsByTagName("*"));if(de.crossOrigin=U&&U.crossOrigin,de.svgUid=Q,ve.length===0&&i.isLikelyNode){ve=F.selectNodes('//*[name(.)!="svg"]');var te=[];for(K=0,le=ve.length;K<le;K++)te[K]=ve[K];ve=te}var X=ve.filter(function(ue){return I(ue),i.svgValidTagNamesRegEx.test(ue.nodeName.replace("svg:",""))&&!k(ue,i.svgInvalidAncestorsRegEx)});if(!X||X&&!X.length){A&&A([],{});return}var oe={};ve.filter(function(ue){return ue.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ue){var q=ue.getAttribute("id");oe[q]=i.util.toArray(ue.getElementsByTagName("*")).filter(function(fe){return i.svgValidTagNamesRegEx.test(fe.nodeName.replace("svg:",""))})}),i.gradientDefs[Q]=i.getGradientDefs(F),i.cssRules[Q]=i.getCSSRules(F),i.clipPaths[Q]=oe,i.parseElements(X,function(ue,q){A&&(A(ue,de,q,ve),delete i.gradientDefs[Q],delete i.cssRules[Q],delete i.clipPaths[Q])},u(de),$,U)}};function R(F,A){var $=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],U="xlink:href",Q=A.getAttribute(U).slice(1),K=me(F,Q);if(K&&K.getAttribute(U)&&R(F,K),$.forEach(function(de){K&&!A.hasAttribute(de)&&K.hasAttribute(de)&&A.setAttribute(de,K.getAttribute(de))}),!A.children.length)for(var le=K.cloneNode(!0);le.firstChild;)A.appendChild(le.firstChild);A.removeAttribute(U)}var Y=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+i.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+i.reNum+"))?\\s+(.*)");c(i,{parseFontDeclaration:function(F,A){var $=F.match(Y);if(!!$){var U=$[1],Q=$[3],K=$[4],le=$[5],de=$[6];U&&(A.fontStyle=U),Q&&(A.fontWeight=isNaN(parseFloat(Q))?Q:parseFloat(Q)),K&&(A.fontSize=s(K)),de&&(A.fontFamily=de),le&&(A.lineHeight=le==="normal"?1:le)}},getGradientDefs:function(F){var A=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],$=z(F,A),U,Q=0,K={};for(Q=$.length;Q--;)U=$[Q],U.getAttribute("xlink:href")&&R(F,U),K[U.getAttribute("id")]=U;return K},parseAttributes:function(F,A,$){if(!!F){var U,Q={},K,le;typeof $>"u"&&($=F.getAttribute("svgUid")),F.parentNode&&i.svgValidParentsRegEx.test(F.parentNode.nodeName)&&(Q=i.parseAttributes(F.parentNode,A,$));var de=A.reduce(function(fe,_e){return U=F.getAttribute(_e),U&&(fe[_e]=U),fe},{}),ve=c(ie(F,$),i.parseStyleAttribute(F));de=c(de,ve),ve[T]&&F.setAttribute(T,ve[T]),K=le=Q.fontSize||i.Text.DEFAULT_SVG_FONT_SIZE,de[y]&&(de[y]=K=s(de[y],le));var te,X,oe={};for(var ue in de)te=P(ue),X=D(te,de[ue],Q,K),oe[te]=X;oe&&oe.font&&i.parseFontDeclaration(oe.font,oe);var q=c(Q,oe);return i.svgValidParentsRegEx.test(F.nodeName)?q:j(q)}},parseElements:function(F,A,$,U,Q){new i.ElementsParser(F,A,$,U,Q).parse()},parseStyleAttribute:function(F){var A={},$=F.getAttribute("style");return $&&(typeof $=="string"?ee($,A):ne($,A)),A},parsePointsAttribute:function(F){if(!F)return null;F=F.replace(/,/g," ").trim(),F=F.split(/\s+/);var A=[],$,U;for($=0,U=F.length;$<U;$+=2)A.push({x:parseFloat(F[$]),y:parseFloat(F[$+1])});return A},getCSSRules:function(F){var A=F.getElementsByTagName("style"),$,U,Q={},K;for($=0,U=A.length;$<U;$++){var le=A[$].textContent;le=le.replace(/\/\*[\s\S]*?\*\//g,""),le.trim()!==""&&(K=le.split("}"),K=K.filter(function(de){return de.trim()}),K.forEach(function(de){var ve=de.split("{"),te={},X=ve[1].trim(),oe=X.split(";").filter(function(_e){return _e.trim()});for($=0,U=oe.length;$<U;$++){var ue=oe[$].split(":"),q=ue[0].trim(),fe=ue[1].trim();te[q]=fe}de=ve[0].trim(),de.split(",").forEach(function(_e){_e=_e.replace(/^svg/i,"").trim(),_e!==""&&(Q[_e]?i.util.object.extend(Q[_e],te):Q[_e]=i.util.object.clone(te))})}))}return Q},loadSVGFromURL:function(F,A,$,U){F=F.replace(/^\n\s*/,"").trim(),new i.util.request(F,{method:"get",onComplete:Q});function Q(K){var le=K.responseXML;if(!le||!le.documentElement)return A&&A(null),!1;i.parseSVGDocument(le.documentElement,function(de,ve,te,X){A&&A(de,ve,te,X)},$,U)}},loadSVGFromString:function(F,A,$,U){var Q=new i.window.DOMParser,K=Q.parseFromString(F.trim(),"text/xml");i.parseSVGDocument(K.documentElement,function(le,de,ve,te){A(le,de,ve,te)},$,U)}})}(f),t.ElementsParser=function(h,i,c,u,r,s){this.elements=h,this.callback=i,this.options=c,this.reviver=u,this.svgUid=c&&c.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=s},function(h){h.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},h.createObjects=function(){var i=this;this.elements.forEach(function(c,u){c.setAttribute("svgUid",i.svgUid),i.createObject(c,u)})},h.findTag=function(i){return t[t.util.string.capitalize(i.tagName.replace("svg:",""))]},h.createObject=function(i,c){var u=this.findTag(i);if(u&&u.fromElement)try{u.fromElement(i,this.createCallback(c,i),this.options)}catch(r){t.log(r)}else this.checkIfDone()},h.createCallback=function(i,c){var u=this;return function(r){var s;u.resolveGradient(r,c,"fill"),u.resolveGradient(r,c,"stroke"),r instanceof t.Image&&r._originalElement&&(s=r.parsePreserveAspectRatioAttribute(c)),r._removeTransformMatrix(s),u.resolveClipPath(r,c),u.reviver&&u.reviver(c,r),u.instances[i]=r,u.checkIfDone()}},h.extractPropertyDefinition=function(i,c,u){var r=i[c],s=this.regexUrl;if(!!s.test(r)){s.lastIndex=0;var n=s.exec(r)[1];return s.lastIndex=0,t[u][this.svgUid][n]}},h.resolveGradient=function(i,c,u){var r=this.extractPropertyDefinition(i,u,"gradientDefs");if(r){var s=c.getAttribute(u+"-opacity"),n=t.Gradient.fromElement(r,i,s,this.options);i.set(u,n)}},h.createClipPathCallback=function(i,c){return function(u){u._removeTransformMatrix(),u.fillRule=u.clipRule,c.push(u)}},h.resolveClipPath=function(i,c){var u=this.extractPropertyDefinition(i,"clipPath","clipPaths"),r,s,n,o,d,a;if(u){o=[],n=t.util.invertTransform(i.calcTransformMatrix());for(var g=u[0].parentNode,v=c;v.parentNode&&v.getAttribute("clip-path")!==i.clipPath;)v=v.parentNode;v.parentNode.appendChild(g);for(var _=0;_<u.length;_++)r=u[_],s=this.findTag(r),s.fromElement(r,this.createClipPathCallback(i,o),this.options);o.length===1?u=o[0]:u=new t.Group(o),d=t.util.multiplyTransformMatrices(n,u.calcTransformMatrix()),u.clipPath&&this.resolveClipPath(u,v);var a=t.util.qrDecompose(d);u.flipX=!1,u.flipY=!1,u.set("scaleX",a.scaleX),u.set("scaleY",a.scaleY),u.angle=a.angle,u.skewX=a.skewX,u.skewY=0,u.setPositionByOrigin({x:a.translateX,y:a.translateY},"center","center"),i.clipPath=u}else delete i.clipPath},h.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(i){return i!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(h){var i=h.fabric||(h.fabric={});if(i.Point){i.warn("fabric.Point is already defined");return}i.Point=c;function c(u,r){this.x=u,this.y=r}c.prototype={type:"point",constructor:c,add:function(u){return new c(this.x+u.x,this.y+u.y)},addEquals:function(u){return this.x+=u.x,this.y+=u.y,this},scalarAdd:function(u){return new c(this.x+u,this.y+u)},scalarAddEquals:function(u){return this.x+=u,this.y+=u,this},subtract:function(u){return new c(this.x-u.x,this.y-u.y)},subtractEquals:function(u){return this.x-=u.x,this.y-=u.y,this},scalarSubtract:function(u){return new c(this.x-u,this.y-u)},scalarSubtractEquals:function(u){return this.x-=u,this.y-=u,this},multiply:function(u){return new c(this.x*u,this.y*u)},multiplyEquals:function(u){return this.x*=u,this.y*=u,this},divide:function(u){return new c(this.x/u,this.y/u)},divideEquals:function(u){return this.x/=u,this.y/=u,this},eq:function(u){return this.x===u.x&&this.y===u.y},lt:function(u){return this.x<u.x&&this.y<u.y},lte:function(u){return this.x<=u.x&&this.y<=u.y},gt:function(u){return this.x>u.x&&this.y>u.y},gte:function(u){return this.x>=u.x&&this.y>=u.y},lerp:function(u,r){return typeof r>"u"&&(r=.5),r=Math.max(Math.min(1,r),0),new c(this.x+(u.x-this.x)*r,this.y+(u.y-this.y)*r)},distanceFrom:function(u){var r=this.x-u.x,s=this.y-u.y;return Math.sqrt(r*r+s*s)},midPointFrom:function(u){return this.lerp(u)},min:function(u){return new c(Math.min(this.x,u.x),Math.min(this.y,u.y))},max:function(u){return new c(Math.max(this.x,u.x),Math.max(this.y,u.y))},toString:function(){return this.x+","+this.y},setXY:function(u,r){return this.x=u,this.y=r,this},setX:function(u){return this.x=u,this},setY:function(u){return this.y=u,this},setFromPoint:function(u){return this.x=u.x,this.y=u.y,this},swap:function(u){var r=this.x,s=this.y;this.x=u.x,this.y=u.y,u.x=r,u.y=s},clone:function(){return new c(this.x,this.y)}}}(f),function(h){var i=h.fabric||(h.fabric={});if(i.Intersection){i.warn("fabric.Intersection is already defined");return}function c(u){this.status=u,this.points=[]}i.Intersection=c,i.Intersection.prototype={constructor:c,appendPoint:function(u){return this.points.push(u),this},appendPoints:function(u){return this.points=this.points.concat(u),this}},i.Intersection.intersectLineLine=function(u,r,s,n){var o,d=(n.x-s.x)*(u.y-s.y)-(n.y-s.y)*(u.x-s.x),a=(r.x-u.x)*(u.y-s.y)-(r.y-u.y)*(u.x-s.x),g=(n.y-s.y)*(r.x-u.x)-(n.x-s.x)*(r.y-u.y);if(g!==0){var v=d/g,_=a/g;0<=v&&v<=1&&0<=_&&_<=1?(o=new c("Intersection"),o.appendPoint(new i.Point(u.x+v*(r.x-u.x),u.y+v*(r.y-u.y)))):o=new c}else d===0||a===0?o=new c("Coincident"):o=new c("Parallel");return o},i.Intersection.intersectLinePolygon=function(u,r,s){var n=new c,o=s.length,d,a,g,v;for(v=0;v<o;v++)d=s[v],a=s[(v+1)%o],g=c.intersectLineLine(u,r,d,a),n.appendPoints(g.points);return n.points.length>0&&(n.status="Intersection"),n},i.Intersection.intersectPolygonPolygon=function(u,r){var s=new c,n=u.length,o;for(o=0;o<n;o++){var d=u[o],a=u[(o+1)%n],g=c.intersectLinePolygon(d,a,r);s.appendPoints(g.points)}return s.points.length>0&&(s.status="Intersection"),s},i.Intersection.intersectPolygonRectangle=function(u,r,s){var n=r.min(s),o=r.max(s),d=new i.Point(o.x,n.y),a=new i.Point(n.x,o.y),g=c.intersectLinePolygon(n,d,u),v=c.intersectLinePolygon(d,o,u),_=c.intersectLinePolygon(o,a,u),y=c.intersectLinePolygon(a,n,u),T=new c;return T.appendPoints(g.points),T.appendPoints(v.points),T.appendPoints(_.points),T.appendPoints(y.points),T.points.length>0&&(T.status="Intersection"),T}}(f),function(h){var i=h.fabric||(h.fabric={});if(i.Color){i.warn("fabric.Color is already defined.");return}function c(r){r?this._tryParsingColor(r):this.setSource([0,0,0,1])}i.Color=c,i.Color.prototype={_tryParsingColor:function(r){var s;r in c.colorNameMap&&(r=c.colorNameMap[r]),r==="transparent"&&(s=[255,255,255,0]),s||(s=c.sourceFromHex(r)),s||(s=c.sourceFromRgb(r)),s||(s=c.sourceFromHsl(r)),s||(s=[0,0,0,1]),s&&this.setSource(s)},_rgbToHsl:function(r,s,n){r/=255,s/=255,n/=255;var o,d,a,g=i.util.array.max([r,s,n]),v=i.util.array.min([r,s,n]);if(a=(g+v)/2,g===v)o=d=0;else{var _=g-v;switch(d=a>.5?_/(2-g-v):_/(g+v),g){case r:o=(s-n)/_+(s<n?6:0);break;case s:o=(n-r)/_+2;break;case n:o=(r-s)/_+4;break}o/=6}return[Math.round(o*360),Math.round(d*100),Math.round(a*100)]},getSource:function(){return this._source},setSource:function(r){this._source=r},toRgb:function(){var r=this.getSource();return"rgb("+r[0]+","+r[1]+","+r[2]+")"},toRgba:function(){var r=this.getSource();return"rgba("+r[0]+","+r[1]+","+r[2]+","+r[3]+")"},toHsl:function(){var r=this.getSource(),s=this._rgbToHsl(r[0],r[1],r[2]);return"hsl("+s[0]+","+s[1]+"%,"+s[2]+"%)"},toHsla:function(){var r=this.getSource(),s=this._rgbToHsl(r[0],r[1],r[2]);return"hsla("+s[0]+","+s[1]+"%,"+s[2]+"%,"+r[3]+")"},toHex:function(){var r=this.getSource(),s,n,o;return s=r[0].toString(16),s=s.length===1?"0"+s:s,n=r[1].toString(16),n=n.length===1?"0"+n:n,o=r[2].toString(16),o=o.length===1?"0"+o:o,s.toUpperCase()+n.toUpperCase()+o.toUpperCase()},toHexa:function(){var r=this.getSource(),s;return s=Math.round(r[3]*255),s=s.toString(16),s=s.length===1?"0"+s:s,this.toHex()+s.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(r){var s=this.getSource();return s[3]=r,this.setSource(s),this},toGrayscale:function(){var r=this.getSource(),s=parseInt((r[0]*.3+r[1]*.59+r[2]*.11).toFixed(0),10),n=r[3];return this.setSource([s,s,s,n]),this},toBlackWhite:function(r){var s=this.getSource(),n=(s[0]*.3+s[1]*.59+s[2]*.11).toFixed(0),o=s[3];return r=r||127,n=Number(n)<Number(r)?0:255,this.setSource([n,n,n,o]),this},overlayWith:function(r){r instanceof c||(r=new c(r));var s=[],n=this.getAlpha(),o=.5,d=this.getSource(),a=r.getSource(),g;for(g=0;g<3;g++)s.push(Math.round(d[g]*(1-o)+a[g]*o));return s[3]=n,this.setSource(s),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,i.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function u(r,s,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(s-r)*6*n:n<1/2?s:n<2/3?r+(s-r)*(2/3-n)*6:r}i.Color.fromRgb=function(r){return c.fromSource(c.sourceFromRgb(r))},i.Color.sourceFromRgb=function(r){var s=r.match(c.reRGBa);if(s){var n=parseInt(s[1],10)/(/%$/.test(s[1])?100:1)*(/%$/.test(s[1])?255:1),o=parseInt(s[2],10)/(/%$/.test(s[2])?100:1)*(/%$/.test(s[2])?255:1),d=parseInt(s[3],10)/(/%$/.test(s[3])?100:1)*(/%$/.test(s[3])?255:1);return[parseInt(n,10),parseInt(o,10),parseInt(d,10),s[4]?parseFloat(s[4]):1]}},i.Color.fromRgba=c.fromRgb,i.Color.fromHsl=function(r){return c.fromSource(c.sourceFromHsl(r))},i.Color.sourceFromHsl=function(r){var s=r.match(c.reHSLa);if(!!s){var n=(parseFloat(s[1])%360+360)%360/360,o=parseFloat(s[2])/(/%$/.test(s[2])?100:1),d=parseFloat(s[3])/(/%$/.test(s[3])?100:1),a,g,v;if(o===0)a=g=v=d;else{var _=d<=.5?d*(o+1):d+o-d*o,y=d*2-_;a=u(y,_,n+1/3),g=u(y,_,n),v=u(y,_,n-1/3)}return[Math.round(a*255),Math.round(g*255),Math.round(v*255),s[4]?parseFloat(s[4]):1]}},i.Color.fromHsla=c.fromHsl,i.Color.fromHex=function(r){return c.fromSource(c.sourceFromHex(r))},i.Color.sourceFromHex=function(r){if(r.match(c.reHex)){var s=r.slice(r.indexOf("#")+1),n=s.length===3||s.length===4,o=s.length===8||s.length===4,d=n?s.charAt(0)+s.charAt(0):s.substring(0,2),a=n?s.charAt(1)+s.charAt(1):s.substring(2,4),g=n?s.charAt(2)+s.charAt(2):s.substring(4,6),v=o?n?s.charAt(3)+s.charAt(3):s.substring(6,8):"FF";return[parseInt(d,16),parseInt(a,16),parseInt(g,16),parseFloat((parseInt(v,16)/255).toFixed(2))]}},i.Color.fromSource=function(r){var s=new c;return s.setSource(r),s}}(f),function(h){var i=h.fabric||(h.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],u=["ns","nesw","ew","nwse"],r={},s="left",n="top",o="right",d="bottom",a="center",g={top:d,bottom:n,left:o,right:s,center:a},v=i.util.radiansToDegrees,_=Math.sign||function(te){return(te>0)-(te<0)||+te};function y(te,X){var oe=te.angle+v(Math.atan2(X.y,X.x))+360;return Math.round(oe%360/45)}function T(te,X){var oe=X.transform.target,ue=oe.canvas,q=i.util.object.clone(X);q.target=oe,ue&&ue.fire("object:"+te,q),oe.fire(te,X)}function P(te,X){var oe=X.canvas,ue=oe.uniScaleKey,q=te[ue];return oe.uniformScaling&&!q||!oe.uniformScaling&&q}function D(te){return te.originX===a&&te.originY===a}function B(te,X,oe){var ue=te.lockScalingX,q=te.lockScalingY;return!!(ue&&q||!X&&(ue||q)&&oe||ue&&X==="x"||q&&X==="y")}function j(te,X,oe){var ue="not-allowed",q=P(te,oe),fe="";if(X.x!==0&&X.y===0?fe="x":X.x===0&&X.y!==0&&(fe="y"),B(oe,fe,q))return ue;var _e=y(oe,X);return c[_e]+"-resize"}function z(te,X,oe){var ue="not-allowed";if(X.x!==0&&oe.lockSkewingY||X.y!==0&&oe.lockSkewingX)return ue;var q=y(oe,X)%4;return u[q]+"-resize"}function ee(te,X,oe){return te[oe.canvas.altActionKey]?r.skewCursorStyleHandler(te,X,oe):r.scaleCursorStyleHandler(te,X,oe)}function ne(te,X,oe){var ue=te[oe.canvas.altActionKey];if(X.x===0)return ue?"skewX":"scaleY";if(X.y===0)return ue?"skewY":"scaleX"}function ie(te,X,oe){return oe.lockRotation?"not-allowed":X.cursorStyle}function Z(te,X,oe,ue){return{e:te,transform:X,pointer:{x:oe,y:ue}}}function re(te){return function(X,oe,ue,q){var fe=oe.target,_e=fe.getCenterPoint(),Ee=fe.translateToOriginPoint(_e,oe.originX,oe.originY),Ce=te(X,oe,ue,q);return fe.setPositionByOrigin(Ee,oe.originX,oe.originY),Ce}}function pe(te,X){return function(oe,ue,q,fe){var _e=X(oe,ue,q,fe);return _e&&T(te,Z(oe,ue,q,fe)),_e}}function me(te,X,oe,ue,q){var fe=te.target,_e=fe.controls[te.corner],Ee=fe.canvas.getZoom(),Ce=fe.padding/Ee,se=fe.toLocalPoint(new i.Point(ue,q),X,oe);return se.x>=Ce&&(se.x-=Ce),se.x<=-Ce&&(se.x+=Ce),se.y>=Ce&&(se.y-=Ce),se.y<=Ce&&(se.y+=Ce),se.x-=_e.offsetX,se.y-=_e.offsetY,se}function G(te){return te.flipX!==te.flipY}function O(te,X,oe,ue,q){if(te[X]!==0){var fe=te._getTransformedDimensions()[ue],_e=q/fe*te[oe];te.set(oe,_e)}}function I(te,X,oe,ue){var q=X.target,fe=q._getTransformedDimensions(0,q.skewY),_e=me(X,X.originX,X.originY,oe,ue),Ee=Math.abs(_e.x*2)-fe.x,Ce=q.skewX,se;Ee<2?se=0:(se=v(Math.atan2(Ee/q.scaleX,fe.y/q.scaleY)),X.originX===s&&X.originY===d&&(se=-se),X.originX===o&&X.originY===n&&(se=-se),G(q)&&(se=-se));var xe=Ce!==se;if(xe){var Me=q._getTransformedDimensions().y;q.set("skewX",se),O(q,"skewY","scaleY","y",Me)}return xe}function k(te,X,oe,ue){var q=X.target,fe=q._getTransformedDimensions(q.skewX,0),_e=me(X,X.originX,X.originY,oe,ue),Ee=Math.abs(_e.y*2)-fe.y,Ce=q.skewY,se;Ee<2?se=0:(se=v(Math.atan2(Ee/q.scaleY,fe.x/q.scaleX)),X.originX===s&&X.originY===d&&(se=-se),X.originX===o&&X.originY===n&&(se=-se),G(q)&&(se=-se));var xe=Ce!==se;if(xe){var Me=q._getTransformedDimensions().x;q.set("skewY",se),O(q,"skewX","scaleX","x",Me)}return xe}function R(te,X,oe,ue){var q=X.target,fe=q.skewX,_e,Ee=X.originY;if(q.lockSkewingX)return!1;if(fe===0){var Ce=me(X,a,a,oe,ue);Ce.x>0?_e=s:_e=o}else fe>0&&(_e=Ee===n?s:o),fe<0&&(_e=Ee===n?o:s),G(q)&&(_e=_e===s?o:s);X.originX=_e;var se=pe("skewing",re(I));return se(te,X,oe,ue)}function Y(te,X,oe,ue){var q=X.target,fe=q.skewY,_e,Ee=X.originX;if(q.lockSkewingY)return!1;if(fe===0){var Ce=me(X,a,a,oe,ue);Ce.y>0?_e=n:_e=d}else fe>0&&(_e=Ee===s?n:d),fe<0&&(_e=Ee===s?d:n),G(q)&&(_e=_e===n?d:n);X.originY=_e;var se=pe("skewing",re(k));return se(te,X,oe,ue)}function F(te,X,oe,ue){var q=X,fe=q.target,_e=fe.translateToOriginPoint(fe.getCenterPoint(),q.originX,q.originY);if(fe.lockRotation)return!1;var Ee=Math.atan2(q.ey-_e.y,q.ex-_e.x),Ce=Math.atan2(ue-_e.y,oe-_e.x),se=v(Ce-Ee+q.theta),xe=!0;if(fe.snapAngle>0){var Me=fe.snapAngle,Be=fe.snapThreshold||Me,Ze=Math.ceil(se/Me)*Me,Ye=Math.floor(se/Me)*Me;Math.abs(se-Ye)<Be?se=Ye:Math.abs(se-Ze)<Be&&(se=Ze)}return se<0&&(se=360+se),se%=360,xe=fe.angle!==se,fe.angle=se,xe}function A(te,X,oe,ue,q){q=q||{};var fe=X.target,_e=fe.lockScalingX,Ee=fe.lockScalingY,Ce=q.by,se,xe,Me,Be,Ze=P(te,fe),Ye=B(fe,Ce,Ze),at,tt,Kt=X.gestureScale;if(Ye)return!1;if(Kt)xe=X.scaleX*Kt,Me=X.scaleY*Kt;else{if(se=me(X,X.originX,X.originY,oe,ue),at=Ce!=="y"?_(se.x):1,tt=Ce!=="x"?_(se.y):1,X.signX||(X.signX=at),X.signY||(X.signY=tt),fe.lockScalingFlip&&(X.signX!==at||X.signY!==tt))return!1;if(Be=fe._getTransformedDimensions(),Ze&&!Ce){var fn=Math.abs(se.x)+Math.abs(se.y),Et=X.original,er=Math.abs(Be.x*Et.scaleX/fe.scaleX)+Math.abs(Be.y*Et.scaleY/fe.scaleY),fi=fn/er;xe=Et.scaleX*fi,Me=Et.scaleY*fi}else xe=Math.abs(se.x*fe.scaleX/Be.x),Me=Math.abs(se.y*fe.scaleY/Be.y);D(X)&&(xe*=2,Me*=2),X.signX!==at&&Ce!=="y"&&(X.originX=g[X.originX],xe*=-1,X.signX=at),X.signY!==tt&&Ce!=="x"&&(X.originY=g[X.originY],Me*=-1,X.signY=tt)}var tr=fe.scaleX,nr=fe.scaleY;return Ce?(Ce==="x"&&fe.set("scaleX",xe),Ce==="y"&&fe.set("scaleY",Me)):(!_e&&fe.set("scaleX",xe),!Ee&&fe.set("scaleY",Me)),tr!==fe.scaleX||nr!==fe.scaleY}function $(te,X,oe,ue){return A(te,X,oe,ue)}function U(te,X,oe,ue){return A(te,X,oe,ue,{by:"x"})}function Q(te,X,oe,ue){return A(te,X,oe,ue,{by:"y"})}function K(te,X,oe,ue){return te[X.target.canvas.altActionKey]?r.skewHandlerX(te,X,oe,ue):r.scalingY(te,X,oe,ue)}function le(te,X,oe,ue){return te[X.target.canvas.altActionKey]?r.skewHandlerY(te,X,oe,ue):r.scalingX(te,X,oe,ue)}function de(te,X,oe,ue){var q=X.target,fe=me(X,X.originX,X.originY,oe,ue),_e=q.strokeWidth/(q.strokeUniform?q.scaleX:1),Ee=D(X)?2:1,Ce=q.width,se=Math.abs(fe.x*Ee/q.scaleX)-_e;return q.set("width",Math.max(se,0)),Ce!==se}function ve(te,X,oe,ue){var q=X.target,fe=oe-X.offsetX,_e=ue-X.offsetY,Ee=!q.get("lockMovementX")&&q.left!==fe,Ce=!q.get("lockMovementY")&&q.top!==_e;return Ee&&q.set("left",fe),Ce&&q.set("top",_e),(Ee||Ce)&&T("moving",Z(te,X,oe,ue)),Ee||Ce}r.scaleCursorStyleHandler=j,r.skewCursorStyleHandler=z,r.scaleSkewCursorStyleHandler=ee,r.rotationWithSnapping=pe("rotating",re(F)),r.scalingEqually=pe("scaling",re($)),r.scalingX=pe("scaling",re(U)),r.scalingY=pe("scaling",re(Q)),r.scalingYOrSkewingX=K,r.scalingXOrSkewingY=le,r.changeWidth=pe("resizing",re(de)),r.skewHandlerX=R,r.skewHandlerY=Y,r.dragHandler=ve,r.scaleOrSkewActionName=ne,r.rotationStyleHandler=ie,r.fireEvent=T,r.wrapWithFixedAnchor=re,r.wrapWithFireEvent=pe,r.getLocalPoint=me,i.controlsUtils=r}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.util.degreesToRadians,u=i.controlsUtils;function r(n,o,d,a,g){a=a||{};var v=this.sizeX||a.cornerSize||g.cornerSize,_=this.sizeY||a.cornerSize||g.cornerSize,y=typeof a.transparentCorners<"u"?a.transparentCorners:g.transparentCorners,T=y?"stroke":"fill",P=!y&&(a.cornerStrokeColor||g.cornerStrokeColor),D=o,B=d,j;n.save(),n.fillStyle=a.cornerColor||g.cornerColor,n.strokeStyle=a.cornerStrokeColor||g.cornerStrokeColor,v>_?(j=v,n.scale(1,_/v),B=d*v/_):_>v?(j=_,n.scale(v/_,1),D=o*_/v):j=v,n.lineWidth=1,n.beginPath(),n.arc(D,B,j/2,0,2*Math.PI,!1),n[T](),P&&n.stroke(),n.restore()}function s(n,o,d,a,g){a=a||{};var v=this.sizeX||a.cornerSize||g.cornerSize,_=this.sizeY||a.cornerSize||g.cornerSize,y=typeof a.transparentCorners<"u"?a.transparentCorners:g.transparentCorners,T=y?"stroke":"fill",P=!y&&(a.cornerStrokeColor||g.cornerStrokeColor),D=v/2,B=_/2;n.save(),n.fillStyle=a.cornerColor||g.cornerColor,n.strokeStyle=a.cornerStrokeColor||g.cornerStrokeColor,n.lineWidth=1,n.translate(o,d),n.rotate(c(g.angle)),n[T+"Rect"](-D,-B,v,_),P&&n.strokeRect(-D,-B,v,_),n.restore()}u.renderCircleControl=r,u.renderSquareControl=s}(f),function(h){var i=h.fabric||(h.fabric={});function c(u){for(var r in u)this[r]=u[r]}i.Control=c,i.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(u,r){return r.cursorStyle},getActionName:function(u,r){return r.actionName},getVisibility:function(u,r){var s=u._controlsVisibility;return s&&typeof s[r]<"u"?s[r]:this.visible},setVisibility:function(u){this.visible=u},positionHandler:function(u,r){var s=i.util.transformPoint({x:this.x*u.x+this.offsetX,y:this.y*u.y+this.offsetY},r);return s},calcCornerCoords:function(u,r,s,n,o){var d,a,g,v,_=o?this.touchSizeX:this.sizeX,y=o?this.touchSizeY:this.sizeY;if(_&&y&&_!==y){var T=Math.atan2(y,_),P=Math.sqrt(_*_+y*y)/2,D=T-i.util.degreesToRadians(u),B=Math.PI/2-T-i.util.degreesToRadians(u);d=P*i.util.cos(D),a=P*i.util.sin(D),g=P*i.util.cos(B),v=P*i.util.sin(B)}else{var j=_&&y?_:r;P=j*.7071067812;var D=i.util.degreesToRadians(45-u);d=g=P*i.util.cos(D),a=v=P*i.util.sin(D)}return{tl:{x:s-v,y:n-g},tr:{x:s+d,y:n-a},bl:{x:s-d,y:n+a},br:{x:s+v,y:n+g}}},render:function(u,r,s,n,o){switch(n=n||{},n.cornerStyle||o.cornerStyle){case"circle":i.controlsUtils.renderCircleControl.call(this,u,r,s,n,o);break;default:i.controlsUtils.renderSquareControl.call(this,u,r,s,n,o)}}}}(f),function(){function h(s,n){var o=s.getAttribute("style"),d=s.getAttribute("offset")||0,a,g,v,_;if(d=parseFloat(d)/(/%$/.test(d)?100:1),d=d<0?0:d>1?1:d,o){var y=o.split(/\s*;\s*/);for(y[y.length-1]===""&&y.pop(),_=y.length;_--;){var T=y[_].split(/\s*:\s*/),P=T[0].trim(),D=T[1].trim();P==="stop-color"?a=D:P==="stop-opacity"&&(v=D)}}return a||(a=s.getAttribute("stop-color")||"rgb(0,0,0)"),v||(v=s.getAttribute("stop-opacity")),a=new t.Color(a),g=a.getAlpha(),v=isNaN(parseFloat(v))?1:parseFloat(v),v*=g*n,{offset:d,color:a.toRgb(),opacity:v}}function i(s){return{x1:s.getAttribute("x1")||0,y1:s.getAttribute("y1")||0,x2:s.getAttribute("x2")||"100%",y2:s.getAttribute("y2")||0}}function c(s){return{x1:s.getAttribute("fx")||s.getAttribute("cx")||"50%",y1:s.getAttribute("fy")||s.getAttribute("cy")||"50%",r1:0,x2:s.getAttribute("cx")||"50%",y2:s.getAttribute("cy")||"50%",r2:s.getAttribute("r")||"50%"}}var u=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(s){s||(s={}),s.coords||(s.coords={});var n,o=this;Object.keys(s).forEach(function(d){o[d]=s[d]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,n={x1:s.coords.x1||0,y1:s.coords.y1||0,x2:s.coords.x2||0,y2:s.coords.y2||0},this.type==="radial"&&(n.r1=s.coords.r1||0,n.r2=s.coords.r2||0),this.coords=n,this.colorStops=s.colorStops.slice()},addColorStop:function(s){for(var n in s){var o=new t.Color(s[n]);this.colorStops.push({offset:parseFloat(n),color:o.toRgb(),opacity:o.getAlpha()})}return this},toObject:function(s){var n={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,n,s),n},toSVG:function(s,g){var o=u(this.coords,!0),d,a,g=g||{},v,_,y=u(this.colorStops,!0),T=o.r1>o.r2,P=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),D=-this.offsetX,B=-this.offsetY,j=!!g.additionalTransform,z=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(y.sort(function(re,pe){return re.offset-pe.offset}),z==="objectBoundingBox"?(D/=s.width,B/=s.height):(D+=s.width/2,B+=s.height/2),s.type==="path"&&this.gradientUnits!=="percentage"&&(D-=s.pathOffset.x,B-=s.pathOffset.y),P[4]-=D,P[5]-=B,_='id="SVGID_'+this.id+'" gradientUnits="'+z+'"',_+=' gradientTransform="'+(j?g.additionalTransform+" ":"")+t.util.matrixToSVG(P)+'" ',this.type==="linear"?v=["<linearGradient ",_,' x1="',o.x1,'" y1="',o.y1,'" x2="',o.x2,'" y2="',o.y2,`">
`]:this.type==="radial"&&(v=["<radialGradient ",_,' cx="',T?o.x1:o.x2,'" cy="',T?o.y1:o.y2,'" r="',T?o.r1:o.r2,'" fx="',T?o.x2:o.x1,'" fy="',T?o.y2:o.y1,`">
`]),this.type==="radial"){if(T)for(y=y.concat(),y.reverse(),d=0,a=y.length;d<a;d++)y[d].offset=1-y[d].offset;var ee=Math.min(o.r1,o.r2);if(ee>0){var ne=Math.max(o.r1,o.r2),ie=ee/ne;for(d=0,a=y.length;d<a;d++)y[d].offset+=ie*(1-y[d].offset)}}for(d=0,a=y.length;d<a;d++){var Z=y[d];v.push("<stop ",'offset="',Z.offset*100+"%",'" style="stop-color:',Z.color,typeof Z.opacity<"u"?";stop-opacity: "+Z.opacity:";",`"/>
`)}return v.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),v.join("")},toLive:function(s){var n,o=t.util.object.clone(this.coords),d,a;if(!!this.type){for(this.type==="linear"?n=s.createLinearGradient(o.x1,o.y1,o.x2,o.y2):this.type==="radial"&&(n=s.createRadialGradient(o.x1,o.y1,o.r1,o.x2,o.y2,o.r2)),d=0,a=this.colorStops.length;d<a;d++){var g=this.colorStops[d].color,v=this.colorStops[d].opacity,_=this.colorStops[d].offset;typeof v<"u"&&(g=new t.Color(g).setAlpha(v).toRgba()),n.addColorStop(_,g)}return n}}}),t.util.object.extend(t.Gradient,{fromElement:function(s,n,o,d){var a=parseFloat(o)/(/%$/.test(o)?100:1);a=a<0?0:a>1?1:a,isNaN(a)&&(a=1);var g=s.getElementsByTagName("stop"),v,_=s.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",y=s.getAttribute("gradientTransform")||"",T=[],P,D,B=0,j=0,z;for(s.nodeName==="linearGradient"||s.nodeName==="LINEARGRADIENT"?(v="linear",P=i(s)):(v="radial",P=c(s)),D=g.length;D--;)T.push(h(g[D],a));z=t.parseTransformAttribute(y),r(n,P,d,_),_==="pixels"&&(B=-n.left,j=-n.top);var ee=new t.Gradient({id:s.getAttribute("id"),type:v,coords:P,colorStops:T,gradientUnits:_,gradientTransform:z,offsetX:B,offsetY:j});return ee}});function r(s,n,o,d){var a,g;Object.keys(n).forEach(function(v){a=n[v],a==="Infinity"?g=1:a==="-Infinity"?g=0:(g=parseFloat(n[v],10),typeof a=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(a)&&(g*=.01,d==="pixels"&&((v==="x1"||v==="x2"||v==="r2")&&(g*=o.viewBoxWidth||o.width),(v==="y1"||v==="y2")&&(g*=o.viewBoxHeight||o.height)))),n[v]=g})}}(),function(){var h=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(i,c){if(i||(i={}),this.id=t.Object.__uid++,this.setOptions(i),!i.source||i.source&&typeof i.source!="string"){c&&c(this);return}else{var u=this;this.source=t.util.createImage(),t.util.loadImage(i.source,function(r,s){u.source=r,c&&c(u,s)},null,this.crossOrigin)}},toObject:function(i){var c=t.Object.NUM_FRACTION_DIGITS,u,r;return typeof this.source.src=="string"?u=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(u=this.source.toDataURL()),r={type:"pattern",source:u,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:h(this.offsetX,c),offsetY:h(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,r,i),r},toSVG:function(i){var c=typeof this.source=="function"?this.source():this.source,u=c.width/i.width,r=c.height/i.height,s=this.offsetX/i.width,n=this.offsetY/i.height,o="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(r=1,n&&(r+=Math.abs(n))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(u=1,s&&(u+=Math.abs(s))),c.src?o=c.src:c.toDataURL&&(o=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+s+'" y="'+n+'" width="'+u+'" height="'+r+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+o+`"></image>
</pattern>
`},setOptions:function(i){for(var c in i)this[c]=i[c]},toLive:function(i){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":i.createPattern(c,this.repeat)}})}(),function(h){var i=h.fabric||(h.fabric={}),c=i.util.toFixed;if(i.Shadow){i.warn("fabric.Shadow is already defined.");return}i.Shadow=i.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(u){typeof u=="string"&&(u=this._parseShadow(u));for(var r in u)this[r]=u[r];this.id=i.Object.__uid++},_parseShadow:function(u){var r=u.trim(),s=i.Shadow.reOffsetsAndBlur.exec(r)||[],n=r.replace(i.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:n.trim(),offsetX:parseFloat(s[1],10)||0,offsetY:parseFloat(s[2],10)||0,blur:parseFloat(s[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(u){var r=40,s=40,n=i.Object.NUM_FRACTION_DIGITS,o=i.util.rotateVector({x:this.offsetX,y:this.offsetY},i.util.degreesToRadians(-u.angle)),d=20,a=new i.Color(this.color);return u.width&&u.height&&(r=c((Math.abs(o.x)+this.blur)/u.width,n)*100+d,s=c((Math.abs(o.y)+this.blur)/u.height,n)*100+d),u.flipX&&(o.x*=-1),u.flipY&&(o.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+s+'%" height="'+(100+2*s)+'%" x="-'+r+'%" width="'+(100+2*r)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,n)+`"></feGaussianBlur>
	<feOffset dx="`+c(o.x,n)+'" dy="'+c(o.y,n)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+a.toRgb()+'" flood-opacity="'+a.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var u={},r=i.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(s){this[s]!==r[s]&&(u[s]=this[s])},this),u}}),i.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(f),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var h=t.util.object.extend,i=t.util.getElementOffset,c=t.util.removeFromArray,u=t.util.toFixed,r=t.util.transformPoint,s=t.util.invertTransform,n=t.util.getNodeCanvas,o=t.util.createCanvasElement,d=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(a,g){g||(g={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(a,g)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(a,g){var v=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(a),this._initOptions(g),this.interactive||this._initRetinaScaling(),g.overlayImage&&this.setOverlayImage(g.overlayImage,v),g.backgroundImage&&this.setBackgroundImage(g.backgroundImage,v),g.backgroundColor&&this.setBackgroundColor(g.backgroundColor,v),g.overlayColor&&this.setOverlayColor(g.overlayColor,v),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,t.devicePixelRatio):1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var a=t.devicePixelRatio;this.__initRetinaScaling(a,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(a,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(a,g,v){g.setAttribute("width",this.width*a),g.setAttribute("height",this.height*a),v.scale(a,a)},calcOffset:function(){return this._offset=i(this.lowerCanvasEl),this},setOverlayImage:function(a,g,v){return this.__setBgOverlayImage("overlayImage",a,g,v)},setBackgroundImage:function(a,g,v){return this.__setBgOverlayImage("backgroundImage",a,g,v)},setOverlayColor:function(a,g){return this.__setBgOverlayColor("overlayColor",a,g)},setBackgroundColor:function(a,g){return this.__setBgOverlayColor("backgroundColor",a,g)},__setBgOverlayImage:function(a,g,v,_){return typeof g=="string"?t.util.loadImage(g,function(y,T){if(y){var P=new t.Image(y,_);this[a]=P,P.canvas=this}v&&v(y,T)},this,_&&_.crossOrigin):(_&&g.setOptions(_),this[a]=g,g&&(g.canvas=this),v&&v(g,!1)),this},__setBgOverlayColor:function(a,g,v){return this[a]=g,this._initGradient(g,a),this._initPattern(g,a,v),this},_createCanvasElement:function(){var a=o();if(!a||(a.style||(a.style={}),typeof a.getContext>"u"))throw d;return a},_initOptions:function(a){var g=this.lowerCanvasEl;this._setOptions(a),this.width=this.width||parseInt(g.width,10)||0,this.height=this.height||parseInt(g.height,10)||0,this.lowerCanvasEl.style&&(g.width=this.width,g.height=this.height,g.style.width=this.width+"px",g.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(a){a&&a.getContext?this.lowerCanvasEl=a:this.lowerCanvasEl=t.util.getById(a)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(a,g){return this.setDimensions({width:a},g)},setHeight:function(a,g){return this.setDimensions({height:a},g)},setDimensions:function(a,g){var v;g=g||{};for(var _ in a)v=a[_],g.cssOnly||(this._setBackstoreDimension(_,a[_]),v+="px",this.hasLostContext=!0),g.backstoreOnly||this._setCssDimension(_,v);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),g.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(a,g){return this.lowerCanvasEl[a]=g,this.upperCanvasEl&&(this.upperCanvasEl[a]=g),this.cacheCanvasEl&&(this.cacheCanvasEl[a]=g),this[a]=g,this},_setCssDimension:function(a,g){return this.lowerCanvasEl.style[a]=g,this.upperCanvasEl&&(this.upperCanvasEl.style[a]=g),this.wrapperEl&&(this.wrapperEl.style[a]=g),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(a){var g=this._activeObject,v=this.backgroundImage,_=this.overlayImage,y,T,P;for(this.viewportTransform=a,T=0,P=this._objects.length;T<P;T++)y=this._objects[T],y.group||y.setCoords(!0);return g&&g.setCoords(),v&&v.setCoords(!0),_&&_.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(a,g){var v=a,_=this.viewportTransform.slice(0);a=r(a,s(this.viewportTransform)),_[0]=g,_[3]=g;var y=r(a,_);return _[4]+=v.x-y.x,_[5]+=v.y-y.y,this.setViewportTransform(_)},setZoom:function(a){return this.zoomToPoint(new t.Point(0,0),a),this},absolutePan:function(a){var g=this.viewportTransform.slice(0);return g[4]=-a.x,g[5]=-a.y,this.setViewportTransform(g)},relativePan:function(a){return this.absolutePan(new t.Point(-a.x-this.viewportTransform[4],-a.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(a){this.stateful&&a.setupState(),a._set("canvas",this),a.setCoords(),this.fire("object:added",{target:a}),a.fire("added")},_onObjectRemoved:function(a){this.fire("object:removed",{target:a}),a.fire("removed"),delete a.canvas},clearContext:function(a){return a.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var a=this.contextContainer;return this.renderCanvas(a,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var a={},g=this.width,v=this.height,_=s(this.viewportTransform);return a.tl=r({x:0,y:0},_),a.br=r({x:g,y:v},_),a.tr=new t.Point(a.br.x,a.tl.y),a.bl=new t.Point(a.tl.x,a.br.y),this.vptCoords=a,a},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(a,g){var v=this.viewportTransform,_=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(a),t.util.setImageSmoothing(a,this.imageSmoothingEnabled),this.fire("before:render",{ctx:a}),this._renderBackground(a),a.save(),a.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._renderObjects(a,g),a.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(a),_&&(_.canvas=this,_.shouldCache(),_._transformDone=!0,_.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(a)),this._renderOverlay(a),this.controlsAboveOverlay&&this.interactive&&this.drawControls(a),this.fire("after:render",{ctx:a})},drawClipPathOnCanvas:function(a){var g=this.viewportTransform,v=this.clipPath;a.save(),a.transform(g[0],g[1],g[2],g[3],g[4],g[5]),a.globalCompositeOperation="destination-in",v.transform(a),a.scale(1/v.zoomX,1/v.zoomY),a.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),a.restore()},_renderObjects:function(a,g){var v,_;for(v=0,_=g.length;v<_;++v)g[v]&&g[v].render(a)},_renderBackgroundOrOverlay:function(a,g){var v=this[g+"Color"],_=this[g+"Image"],y=this.viewportTransform,T=this[g+"Vpt"];if(!(!v&&!_)){if(v){a.save(),a.beginPath(),a.moveTo(0,0),a.lineTo(this.width,0),a.lineTo(this.width,this.height),a.lineTo(0,this.height),a.closePath(),a.fillStyle=v.toLive?v.toLive(a,this):v,T&&a.transform(y[0],y[1],y[2],y[3],y[4],y[5]),a.transform(1,0,0,1,v.offsetX||0,v.offsetY||0);var P=v.gradientTransform||v.patternTransform;P&&a.transform(P[0],P[1],P[2],P[3],P[4],P[5]),a.fill(),a.restore()}_&&(a.save(),T&&a.transform(y[0],y[1],y[2],y[3],y[4],y[5]),_.render(a),a.restore())}},_renderBackground:function(a){this._renderBackgroundOrOverlay(a,"background")},_renderOverlay:function(a){this._renderBackgroundOrOverlay(a,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new t.Point(this.width/2,this.height/2)},centerObjectH:function(a){return this._centerObject(a,new t.Point(this.getCenterPoint().x,a.getCenterPoint().y))},centerObjectV:function(a){return this._centerObject(a,new t.Point(a.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(a){var g=this.getCenterPoint();return this._centerObject(a,g)},viewportCenterObject:function(a){var g=this.getVpCenter();return this._centerObject(a,g)},viewportCenterObjectH:function(a){var g=this.getVpCenter();return this._centerObject(a,new t.Point(g.x,a.getCenterPoint().y)),this},viewportCenterObjectV:function(a){var g=this.getVpCenter();return this._centerObject(a,new t.Point(a.getCenterPoint().x,g.y))},getVpCenter:function(){var a=this.getCenterPoint(),g=s(this.viewportTransform);return r(a,g)},_centerObject:function(a,g){return a.setPositionByOrigin(g,"center","center"),a.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(a){return this.toDatalessObject(a)},toObject:function(a){return this._toObjectMethod("toObject",a)},toDatalessObject:function(a){return this._toObjectMethod("toDatalessObject",a)},_toObjectMethod:function(a,g){var v=this.clipPath,_={version:t.version,objects:this._toObjects(a,g)};return v&&!v.excludeFromExport&&(_.clipPath=this._toObject(this.clipPath,a,g)),h(_,this.__serializeBgOverlay(a,g)),t.util.populateWithProperties(this,_,g),_},_toObjects:function(a,g){return this._objects.filter(function(v){return!v.excludeFromExport}).map(function(v){return this._toObject(v,a,g)},this)},_toObject:function(a,g,v){var _;this.includeDefaultValues||(_=a.includeDefaultValues,a.includeDefaultValues=!1);var y=a[g](v);return this.includeDefaultValues||(a.includeDefaultValues=_),y},__serializeBgOverlay:function(a,g){var v={},_=this.backgroundImage,y=this.overlayImage,T=this.backgroundColor,P=this.overlayColor;return T&&T.toObject?T.excludeFromExport||(v.background=T.toObject(g)):T&&(v.background=T),P&&P.toObject?P.excludeFromExport||(v.overlay=P.toObject(g)):P&&(v.overlay=P),_&&!_.excludeFromExport&&(v.backgroundImage=this._toObject(_,a,g)),y&&!y.excludeFromExport&&(v.overlayImage=this._toObject(y,a,g)),v},svgViewportTransformation:!0,toSVG:function(a,g){a||(a={}),a.reviver=g;var v=[];return this._setSVGPreamble(v,a),this._setSVGHeader(v,a),this.clipPath&&v.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(v,"background"),this._setSVGBgOverlayImage(v,"backgroundImage",g),this._setSVGObjects(v,g),this.clipPath&&v.push(`</g>
`),this._setSVGBgOverlayColor(v,"overlay"),this._setSVGBgOverlayImage(v,"overlayImage",g),v.push("</svg>"),v.join("")},_setSVGPreamble:function(a,g){g.suppressPreamble||a.push('<?xml version="1.0" encoding="',g.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(a,g){var v=g.width||this.width,_=g.height||this.height,y,T='viewBox="0 0 '+this.width+" "+this.height+'" ',P=t.Object.NUM_FRACTION_DIGITS;g.viewBox?T='viewBox="'+g.viewBox.x+" "+g.viewBox.y+" "+g.viewBox.width+" "+g.viewBox.height+'" ':this.svgViewportTransformation&&(y=this.viewportTransform,T='viewBox="'+u(-y[4]/y[0],P)+" "+u(-y[5]/y[3],P)+" "+u(this.width/y[0],P)+" "+u(this.height/y[3],P)+'" '),a.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',v,'" ','height="',_,'" ',T,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(g),`</defs>
`)},createSVGClipPathMarkup:function(a){var g=this.clipPath;return g?(g.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+g.clipPathId+`" >
`+this.clipPath.toClipPathSVG(a.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var a=this,g=["background","overlay"].map(function(v){var _=a[v+"Color"];if(_&&_.toLive){var y=a[v+"Vpt"],T=a.viewportTransform,P={width:a.width/(y?T[0]:1),height:a.height/(y?T[3]:1)};return _.toSVG(P,{additionalTransform:y?t.util.matrixToSVG(T):""})}});return g.join("")},createSVGFontFacesMarkup:function(){var a="",g={},v,_,y,T,P,D,B,j,z,ee=t.fontPaths,ne=[];for(this._objects.forEach(function Z(re){ne.push(re),re._objects&&re._objects.forEach(Z)}),j=0,z=ne.length;j<z;j++)if(v=ne[j],_=v.fontFamily,!(v.type.indexOf("text")===-1||g[_]||!ee[_])&&(g[_]=!0,!!v.styles)){y=v.styles;for(P in y){T=y[P];for(B in T)D=T[B],_=D.fontFamily,!g[_]&&ee[_]&&(g[_]=!0)}}for(var ie in g)a+=[`		@font-face {
`,"			font-family: '",ie,`';
`,"			src: url('",ee[ie],`');
`,`		}
`].join("");return a&&(a=['	<style type="text/css">',`<![CDATA[
`,a,"]]>",`</style>
`].join("")),a},_setSVGObjects:function(a,g){var v,_,y,T=this._objects;for(_=0,y=T.length;_<y;_++)v=T[_],!v.excludeFromExport&&this._setSVGObject(a,v,g)},_setSVGObject:function(a,g,v){a.push(g.toSVG(v))},_setSVGBgOverlayImage:function(a,g,v){this[g]&&!this[g].excludeFromExport&&this[g].toSVG&&a.push(this[g].toSVG(v))},_setSVGBgOverlayColor:function(a,g){var v=this[g+"Color"],_=this.viewportTransform,y=this.width,T=this.height;if(!!v)if(v.toLive){var P=v.repeat,D=t.util.invertTransform(_),B=this[g+"Vpt"],j=B?t.util.matrixToSVG(D):"";a.push('<rect transform="'+j+" translate(",y/2,",",T/2,')"',' x="',v.offsetX-y/2,'" y="',v.offsetY-T/2,'" ','width="',P==="repeat-y"||P==="no-repeat"?v.source.width:y,'" height="',P==="repeat-x"||P==="no-repeat"?v.source.height:T,'" fill="url(#SVGID_'+v.id+')"',`></rect>
`)}else a.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',v,'"',`></rect>
`)},sendToBack:function(a){if(!a)return this;var g=this._activeObject,v,_,y;if(a===g&&a.type==="activeSelection")for(y=g._objects,v=y.length;v--;)_=y[v],c(this._objects,_),this._objects.unshift(_);else c(this._objects,a),this._objects.unshift(a);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(a){if(!a)return this;var g=this._activeObject,v,_,y;if(a===g&&a.type==="activeSelection")for(y=g._objects,v=0;v<y.length;v++)_=y[v],c(this._objects,_),this._objects.push(_);else c(this._objects,a),this._objects.push(a);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(a,g){if(!a)return this;var v=this._activeObject,_,y,T,P,D,B=0;if(a===v&&a.type==="activeSelection")for(D=v._objects,_=0;_<D.length;_++)y=D[_],T=this._objects.indexOf(y),T>0+B&&(P=T-1,c(this._objects,y),this._objects.splice(P,0,y)),B++;else T=this._objects.indexOf(a),T!==0&&(P=this._findNewLowerIndex(a,T,g),c(this._objects,a),this._objects.splice(P,0,a));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(a,g,v){var _,y;if(v)for(_=g,y=g-1;y>=0;--y){var T=a.intersectsWithObject(this._objects[y])||a.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(a);if(T){_=y;break}}else _=g-1;return _},bringForward:function(a,g){if(!a)return this;var v=this._activeObject,_,y,T,P,D,B=0;if(a===v&&a.type==="activeSelection")for(D=v._objects,_=D.length;_--;)y=D[_],T=this._objects.indexOf(y),T<this._objects.length-1-B&&(P=T+1,c(this._objects,y),this._objects.splice(P,0,y)),B++;else T=this._objects.indexOf(a),T!==this._objects.length-1&&(P=this._findNewUpperIndex(a,T,g),c(this._objects,a),this._objects.splice(P,0,a));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(a,g,v){var _,y,T;if(v)for(_=g,y=g+1,T=this._objects.length;y<T;++y){var P=a.intersectsWithObject(this._objects[y])||a.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(a);if(P){_=y;break}}else _=g+1;return _},moveTo:function(a,g){return c(this._objects,a),this._objects.splice(g,0,a),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(a){a.dispose&&a.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),t.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),h(t.StaticCanvas.prototype,t.Observable),h(t.StaticCanvas.prototype,t.Collection),h(t.StaticCanvas.prototype,t.DataURLExporter),h(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(a){var g=o();if(!g||!g.getContext)return null;var v=g.getContext("2d");if(!v)return null;switch(a){case"setLineDash":return typeof v.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var a=n(this.lowerCanvasEl);return a&&a.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(a){var g=n(this.lowerCanvasEl);return g&&g.createJPEGStream(a)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(h){h.strokeStyle=this.color,h.lineWidth=this.width,h.lineCap=this.strokeLineCap,h.miterLimit=this.strokeMiterLimit,h.lineJoin=this.strokeLineJoin,h.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(h){var i=this.canvas.viewportTransform;h.save(),h.transform(i[0],i[1],i[2],i[3],i[4],i[5])},_setShadow:function(){if(!!this.shadow){var h=this.canvas,i=this.shadow,c=h.contextTop,u=h.getZoom();h&&h._isRetinaScaling()&&(u*=t.devicePixelRatio),c.shadowColor=i.color,c.shadowBlur=i.blur*u,c.shadowOffsetX=i.offsetX*u,c.shadowOffsetY=i.offsetY*u}},needsFullRender:function(){var h=new t.Color(this.color);return h.getAlpha()<1||!!this.shadow},_resetShadow:function(){var h=this.canvas.contextTop;h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0},_isOutSideCanvas:function(h){return h.x<0||h.x>this.canvas.getWidth()||h.y<0||h.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(h){this.canvas=h,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(h,i,c){var u=i.midPointFrom(c);return h.quadraticCurveTo(i.x,i.y,u.x,u.y),u},onMouseDown:function(h,i){!this.canvas._isMainEvent(i.e)||(this.drawStraightLine=i.e[this.straightLineKey],this._prepareForDrawing(h),this._captureDrawingPath(h),this._render())},onMouseMove:function(h,i){if(!!this.canvas._isMainEvent(i.e)&&(this.drawStraightLine=i.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h))&&this._captureDrawingPath(h)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,u=c.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,c[u-2],c[u-1],!0),r.stroke(),r.restore()}},onMouseUp:function(h){return this.canvas._isMainEvent(h.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(h){var i=new t.Point(h.x,h.y);this._reset(),this._addPoint(i),this.canvas.contextTop.moveTo(i.x,i.y)},_addPoint:function(h){return this._points.length>1&&h.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(h),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(h){var i=new t.Point(h.x,h.y);return this._addPoint(i)},_render:function(h){var i,c,u=this._points[0],r=this._points[1];if(h=h||this.canvas.contextTop,this._saveAndTransform(h),h.beginPath(),this._points.length===2&&u.x===r.x&&u.y===r.y){var s=this.width/1e3;u=new t.Point(u.x,u.y),r=new t.Point(r.x,r.y),u.x-=s,r.x+=s}for(h.moveTo(u.x,u.y),i=1,c=this._points.length;i<c;i++)this._drawSegment(h,u,r),u=this._points[i],r=this._points[i+1];h.lineTo(u.x,u.y),h.stroke(),h.restore()},convertPointsToSVGPath:function(h){var i=this.width/1e3;return t.util.getSmoothPathFromPoints(h,i)},_isEmptySVGPath:function(h){var i=t.util.joinPath(h);return i==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(h){var i=new t.Path(h,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,i.shadow=new t.Shadow(this.shadow)),i},decimatePoints:function(h,i){if(h.length<=2)return h;var c=this.canvas.getZoom(),u=Math.pow(i/c,2),r,s=h.length-1,n=h[0],o=[n],d;for(r=1;r<s-1;r++)d=Math.pow(n.x-h[r].x,2)+Math.pow(n.y-h[r].y,2),d>=u&&(n=h[r],o.push(n));return o.push(h[s]),o},_finalizeAndAddPath:function(){var h=this.canvas.contextTop;h.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var i=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(i)){this.canvas.requestRenderAll();return}var c=this.createPath(i);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(h){this.canvas=h,this.points=[]},drawDot:function(h){var i=this.addPoint(h),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,i),c.restore()},dot:function(h,i){h.fillStyle=i.fill,h.beginPath(),h.arc(i.x,i.y,i.radius,0,Math.PI*2,!1),h.closePath(),h.fill()},onMouseDown:function(h){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(h)},_render:function(){var h=this.canvas.contextTop,i,c,u=this.points;for(this._saveAndTransform(h),i=0,c=u.length;i<c;i++)this.dot(h,u[i]);h.restore()},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(h),this._render()):this.drawDot(h))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove,i,c;this.canvas.renderOnAddRemove=!1;var u=[];for(i=0,c=this.points.length;i<c;i++){var r=this.points[i],s=new t.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&(s.shadow=new t.Shadow(this.shadow)),u.push(s)}var n=new t.Group(u);n.canvas=this.canvas,this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.fire("path:created",{path:n}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},addPoint:function(h){var i=new t.Point(h.x,h.y),c=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,u=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return i.radius=c,i.fill=u,this.points.push(i),i}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(h){this.canvas=h,this.sprayChunks=[]},onMouseDown:function(h){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(h),this.render(this.sprayChunkPoints)},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.addSprayChunk(h),this.render(this.sprayChunkPoints))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var i=[],c=0,u=this.sprayChunks.length;c<u;c++)for(var r=this.sprayChunks[c],s=0,n=r.length;s<n;s++){var o=new t.Rect({width:r[s].width,height:r[s].width,left:r[s].x+1,top:r[s].y+1,originX:"center",originY:"center",fill:this.color});i.push(o)}this.optimizeOverlapping&&(i=this._getOptimizedRects(i));var d=new t.Group(i);this.shadow&&d.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.fire("path:created",{path:d}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},_getOptimizedRects:function(h){var i={},c,u,r;for(u=0,r=h.length;u<r;u++)c=h[u].left+""+h[u].top,i[c]||(i[c]=h[u]);var s=[];for(c in i)s.push(i[c]);return s},render:function(h){var i=this.canvas.contextTop,c,u;for(i.fillStyle=this.color,this._saveAndTransform(i),c=0,u=h.length;c<u;c++){var r=h[c];typeof r.opacity<"u"&&(i.globalAlpha=r.opacity),i.fillRect(r.x,r.y,r.width,r.width)}i.restore()},_render:function(){var h=this.canvas.contextTop,i,c;for(h.fillStyle=this.color,this._saveAndTransform(h),i=0,c=this.sprayChunks.length;i<c;i++)this.render(this.sprayChunks[i]);h.restore()},addSprayChunk:function(h){this.sprayChunkPoints=[];var i,c,u,r=this.width/2,s;for(s=0;s<this.density;s++){i=t.util.getRandomInt(h.x-r,h.x+r),c=t.util.getRandomInt(h.y-r,h.y+r),this.dotWidthVariance?u=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):u=this.dotWidth;var n=new t.Point(i,c);n.width=u,this.randomOpacity&&(n.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(n)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var h=20,i=5,c=t.util.createCanvasElement(),u=c.getContext("2d");return c.width=c.height=h+i,u.fillStyle=this.color,u.beginPath(),u.arc(h/2,h/2,h/2,0,Math.PI*2,!1),u.closePath(),u.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(h){return h.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(h){this.callSuper("_setBrushStyles",h),h.strokeStyle=this.getPattern(h)},createPath:function(h){var i=this.callSuper("createPath",h),c=i._getLeftTopCoords().scalarAdd(i.strokeWidth/2);return i.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),i}}),function(){var h=t.util.getPointer,i=t.util.degreesToRadians,c=t.util.isTouchEvent;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(r,s){s||(s={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(r,s),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var r=this.getActiveObjects(),s,n,o;if(r.length>0&&!this.preserveObjectStacking){n=[],o=[];for(var d=0,a=this._objects.length;d<a;d++)s=this._objects[d],r.indexOf(s)===-1?n.push(s):o.push(s);r.length>1&&(this._activeObject._objects=o),n.push.apply(n,o)}else n=this._objects;return n},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var r=this.contextContainer;return this.renderCanvas(r,this._chooseObjectsToRender()),this},renderTopLayer:function(r){r.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(r),this.contextTopDirty=!0),r.restore()},renderTop:function(){var r=this.contextTop;return this.clearContext(r),this.renderTopLayer(r),this.fire("after:render"),this},_normalizePointer:function(r,s){var n=r.calcTransformMatrix(),o=t.util.invertTransform(n),d=this.restorePointerVpt(s);return t.util.transformPoint(d,o)},isTargetTransparent:function(r,s,n){if(r.shouldCache()&&r._cacheCanvas&&r!==this._activeObject){var o=this._normalizePointer(r,{x:s,y:n}),d=Math.max(r.cacheTranslationX+o.x*r.zoomX,0),a=Math.max(r.cacheTranslationY+o.y*r.zoomY,0),y=t.util.isTransparent(r._cacheContext,Math.round(d),Math.round(a),this.targetFindTolerance);return y}var g=this.contextCache,v=r.selectionBackgroundColor,_=this.viewportTransform;r.selectionBackgroundColor="",this.clearContext(g),g.save(),g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),r.render(g),g.restore(),r.selectionBackgroundColor=v;var y=t.util.isTransparent(g,s,n,this.targetFindTolerance);return y},_isSelectionKeyPressed:function(r){var s=!1;return Array.isArray(this.selectionKey)?s=!!this.selectionKey.find(function(n){return r[n]===!0}):s=r[this.selectionKey],s},_shouldClearSelection:function(r,s){var n=this.getActiveObjects(),o=this._activeObject;return!s||s&&o&&n.length>1&&n.indexOf(s)===-1&&o!==s&&!this._isSelectionKeyPressed(r)||s&&!s.evented||s&&!s.selectable&&o&&o!==s},_shouldCenterTransform:function(r,s,n){if(!!r){var o;return s==="scale"||s==="scaleX"||s==="scaleY"||s==="resizing"?o=this.centeredScaling||r.centeredScaling:s==="rotate"&&(o=this.centeredRotation||r.centeredRotation),o?!n:n}},_getOriginFromCorner:function(r,s){var n={x:r.originX,y:r.originY};return s==="ml"||s==="tl"||s==="bl"?n.x="right":(s==="mr"||s==="tr"||s==="br")&&(n.x="left"),s==="tl"||s==="mt"||s==="tr"?n.y="bottom":(s==="bl"||s==="mb"||s==="br")&&(n.y="top"),n},_getActionFromCorner:function(r,s,n,o){if(!s||!r)return"drag";var d=o.controls[s];return d.getActionName(n,d,o)},_setupCurrentTransform:function(r,s,n){if(!!s){var o=this.getPointer(r),d=s.__corner,a=s.controls[d],g=n&&d?a.getActionHandler(r,s,a):t.controlsUtils.dragHandler,v=this._getActionFromCorner(n,d,r,s),_=this._getOriginFromCorner(s,d),y=r[this.centeredKey],T={target:s,action:v,actionHandler:g,corner:d,scaleX:s.scaleX,scaleY:s.scaleY,skewX:s.skewX,skewY:s.skewY,offsetX:o.x-s.left,offsetY:o.y-s.top,originX:_.x,originY:_.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:i(s.angle),width:s.width*s.scaleX,shiftKey:r.shiftKey,altKey:y,original:t.util.saveObjectTransform(s)};this._shouldCenterTransform(s,v,y)&&(T.originX="center",T.originY="center"),T.original.originX=_.x,T.original.originY=_.y,this._currentTransform=T,this._beforeTransform(r)}},setCursor:function(r){this.upperCanvasEl.style.cursor=r},_drawSelection:function(r){var s=this._groupSelector,n=new t.Point(s.ex,s.ey),o=t.util.transformPoint(n,this.viewportTransform),d=new t.Point(s.ex+s.left,s.ey+s.top),a=t.util.transformPoint(d,this.viewportTransform),g=Math.min(o.x,a.x),v=Math.min(o.y,a.y),_=Math.max(o.x,a.x),y=Math.max(o.y,a.y),T=this.selectionLineWidth/2;this.selectionColor&&(r.fillStyle=this.selectionColor,r.fillRect(g,v,_-g,y-v)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(r.lineWidth=this.selectionLineWidth,r.strokeStyle=this.selectionBorderColor,g+=T,v+=T,_-=T,y-=T,t.Object.prototype._setLineDash.call(this,r,this.selectionDashArray),r.strokeRect(g,v,_-g,y-v))},findTarget:function(r,s){if(!this.skipTargetFind){var n=!0,o=this.getPointer(r,n),d=this._activeObject,a=this.getActiveObjects(),g,v,_=c(r),y=a.length>1&&!s||a.length===1;if(this.targets=[],y&&d._findTargetCorner(o,_)||a.length>1&&!s&&d===this._searchPossibleTargets([d],o))return d;if(a.length===1&&d===this._searchPossibleTargets([d],o))if(this.preserveObjectStacking)g=d,v=this.targets,this.targets=[];else return d;var T=this._searchPossibleTargets(this._objects,o);return r[this.altSelectionKey]&&T&&g&&T!==g&&(T=g,this.targets=v),T}},_checkTarget:function(r,s,n){if(s&&s.visible&&s.evented&&s.containsPoint(r))if((this.perPixelTargetFind||s.perPixelTargetFind)&&!s.isEditing){var o=this.isTargetTransparent(s,n.x,n.y);if(!o)return!0}else return!0},_searchPossibleTargets:function(r,s){for(var n,o=r.length,d;o--;){var a=r[o],g=a.group?this._normalizePointer(a.group,s):s;if(this._checkTarget(g,a,s)){n=r[o],n.subTargetCheck&&n instanceof t.Group&&(d=this._searchPossibleTargets(n._objects,s),d&&this.targets.push(d));break}}return n},restorePointerVpt:function(r){return t.util.transformPoint(r,t.util.invertTransform(this.viewportTransform))},getPointer:function(r,s){if(this._absolutePointer&&!s)return this._absolutePointer;if(this._pointer&&s)return this._pointer;var n=h(r),o=this.upperCanvasEl,d=o.getBoundingClientRect(),a=d.width||0,g=d.height||0,v;(!a||!g)&&("top"in d&&"bottom"in d&&(g=Math.abs(d.top-d.bottom)),"right"in d&&"left"in d&&(a=Math.abs(d.right-d.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,s||(n=this.restorePointerVpt(n));var _=this.getRetinaScaling();return _!==1&&(n.x/=_,n.y/=_),a===0||g===0?v={width:1,height:1}:v={width:o.width/a,height:o.height/g},{x:n.x*v.width,y:n.y*v.height}},_createUpperCanvas:function(){var r=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),s=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),t.util.addClass(n,"upper-canvas "+r),this.wrapperEl.appendChild(n),this._copyCanvasStyle(s,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(r){var s=this.width||r.width,n=this.height||r.height;t.util.setStyle(r,{position:"absolute",width:s+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),r.width=s,r.height=n,t.util.makeElementUnselectable(r)},_copyCanvasStyle:function(r,s){s.style.cssText=r.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var r=this._activeObject;return r?r.type==="activeSelection"&&r._objects?r._objects.slice(0):[r]:[]},_onObjectRemoved:function(r){r===this._activeObject&&(this.fire("before:selection:cleared",{target:r}),this._discardActiveObject(),this.fire("selection:cleared",{target:r}),r.fire("deselected")),r===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",r)},_fireSelectionEvents:function(r,s){var n=!1,o=this.getActiveObjects(),d=[],a=[];r.forEach(function(g){o.indexOf(g)===-1&&(n=!0,g.fire("deselected",{e:s,target:g}),a.push(g))}),o.forEach(function(g){r.indexOf(g)===-1&&(n=!0,g.fire("selected",{e:s,target:g}),d.push(g))}),r.length>0&&o.length>0?n&&this.fire("selection:updated",{e:s,selected:d,deselected:a}):o.length>0?this.fire("selection:created",{e:s,selected:d}):r.length>0&&this.fire("selection:cleared",{e:s,deselected:a})},setActiveObject:function(r,s){var n=this.getActiveObjects();return this._setActiveObject(r,s),this._fireSelectionEvents(n,s),this},_setActiveObject:function(r,s){return this._activeObject===r||!this._discardActiveObject(s,r)||r.onSelect({e:s})?!1:(this._activeObject=r,!0)},_discardActiveObject:function(r,s){var n=this._activeObject;if(n){if(n.onDeselect({e:r,object:s}))return!1;this._activeObject=null}return!0},discardActiveObject:function(r){var s=this.getActiveObjects(),n=this.getActiveObject();return s.length&&this.fire("before:selection:cleared",{target:n,e:r}),this._discardActiveObject(r),this._fireSelectionEvents(s,r),this},dispose:function(){var r=this.wrapperEl;return this.removeListeners(),r.removeChild(this.upperCanvasEl),r.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(s){t.util.cleanUpJsdomNode(this[s]),this[s]=void 0}.bind(this)),r.parentNode&&r.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(r){var s=this._activeObject;s&&s._renderControls(r)},_toObject:function(r,s,n){var o=this._realizeGroupTransformOnObject(r),d=this.callSuper("_toObject",r,s,n);return this._unwindGroupTransformOnObject(r,o),d},_realizeGroupTransformOnObject:function(r){if(r.group&&r.group.type==="activeSelection"&&this._activeObject===r.group){var s=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],n={};return s.forEach(function(o){n[o]=r[o]}),t.util.addTransformToObject(r,this._activeObject.calcOwnMatrix()),n}else return null},_unwindGroupTransformOnObject:function(r,s){s&&r.set(s)},_setSVGObject:function(r,s,n){var o=this._realizeGroupTransformOnObject(s);this.callSuper("_setSVGObject",r,s,n),this._unwindGroupTransformOnObject(s,o)},setViewportTransform:function(r){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,r)}});for(var u in t.StaticCanvas)u!=="prototype"&&(t.Canvas[u]=t.StaticCanvas[u])}(),function(){var h=t.util.addListener,i=t.util.removeListener,c=3,u=2,r=1,s={passive:!1};function n(o,d){return o.button&&o.button===d-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(h,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(o,d){var a=this.upperCanvasEl,g=this._getEventPrefix();o(t.window,"resize",this._onResize),o(a,g+"down",this._onMouseDown),o(a,g+"move",this._onMouseMove,s),o(a,g+"out",this._onMouseOut),o(a,g+"enter",this._onMouseEnter),o(a,"wheel",this._onMouseWheel),o(a,"contextmenu",this._onContextMenu),o(a,"dblclick",this._onDoubleClick),o(a,"dragover",this._onDragOver),o(a,"dragenter",this._onDragEnter),o(a,"dragleave",this._onDragLeave),o(a,"drop",this._onDrop),this.enablePointerEvents||o(a,"touchstart",this._onTouchStart,s),typeof eventjs<"u"&&d in eventjs&&(eventjs[d](a,"gesture",this._onGesture),eventjs[d](a,"drag",this._onDrag),eventjs[d](a,"orientation",this._onOrientationChange),eventjs[d](a,"shake",this._onShake),eventjs[d](a,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(i,"remove");var o=this._getEventPrefix();i(t.document,o+"up",this._onMouseUp),i(t.document,"touchend",this._onTouchEnd,s),i(t.document,o+"move",this._onMouseMove,s),i(t.document,"touchmove",this._onMouseMove,s)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(o,d){this.__onTransformGesture&&this.__onTransformGesture(o,d)},_onDrag:function(o,d){this.__onDrag&&this.__onDrag(o,d)},_onMouseWheel:function(o){this.__onMouseWheel(o)},_onMouseOut:function(o){var d=this._hoveredTarget;this.fire("mouse:out",{target:d,e:o}),this._hoveredTarget=null,d&&d.fire("mouseout",{e:o});var a=this;this._hoveredTargets.forEach(function(g){a.fire("mouse:out",{target:d,e:o}),g&&d.fire("mouseout",{e:o})}),this._hoveredTargets=[]},_onMouseEnter:function(o){!this._currentTransform&&!this.findTarget(o)&&(this.fire("mouse:over",{target:null,e:o}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(o,d){this.__onOrientationChange&&this.__onOrientationChange(o,d)},_onShake:function(o,d){this.__onShake&&this.__onShake(o,d)},_onLongPress:function(o,d){this.__onLongPress&&this.__onLongPress(o,d)},_onDragOver:function(o){o.preventDefault();var d=this._simpleEventHandler("dragover",o);this._fireEnterLeaveEvents(d,o)},_onDrop:function(o){return this._simpleEventHandler("drop:before",o),this._simpleEventHandler("drop",o)},_onContextMenu:function(o){return this.stopContextMenu&&(o.stopPropagation(),o.preventDefault()),!1},_onDoubleClick:function(o){this._cacheTransformEventData(o),this._handleEvent(o,"dblclick"),this._resetTransformEventData(o)},getPointerId:function(o){var d=o.changedTouches;return d?d[0]&&d[0].identifier:this.enablePointerEvents?o.pointerId:-1},_isMainEvent:function(o){return o.isPrimary===!0?!0:o.isPrimary===!1?!1:o.type==="touchend"&&o.touches.length===0?!0:o.changedTouches?o.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(o){o.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(o)),this.__onMouseDown(o),this._resetTransformEventData();var d=this.upperCanvasEl,a=this._getEventPrefix();h(t.document,"touchend",this._onTouchEnd,s),h(t.document,"touchmove",this._onMouseMove,s),i(d,a+"down",this._onMouseDown)},_onMouseDown:function(o){this.__onMouseDown(o),this._resetTransformEventData();var d=this.upperCanvasEl,a=this._getEventPrefix();i(d,a+"move",this._onMouseMove,s),h(t.document,a+"up",this._onMouseUp),h(t.document,a+"move",this._onMouseMove,s)},_onTouchEnd:function(o){if(!(o.touches.length>0)){this.__onMouseUp(o),this._resetTransformEventData(),this.mainTouchId=null;var d=this._getEventPrefix();i(t.document,"touchend",this._onTouchEnd,s),i(t.document,"touchmove",this._onMouseMove,s);var a=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){h(a.upperCanvasEl,d+"down",a._onMouseDown),a._willAddMouseDown=0},400)}},_onMouseUp:function(o){this.__onMouseUp(o),this._resetTransformEventData();var d=this.upperCanvasEl,a=this._getEventPrefix();this._isMainEvent(o)&&(i(t.document,a+"up",this._onMouseUp),i(t.document,a+"move",this._onMouseMove,s),h(d,a+"move",this._onMouseMove,s))},_onMouseMove:function(o){!this.allowTouchScrolling&&o.preventDefault&&o.preventDefault(),this.__onMouseMove(o)},_onResize:function(){this.calcOffset()},_shouldRender:function(o){var d=this._activeObject;return!!d!=!!o||d&&o&&d!==o?!0:(d&&d.isEditing,!1)},__onMouseUp:function(o){var d,a=this._currentTransform,g=this._groupSelector,v=!1,_=!g||g.left===0&&g.top===0;if(this._cacheTransformEventData(o),d=this._target,this._handleEvent(o,"up:before"),n(o,c)){this.fireRightClick&&this._handleEvent(o,"up",c,_);return}if(n(o,u)){this.fireMiddleClick&&this._handleEvent(o,"up",u,_),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(o);return}if(!!this._isMainEvent(o)){if(a&&(this._finalizeCurrentTransform(o),v=a.actionPerformed),!_){var y=d===this._activeObject;this._maybeGroupObjects(o),v||(v=this._shouldRender(d)||!y&&d===this._activeObject)}var T,P;if(d){if(T=d._findTargetCorner(this.getPointer(o,!0),t.util.isTouchEvent(o)),d.selectable&&d!==this._activeObject&&d.activeOn==="up")this.setActiveObject(d,o),v=!0;else{var D=d.controls[T],B=D&&D.getMouseUpHandler(o,d,D);B&&(P=this.getPointer(o),B(o,a,P.x,P.y))}d.isMoving=!1}if(a&&(a.target!==d||a.corner!==T)){var j=a.target&&a.target.controls[a.corner],z=j&&j.getMouseUpHandler(o,d,D);P=P||this.getPointer(o),z&&z(o,a,P.x,P.y)}this._setCursorFromEvent(o,d),this._handleEvent(o,"up",r,_),this._groupSelector=null,this._currentTransform=null,d&&(d.__corner=0),v?this.requestRenderAll():_||this.renderTop()}},_simpleEventHandler:function(o,d){var a=this.findTarget(d),g=this.targets,v={e:d,target:a,subTargets:g};if(this.fire(o,v),a&&a.fire(o,v),!g)return a;for(var _=0;_<g.length;_++)g[_].fire(o,v);return a},_handleEvent:function(o,d,a,g){var v=this._target,_=this.targets||[],y={e:o,target:v,subTargets:_,button:a||r,isClick:g||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};d==="up"&&(y.currentTarget=this.findTarget(o),y.currentSubTargets=this.targets),this.fire("mouse:"+d,y),v&&v.fire("mouse"+d,y);for(var T=0;T<_.length;T++)_[T].fire("mouse"+d,y)},_finalizeCurrentTransform:function(o){var d=this._currentTransform,a=d.target,g={e:o,target:a,transform:d,action:d.action};a._scaling&&(a._scaling=!1),a.setCoords(),(d.actionPerformed||this.stateful&&a.hasStateChanged())&&this._fire("modified",g)},_onMouseDownInDrawingMode:function(o){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(o).requestRenderAll();var d=this.getPointer(o);this.freeDrawingBrush.onMouseDown(d,{e:o,pointer:d}),this._handleEvent(o,"down")},_onMouseMoveInDrawingMode:function(o){if(this._isCurrentlyDrawing){var d=this.getPointer(o);this.freeDrawingBrush.onMouseMove(d,{e:o,pointer:d})}this.setCursor(this.freeDrawingCursor),this._handleEvent(o,"move")},_onMouseUpInDrawingMode:function(o){var d=this.getPointer(o);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:o,pointer:d}),this._handleEvent(o,"up")},__onMouseDown:function(o){this._cacheTransformEventData(o),this._handleEvent(o,"down:before");var d=this._target;if(n(o,c)){this.fireRightClick&&this._handleEvent(o,"down",c);return}if(n(o,u)){this.fireMiddleClick&&this._handleEvent(o,"down",u);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(o);return}if(!!this._isMainEvent(o)&&!this._currentTransform){var a=this._pointer;this._previousPointer=a;var g=this._shouldRender(d),v=this._shouldGroup(o,d);if(this._shouldClearSelection(o,d)?this.discardActiveObject(o):v&&(this._handleGrouping(o,d),d=this._activeObject),this.selection&&(!d||!d.selectable&&!d.isEditing&&d!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),d){var _=d===this._activeObject;d.selectable&&d.activeOn==="down"&&this.setActiveObject(d,o);var y=d._findTargetCorner(this.getPointer(o,!0),t.util.isTouchEvent(o));if(d.__corner=y,d===this._activeObject&&(y||!v)){this._setupCurrentTransform(o,d,_);var T=d.controls[y],a=this.getPointer(o),P=T&&T.getMouseDownHandler(o,d,T);P&&P(o,this._currentTransform,a.x,a.y)}}this._handleEvent(o,"down"),(g||v)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(o){this._resetTransformEventData(),this._pointer=this.getPointer(o,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(o)||null},_beforeTransform:function(o){var d=this._currentTransform;this.stateful&&d.target.saveState(),this.fire("before:transform",{e:o,transform:d})},__onMouseMove:function(o){this._handleEvent(o,"move:before"),this._cacheTransformEventData(o);var d,a;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(o);return}if(!!this._isMainEvent(o)){var g=this._groupSelector;g?(a=this._absolutePointer,g.left=a.x-g.ex,g.top=a.y-g.ey,this.renderTop()):this._currentTransform?this._transformObject(o):(d=this.findTarget(o)||null,this._setCursorFromEvent(o,d),this._fireOverOutEvents(d,o)),this._handleEvent(o,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(o,d){var a=this._hoveredTarget,g=this._hoveredTargets,v=this.targets,_=Math.max(g.length,v.length);this.fireSyntheticInOutEvents(o,d,{oldTarget:a,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var y=0;y<_;y++)this.fireSyntheticInOutEvents(v[y],d,{oldTarget:g[y],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=o,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(o,d){var a=this._draggedoverTarget,g=this._hoveredTargets,v=this.targets,_=Math.max(g.length,v.length);this.fireSyntheticInOutEvents(o,d,{oldTarget:a,evtOut:"dragleave",evtIn:"dragenter"});for(var y=0;y<_;y++)this.fireSyntheticInOutEvents(v[y],d,{oldTarget:g[y],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=o},fireSyntheticInOutEvents:function(o,d,a){var g,v,_=a.oldTarget,y,T,P=_!==o,D=a.canvasEvtIn,B=a.canvasEvtOut;P&&(g={e:d,target:o,previousTarget:_},v={e:d,target:_,nextTarget:o}),T=o&&P,y=_&&P,y&&(B&&this.fire(B,v),_.fire(a.evtOut,v)),T&&(D&&this.fire(D,g),o.fire(a.evtIn,g))},__onMouseWheel:function(o){this._cacheTransformEventData(o),this._handleEvent(o,"wheel"),this._resetTransformEventData()},_transformObject:function(o){var d=this.getPointer(o),a=this._currentTransform;a.reset=!1,a.shiftKey=o.shiftKey,a.altKey=o[this.centeredKey],this._performTransformAction(o,a,d),a.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(o,d,a){var g=a.x,v=a.y,_=d.action,y=!1,T=d.actionHandler;T&&(y=T(o,d,g,v)),_==="drag"&&y&&(d.target.isMoving=!0,this.setCursor(d.target.moveCursor||this.moveCursor)),d.actionPerformed=d.actionPerformed||y},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(o,d){if(!d)return this.setCursor(this.defaultCursor),!1;var a=d.hoverCursor||this.hoverCursor,g=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,v=(!g||!g.contains(d))&&d._findTargetCorner(this.getPointer(o,!0));v?this.setCursor(this.getCornerCursor(v,d,o)):(d.subTargetCheck&&this.targets.concat().reverse().map(function(_){a=_.hoverCursor||a}),this.setCursor(a))},getCornerCursor:function(o,d,a){var g=d.controls[o];return g.cursorStyleHandler(a,g,d)}})}(),function(){var h=Math.min,i=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(c,u){var r=this._activeObject;return r&&this._isSelectionKeyPressed(c)&&u&&u.selectable&&this.selection&&(r!==u||r.type==="activeSelection")&&!u.onSelect({e:c})},_handleGrouping:function(c,u){var r=this._activeObject;r.__corner||u===r&&(u=this.findTarget(c,!0),!u||!u.selectable)||(r&&r.type==="activeSelection"?this._updateActiveSelection(u,c):this._createActiveSelection(u,c))},_updateActiveSelection:function(c,u){var r=this._activeObject,s=r._objects.slice(0);r.contains(c)?(r.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),r.size()===1&&this._setActiveObject(r.item(0),u)):(r.addWithUpdate(c),this._hoveredTarget=r,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(s,u)},_createActiveSelection:function(c,u){var r=this.getActiveObjects(),s=this._createGroup(c);this._hoveredTarget=s,this._setActiveObject(s,u),this._fireSelectionEvents(r,u)},_createGroup:function(c){var u=this._objects,r=u.indexOf(this._activeObject)<u.indexOf(c),s=r?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(s,{canvas:this})},_groupSelectedObjects:function(c){var u=this._collectObjects(c),r;u.length===1?this.setActiveObject(u[0],c):u.length>1&&(r=new t.ActiveSelection(u.reverse(),{canvas:this}),this.setActiveObject(r,c))},_collectObjects:function(c){for(var u=[],r,s=this._groupSelector.ex,n=this._groupSelector.ey,o=s+this._groupSelector.left,d=n+this._groupSelector.top,a=new t.Point(h(s,o),h(n,d)),g=new t.Point(i(s,o),i(n,d)),v=!this.selectionFullyContained,_=s===o&&n===d,y=this._objects.length;y--&&(r=this._objects[y],!(!(!r||!r.selectable||!r.visible)&&(v&&r.intersectsWithRect(a,g,!0)||r.isContainedWithinRect(a,g,!0)||v&&r.containsPoint(a,null,!0)||v&&r.containsPoint(g,null,!0))&&(u.push(r),_))););return u.length>1&&(u=u.filter(function(T){return!T.onSelect({e:c})})),u},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(h){h||(h={});var i=h.format||"png",c=h.quality||1,u=(h.multiplier||1)*(h.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(u,h);return t.util.toDataURL(r,i,c)},toCanvasElement:function(h,i){h=h||1,i=i||{};var c=(i.width||this.width)*h,u=(i.height||this.height)*h,r=this.getZoom(),s=this.width,n=this.height,o=r*h,d=this.viewportTransform,a=(d[4]-(i.left||0))*h,g=(d[5]-(i.top||0))*h,v=this.interactive,_=[o,0,0,o,a,g],y=this.enableRetinaScaling,T=t.util.createCanvasElement(),P=this.contextTop;return T.width=c,T.height=u,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=_,this.width=c,this.height=u,this.calcViewportBoundaries(),this.renderCanvas(T.getContext("2d"),this._objects),this.viewportTransform=d,this.width=s,this.height=n,this.calcViewportBoundaries(),this.interactive=v,this.enableRetinaScaling=y,this.contextTop=P,T}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(h,i,c){if(!!h){var u=typeof h=="string"?JSON.parse(h):t.util.object.clone(h),r=this,s=u.clipPath,n=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete u.clipPath,this._enlivenObjects(u.objects,function(o){r.clear(),r._setBgOverlay(u,function(){s?r._enlivenObjects([s],function(d){r.clipPath=d[0],r.__setupCanvas.call(r,u,o,n,i)}):r.__setupCanvas.call(r,u,o,n,i)})},c),this}},__setupCanvas:function(h,i,c,u){var r=this;i.forEach(function(s,n){r.insertAt(s,n)}),this.renderOnAddRemove=c,delete h.objects,delete h.backgroundImage,delete h.overlayImage,delete h.background,delete h.overlay,this._setOptions(h),this.renderAll(),u&&u()},_setBgOverlay:function(h,i){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!h.backgroundImage&&!h.overlayImage&&!h.background&&!h.overlay){i&&i();return}var u=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&i&&i()};this.__setBgOverlay("backgroundImage",h.backgroundImage,c,u),this.__setBgOverlay("overlayImage",h.overlayImage,c,u),this.__setBgOverlay("backgroundColor",h.background,c,u),this.__setBgOverlay("overlayColor",h.overlay,c,u)},__setBgOverlay:function(h,i,c,u){var r=this;if(!i){c[h]=!0,u&&u();return}h==="backgroundImage"||h==="overlayImage"?t.util.enlivenObjects([i],function(s){r[h]=s[0],c[h]=!0,u&&u()}):this["set"+t.util.string.capitalize(h,!0)](i,function(){c[h]=!0,u&&u()})},_enlivenObjects:function(h,i,c){if(!h||h.length===0){i&&i([]);return}t.util.enlivenObjects(h,function(u){i&&i(u)},null,c)},_toDataURL:function(h,i){this.clone(function(c){i(c.toDataURL(h))})},_toDataURLWithMultiplier:function(h,i,c){this.clone(function(u){c(u.toDataURLWithMultiplier(h,i))})},clone:function(h,i){var c=JSON.stringify(this.toJSON(i));this.cloneWithoutData(function(u){u.loadFromJSON(c,function(){h&&h(u)})})},cloneWithoutData:function(h){var i=t.util.createCanvasElement();i.width=this.width,i.height=this.height;var c=new t.Canvas(i);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),h&&h(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):h&&h(c)}}),function(h){var i=h.fabric||(h.fabric={}),c=i.util.object.extend,u=i.util.object.clone,r=i.util.toFixed,s=i.util.string.capitalize,n=i.util.degreesToRadians,o=!i.isLikelyNode,d=2;i.Object||(i.Object=i.util.createClass(i.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:o,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(a){a&&this.setOptions(a)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=i.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(a){var g=i.perfLimitSizeTotal,v=a.width,_=a.height,y=i.maxCacheSideLimit,T=i.minCacheSideLimit;if(v<=y&&_<=y&&v*_<=g)return v<T&&(a.width=T),_<T&&(a.height=T),a;var P=v/_,D=i.util.limitDimsByArea(P,g),B=i.util.capValue,j=B(T,D.x,y),z=B(T,D.y,y);return v>j&&(a.zoomX/=v/j,a.width=j,a.capped=!0),_>z&&(a.zoomY/=_/z,a.height=z,a.capped=!0),a},_getCacheCanvasDimensions:function(){var a=this.getTotalObjectScaling(),g=this._getTransformedDimensions(0,0),v=g.x*a.scaleX/this.scaleX,_=g.y*a.scaleY/this.scaleY;return{width:v+d,height:_+d,zoomX:a.scaleX,zoomY:a.scaleY,x:v,y:_}},_updateCacheCanvas:function(){var a=this.canvas;if(this.noScaleCache&&a&&a._currentTransform){var g=a._currentTransform.target,v=a._currentTransform.action;if(this===g&&v.slice&&v.slice(0,5)==="scale")return!1}var _=this._cacheCanvas,y=this._limitCacheSize(this._getCacheCanvasDimensions()),T=i.minCacheSideLimit,P=y.width,D=y.height,B,j,z=y.zoomX,ee=y.zoomY,ne=P!==this.cacheWidth||D!==this.cacheHeight,ie=this.zoomX!==z||this.zoomY!==ee,Z=ne||ie,re=0,pe=0,me=!1;if(ne){var G=this._cacheCanvas.width,O=this._cacheCanvas.height,I=P>G||D>O,k=(P<G*.9||D<O*.9)&&G>T&&O>T;me=I||k,I&&!y.capped&&(P>T||D>T)&&(re=P*.1,pe=D*.1)}return this instanceof i.Text&&this.path&&(Z=!0,me=!0,re+=this.getHeightOfLine(0)*this.zoomX,pe+=this.getHeightOfLine(0)*this.zoomY),Z?(me?(_.width=Math.ceil(P+re),_.height=Math.ceil(D+pe)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,_.width,_.height)),B=y.x/2,j=y.y/2,this.cacheTranslationX=Math.round(_.width/2-B)+B,this.cacheTranslationY=Math.round(_.height/2-j)+j,this.cacheWidth=P,this.cacheHeight=D,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(z,ee),this.zoomX=z,this.zoomY=ee,!0):!1},setOptions:function(a){this._setOptions(a),this._initGradient(a.fill,"fill"),this._initGradient(a.stroke,"stroke"),this._initPattern(a.fill,"fill"),this._initPattern(a.stroke,"stroke")},transform:function(a){var g=this.group&&!this.group._transformDone||this.group&&this.canvas&&a===this.canvas.contextTop,v=this.calcTransformMatrix(!g);a.transform(v[0],v[1],v[2],v[3],v[4],v[5])},toObject:function(a){var g=i.Object.NUM_FRACTION_DIGITS,v={type:this.type,version:i.version,originX:this.originX,originY:this.originY,left:r(this.left,g),top:r(this.top,g),width:r(this.width,g),height:r(this.height,g),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,g),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,g),scaleX:r(this.scaleX,g),scaleY:r(this.scaleY,g),angle:r(this.angle,g),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,g),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,g),skewY:r(this.skewY,g)};return this.clipPath&&!this.clipPath.excludeFromExport&&(v.clipPath=this.clipPath.toObject(a),v.clipPath.inverted=this.clipPath.inverted,v.clipPath.absolutePositioned=this.clipPath.absolutePositioned),i.util.populateWithProperties(this,v,a),this.includeDefaultValues||(v=this._removeDefaultValues(v)),v},toDatalessObject:function(a){return this.toObject(a)},_removeDefaultValues:function(a){var g=i.util.getKlass(a.type).prototype,v=g.stateProperties;return v.forEach(function(_){_==="left"||_==="top"||(a[_]===g[_]&&delete a[_],Array.isArray(a[_])&&Array.isArray(g[_])&&a[_].length===0&&g[_].length===0&&delete a[_])}),a},toString:function(){return"#<fabric."+s(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var a=i.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(a.scaleX),scaleY:Math.abs(a.scaleY)}},getTotalObjectScaling:function(){var a=this.getObjectScaling(),g=a.scaleX,v=a.scaleY;if(this.canvas){var _=this.canvas.getZoom(),y=this.canvas.getRetinaScaling();g*=_*y,v*=_*y}return{scaleX:g,scaleY:v}},getObjectOpacity:function(){var a=this.opacity;return this.group&&(a*=this.group.getObjectOpacity()),a},_set:function(a,g){var v=a==="scaleX"||a==="scaleY",_=this[a]!==g,y=!1;return v&&(g=this._constrainScale(g)),a==="scaleX"&&g<0?(this.flipX=!this.flipX,g*=-1):a==="scaleY"&&g<0?(this.flipY=!this.flipY,g*=-1):a==="shadow"&&g&&!(g instanceof i.Shadow)?g=new i.Shadow(g):a==="dirty"&&this.group&&this.group.set("dirty",g),this[a]=g,_&&(y=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(a)>-1?(this.dirty=!0,y&&this.group.set("dirty",!0)):y&&this.stateProperties.indexOf(a)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:i.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(a){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(a.save(),this._setupCompositeOperation(a),this.drawSelectionBackground(a),this.transform(a),this._setOpacity(a),this._setShadow(a,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(a)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(a),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),a.restore())},renderCache:function(a){a=a||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,a.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(a,g){if(a.save(),g.inverted?a.globalCompositeOperation="destination-out":a.globalCompositeOperation="destination-in",g.absolutePositioned){var v=i.util.invertTransform(this.calcTransformMatrix());a.transform(v[0],v[1],v[2],v[3],v[4],v[5])}g.transform(a),a.scale(1/g.zoomX,1/g.zoomY),a.drawImage(g._cacheCanvas,-g.cacheTranslationX,-g.cacheTranslationY),a.restore()},drawObject:function(a,g){var v=this.fill,_=this.stroke;g?(this.fill="black",this.stroke="",this._setClippingProperties(a)):this._renderBackground(a),this._render(a),this._drawClipPath(a,this.clipPath),this.fill=v,this.stroke=_},_drawClipPath:function(a,g){!g||(g.canvas=this.canvas,g.shouldCache(),g._transformDone=!0,g.renderCache({forClipping:!0}),this.drawClipPathOnCache(a,g))},drawCacheOnCanvas:function(a){a.scale(1/this.zoomX,1/this.zoomY),a.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(a){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!a&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!a){var g=this.cacheWidth/this.zoomX,v=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-g/2,-v/2,g,v)}return!0}return!1},_renderBackground:function(a){if(!!this.backgroundColor){var g=this._getNonTransformedDimensions();a.fillStyle=this.backgroundColor,a.fillRect(-g.x/2,-g.y/2,g.x,g.y),this._removeShadow(a)}},_setOpacity:function(a){this.group&&!this.group._transformDone?a.globalAlpha=this.getObjectOpacity():a.globalAlpha*=this.opacity},_setStrokeStyles:function(a,g){var v=g.stroke;v&&(a.lineWidth=g.strokeWidth,a.lineCap=g.strokeLineCap,a.lineDashOffset=g.strokeDashOffset,a.lineJoin=g.strokeLineJoin,a.miterLimit=g.strokeMiterLimit,v.toLive?v.gradientUnits==="percentage"||v.gradientTransform||v.patternTransform?this._applyPatternForTransformedGradient(a,v):(a.strokeStyle=v.toLive(a,this),this._applyPatternGradientTransform(a,v)):a.strokeStyle=g.stroke)},_setFillStyles:function(a,g){var v=g.fill;v&&(v.toLive?(a.fillStyle=v.toLive(a,this),this._applyPatternGradientTransform(a,g.fill)):a.fillStyle=v)},_setClippingProperties:function(a){a.globalAlpha=1,a.strokeStyle="transparent",a.fillStyle="#000000"},_setLineDash:function(a,g){!g||g.length===0||(1&g.length&&g.push.apply(g,g),a.setLineDash(g))},_renderControls:function(a,g){var v=this.getViewportTransform(),_=this.calcTransformMatrix(),y,T,P;g=g||{},T=typeof g.hasBorders<"u"?g.hasBorders:this.hasBorders,P=typeof g.hasControls<"u"?g.hasControls:this.hasControls,_=i.util.multiplyTransformMatrices(v,_),y=i.util.qrDecompose(_),a.save(),a.translate(y.translateX,y.translateY),a.lineWidth=1*this.borderScaleFactor,this.group||(a.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(y.angle-=180),a.rotate(n(this.group?y.angle:this.angle)),g.forActiveSelection||this.group?T&&this.drawBordersInGroup(a,y,g):T&&this.drawBorders(a,g),P&&this.drawControls(a,g),a.restore()},_setShadow:function(a){if(!!this.shadow){var g=this.shadow,v=this.canvas,_,y=v&&v.viewportTransform[0]||1,T=v&&v.viewportTransform[3]||1;g.nonScaling?_={scaleX:1,scaleY:1}:_=this.getObjectScaling(),v&&v._isRetinaScaling()&&(y*=i.devicePixelRatio,T*=i.devicePixelRatio),a.shadowColor=g.color,a.shadowBlur=g.blur*i.browserShadowBlurConstant*(y+T)*(_.scaleX+_.scaleY)/4,a.shadowOffsetX=g.offsetX*y*_.scaleX,a.shadowOffsetY=g.offsetY*T*_.scaleY}},_removeShadow:function(a){!this.shadow||(a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0)},_applyPatternGradientTransform:function(a,g){if(!g||!g.toLive)return{offsetX:0,offsetY:0};var v=g.gradientTransform||g.patternTransform,_=-this.width/2+g.offsetX||0,y=-this.height/2+g.offsetY||0;return g.gradientUnits==="percentage"?a.transform(this.width,0,0,this.height,_,y):a.transform(1,0,0,1,_,y),v&&a.transform(v[0],v[1],v[2],v[3],v[4],v[5]),{offsetX:_,offsetY:y}},_renderPaintInOrder:function(a){this.paintFirst==="stroke"?(this._renderStroke(a),this._renderFill(a)):(this._renderFill(a),this._renderStroke(a))},_render:function(){},_renderFill:function(a){!this.fill||(a.save(),this._setFillStyles(a,this),this.fillRule==="evenodd"?a.fill("evenodd"):a.fill(),a.restore())},_renderStroke:function(a){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this.strokeUniform&&this.group){var g=this.getObjectScaling();a.scale(1/g.scaleX,1/g.scaleY)}else this.strokeUniform&&a.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(a,this.strokeDashArray),this._setStrokeStyles(a,this),a.stroke(),a.restore()}},_applyPatternForTransformedGradient:function(a,g){var v=this._limitCacheSize(this._getCacheCanvasDimensions()),_=i.util.createCanvasElement(),y,T=this.canvas.getRetinaScaling(),P=v.x/this.scaleX/T,D=v.y/this.scaleY/T;_.width=P,_.height=D,y=_.getContext("2d"),y.beginPath(),y.moveTo(0,0),y.lineTo(P,0),y.lineTo(P,D),y.lineTo(0,D),y.closePath(),y.translate(P/2,D/2),y.scale(v.zoomX/this.scaleX/T,v.zoomY/this.scaleY/T),this._applyPatternGradientTransform(y,g),y.fillStyle=g.toLive(a),y.fill(),a.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),a.scale(T*this.scaleX/v.zoomX,T*this.scaleY/v.zoomY),a.strokeStyle=y.createPattern(_,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var a=i.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",a.scaleX),this.set("scaleY",a.scaleY),this.angle=a.angle,this.skewX=a.skewX,this.skewY=0}},_removeTransformMatrix:function(a){var g=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),g=i.util.transformPoint(g,this.transformMatrix)),this.transformMatrix=null,a&&(this.scaleX*=a.scaleX,this.scaleY*=a.scaleY,this.cropX=a.cropX,this.cropY=a.cropY,g.x+=a.offsetLeft,g.y+=a.offsetTop,this.width=a.width,this.height=a.height),this.setPositionByOrigin(g,"center","center")},clone:function(a,g){var v=this.toObject(g);this.constructor.fromObject?this.constructor.fromObject(v,a):i.Object._fromObject("Object",v,a)},cloneAsImage:function(a,g){var v=this.toCanvasElement(g);return a&&a(new i.Image(v)),this},toCanvasElement:function(a){a||(a={});var g=i.util,v=g.saveObjectTransform(this),_=this.group,y=this.shadow,T=Math.abs,P=(a.multiplier||1)*(a.enableRetinaScaling?i.devicePixelRatio:1);delete this.group,a.withoutTransform&&g.resetObjectTransform(this),a.withoutShadow&&(this.shadow=null);var D=i.util.createCanvasElement(),B=this.getBoundingRect(!0,!0),j=this.shadow,z,ee={x:0,y:0},ne,ie,Z;j&&(ne=j.blur,j.nonScaling?z={scaleX:1,scaleY:1}:z=this.getObjectScaling(),ee.x=2*Math.round(T(j.offsetX)+ne)*T(z.scaleX),ee.y=2*Math.round(T(j.offsetY)+ne)*T(z.scaleY)),ie=B.width+ee.x,Z=B.height+ee.y,D.width=Math.ceil(ie),D.height=Math.ceil(Z);var re=new i.StaticCanvas(D,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});a.format==="jpeg"&&(re.backgroundColor="#fff"),this.setPositionByOrigin(new i.Point(re.width/2,re.height/2),"center","center");var pe=this.canvas;re.add(this);var me=re.toCanvasElement(P||1,a);return this.shadow=y,this.set("canvas",pe),_&&(this.group=_),this.set(v).setCoords(),re._objects=[],re.dispose(),re=null,me},toDataURL:function(a){return a||(a={}),i.util.toDataURL(this.toCanvasElement(a),a.format||"png",a.quality||1)},isType:function(a){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===a},complexity:function(){return 1},toJSON:function(a){return this.toObject(a)},rotate:function(a){var g=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return g&&this._setOriginToCenter(),this.set("angle",a),g&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(a,g){g=g||this.canvas.getPointer(a);var v=new i.Point(g.x,g.y),_=this._getLeftTopCoords();return this.angle&&(v=i.util.rotatePoint(v,_,n(-this.angle))),{x:v.x-_.x,y:v.y-_.y}},_setupCompositeOperation:function(a){this.globalCompositeOperation&&(a.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){i.runningAnimations&&i.runningAnimations.cancelByTarget(this)}}),i.util.createAccessors&&i.util.createAccessors(i.Object),c(i.Object.prototype,i.Observable),i.Object.NUM_FRACTION_DIGITS=2,i.Object.ENLIVEN_PROPS=["clipPath"],i.Object._fromObject=function(a,g,v,_){var y=i[a];g=u(g,!0),i.util.enlivenPatterns([g.fill,g.stroke],function(T){typeof T[0]<"u"&&(g.fill=T[0]),typeof T[1]<"u"&&(g.stroke=T[1]),i.util.enlivenObjectEnlivables(g,g,function(){var P=_?new y(g[_],g):new y(g);v&&v(P)})})},i.Object.__uid=0)}(f),function(){var h=t.util.degreesToRadians,i={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(u,r,s,n,o){var d=u.x,a=u.y,g,v,_;return typeof r=="string"?r=i[r]:r-=.5,typeof n=="string"?n=i[n]:n-=.5,g=n-r,typeof s=="string"?s=c[s]:s-=.5,typeof o=="string"?o=c[o]:o-=.5,v=o-s,(g||v)&&(_=this._getTransformedDimensions(),d=u.x+g*_.x,a=u.y+v*_.y),new t.Point(d,a)},translateToCenterPoint:function(u,r,s){var n=this.translateToGivenOrigin(u,r,s,"center","center");return this.angle?t.util.rotatePoint(n,u,h(this.angle)):n},translateToOriginPoint:function(u,r,s){var n=this.translateToGivenOrigin(u,"center","center",r,s);return this.angle?t.util.rotatePoint(n,u,h(this.angle)):n},getCenterPoint:function(){var u=new t.Point(this.left,this.top);return this.translateToCenterPoint(u,this.originX,this.originY)},getPointByOrigin:function(u,r){var s=this.getCenterPoint();return this.translateToOriginPoint(s,u,r)},toLocalPoint:function(u,r,s){var n=this.getCenterPoint(),o,d;return typeof r<"u"&&typeof s<"u"?o=this.translateToGivenOrigin(n,"center","center",r,s):o=new t.Point(this.left,this.top),d=new t.Point(u.x,u.y),this.angle&&(d=t.util.rotatePoint(d,n,-h(this.angle))),d.subtractEquals(o)},setPositionByOrigin:function(u,r,s){var n=this.translateToCenterPoint(u,r,s),o=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",o.x),this.set("top",o.y)},adjustPosition:function(u){var r=h(this.angle),s=this.getScaledWidth(),n=t.util.cos(r)*s,o=t.util.sin(r)*s,d,a;typeof this.originX=="string"?d=i[this.originX]:d=this.originX-.5,typeof u=="string"?a=i[u]:a=u-.5,this.left+=n*(a-d),this.top+=o*(a-d),this.setCoords(),this.originX=u},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var u=this.getCenterPoint();this.originX="center",this.originY="center",this.left=u.x,this.top=u.y},_resetOrigin:function(){var u=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=u.x,this.top=u.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function h(s){return[new t.Point(s.tl.x,s.tl.y),new t.Point(s.tr.x,s.tr.y),new t.Point(s.br.x,s.br.y),new t.Point(s.bl.x,s.bl.y)]}var i=t.util,c=i.degreesToRadians,u=i.multiplyTransformMatrices,r=i.transformPoint;i.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(s,n){return n?s?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),s?this.aCoords:this.lineCoords)},getCoords:function(s,n){return h(this._getCoords(s,n))},intersectsWithRect:function(s,n,o,d){var a=this.getCoords(o,d),g=t.Intersection.intersectPolygonRectangle(a,s,n);return g.status==="Intersection"},intersectsWithObject:function(s,n,o){var d=t.Intersection.intersectPolygonPolygon(this.getCoords(n,o),s.getCoords(n,o));return d.status==="Intersection"||s.isContainedWithinObject(this,n,o)||this.isContainedWithinObject(s,n,o)},isContainedWithinObject:function(s,n,o){for(var d=this.getCoords(n,o),a=n?s.aCoords:s.lineCoords,g=0,v=s._getImageLines(a);g<4;g++)if(!s.containsPoint(d[g],v))return!1;return!0},isContainedWithinRect:function(s,n,o,d){var a=this.getBoundingRect(o,d);return a.left>=s.x&&a.left+a.width<=n.x&&a.top>=s.y&&a.top+a.height<=n.y},containsPoint:function(s,g,o,d){var a=this._getCoords(o,d),g=g||this._getImageLines(a),v=this._findCrossPoints(s,g);return v!==0&&v%2===1},isOnScreen:function(s){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,o=this.canvas.vptCoords.br,d=this.getCoords(!0,s);return d.some(function(a){return a.x<=o.x&&a.x>=n.x&&a.y<=o.y&&a.y>=n.y})||this.intersectsWithRect(n,o,!0,s)?!0:this._containsCenterOfCanvas(n,o,s)},_containsCenterOfCanvas:function(s,n,o){var d={x:(s.x+n.x)/2,y:(s.y+n.y)/2};return!!this.containsPoint(d,null,!0,o)},isPartiallyOnScreen:function(s){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,o=this.canvas.vptCoords.br;if(this.intersectsWithRect(n,o,!0,s))return!0;var d=this.getCoords(!0,s).every(function(a){return(a.x>=o.x||a.x<=n.x)&&(a.y>=o.y||a.y<=n.y)});return d&&this._containsCenterOfCanvas(n,o,s)},_getImageLines:function(s){var n={topline:{o:s.tl,d:s.tr},rightline:{o:s.tr,d:s.br},bottomline:{o:s.br,d:s.bl},leftline:{o:s.bl,d:s.tl}};return n},_findCrossPoints:function(s,n){var o,d,a,g,v,_=0,y;for(var T in n)if(y=n[T],!(y.o.y<s.y&&y.d.y<s.y)&&!(y.o.y>=s.y&&y.d.y>=s.y)&&(y.o.x===y.d.x&&y.o.x>=s.x?v=y.o.x:(o=0,d=(y.d.y-y.o.y)/(y.d.x-y.o.x),a=s.y-o*s.x,g=y.o.y-d*y.o.x,v=-(a-g)/(o-d)),v>=s.x&&(_+=1),_===2))break;return _},getBoundingRect:function(s,n){var o=this.getCoords(s,n);return i.makeBoundingBoxFromPoints(o)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(s){return Math.abs(s)<this.minScaleLimit?s<0?-this.minScaleLimit:this.minScaleLimit:s===0?1e-4:s},scale:function(s){return this._set("scaleX",s),this._set("scaleY",s),this.setCoords()},scaleToWidth:function(s,n){var o=this.getBoundingRect(n).width/this.getScaledWidth();return this.scale(s/this.width/o)},scaleToHeight:function(s,n){var o=this.getBoundingRect(n).height/this.getScaledHeight();return this.scale(s/this.height/o)},calcLineCoords:function(){var s=this.getViewportTransform(),n=this.padding,o=c(this.angle),d=i.cos(o),a=i.sin(o),g=d*n,v=a*n,_=g+v,y=g-v,T=this.calcACoords(),P={tl:r(T.tl,s),tr:r(T.tr,s),bl:r(T.bl,s),br:r(T.br,s)};return n&&(P.tl.x-=y,P.tl.y-=_,P.tr.x+=_,P.tr.y-=y,P.bl.x-=_,P.bl.y+=y,P.br.x+=y,P.br.y+=_),P},calcOCoords:function(){var s=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),o=this.getViewportTransform(),d=u(o,n),a=u(d,s),a=u(a,[1/o[0],0,0,1/o[3],0,0]),g=this._calculateCurrentDimensions(),v={};return this.forEachControl(function(_,y,T){v[y]=_.positionHandler(g,a,T)}),v},calcACoords:function(){var s=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),o=u(n,s),d=this._getTransformedDimensions(),a=d.x/2,g=d.y/2;return{tl:r({x:-a,y:-g},o),tr:r({x:a,y:-g},o),bl:r({x:-a,y:g},o),br:r({x:a,y:g},o)}},setCoords:function(s){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),s?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return i.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var s=this.getCenterPoint();return[1,0,0,1,s.x,s.y]},transformMatrixKey:function(s){var n="_",o="";return!s&&this.group&&(o=this.group.transformMatrixKey(s)+n),o+this.top+n+this.left+n+this.scaleX+n+this.scaleY+n+this.skewX+n+this.skewY+n+this.angle+n+this.originX+n+this.originY+n+this.width+n+this.height+n+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(s){var n=this.calcOwnMatrix();if(s||!this.group)return n;var o=this.transformMatrixKey(s),d=this.matrixCache||(this.matrixCache={});return d.key===o?d.value:(this.group&&(n=u(this.group.calcTransformMatrix(!1),n)),d.key=o,d.value=n,n)},calcOwnMatrix:function(){var s=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===s)return n.value;var o=this._calcTranslateMatrix(),d={angle:this.angle,translateX:o[4],translateY:o[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=s,n.value=i.composeMatrix(d),n.value},_getNonTransformedDimensions:function(){var s=this.strokeWidth,n=this.width+s,o=this.height+s;return{x:n,y:o}},_getTransformedDimensions:function(s,n){typeof s>"u"&&(s=this.skewX),typeof n>"u"&&(n=this.skewY);var o,d,a,g=s===0&&n===0;if(this.strokeUniform?(d=this.width,a=this.height):(o=this._getNonTransformedDimensions(),d=o.x,a=o.y),g)return this._finalizeDimensions(d*this.scaleX,a*this.scaleY);var v=i.sizeAfterTransform(d,a,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:s,skewY:n});return this._finalizeDimensions(v.x,v.y)},_finalizeDimensions:function(s,n){return this.strokeUniform?{x:s+this.strokeWidth,y:n+this.strokeWidth}:{x:s,y:n}},_calculateCurrentDimensions:function(){var s=this.getViewportTransform(),n=this._getTransformedDimensions(),o=r(n,s,!0);return o.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(h){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,h):this.canvas&&this.canvas.sendBackwards(this,h),this},bringForward:function(h){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,h):this.canvas&&this.canvas.bringForward(this,h),this},moveTo:function(h){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,h):this.canvas&&this.canvas.moveTo(this,h),this}}),function(){function h(c,u){if(u){if(u.toLive)return c+": url(#SVGID_"+u.id+"); ";var r=new t.Color(u),s=c+": "+r.toRgb()+"; ",n=r.getAlpha();return n!==1&&(s+=c+"-opacity: "+n.toString()+"; "),s}else return c+": none; "}var i=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(c){var u=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):"none",n=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",d=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",g=typeof this.opacity<"u"?this.opacity:"1",v=this.visible?"":" visibility: hidden;",_=c?"":this.getSvgFilter(),y=h("fill",this.fill),T=h("stroke",this.stroke);return[T,"stroke-width: ",r,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",n,"; ","stroke-linejoin: ",d,"; ","stroke-miterlimit: ",a,"; ",y,"fill-rule: ",u,"; ","opacity: ",g,";",_,v].join("")},getSvgSpanStyles:function(c,u){var r="; ",n=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+r:"",s=c.strokeWidth?"stroke-width: "+c.strokeWidth+r:"",n=n,o=c.fontSize?"font-size: "+c.fontSize+"px"+r:"",d=c.fontStyle?"font-style: "+c.fontStyle+r:"",a=c.fontWeight?"font-weight: "+c.fontWeight+r:"",g=c.fill?h("fill",c.fill):"",v=c.stroke?h("stroke",c.stroke):"",_=this.getSvgTextDecoration(c),y=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return _&&(_="text-decoration: "+_+r),[v,s,n,o,d,a,_,g,y,u?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(u){return c[u.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,u){var r=c?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'+t.util.matrixToSVG(r);return s+(u||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var u=t.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,u),'" y="',i(-this.height/2,u),'" width="',i(this.width,u),'" height="',i(this.height,u),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,u){u=u||{};var r=u.reviver,s=u.additionalTransform||"",n=[this.getSvgTransform(!0,s),this.getSvgCommons()].join(""),o=c.indexOf("COMMON_PARTS");return c[o]=n,r?r(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,u){u=u||{};var r=u.noStyle,s=u.reviver,n=r?"":'style="'+this.getSvgStyles()+'" ',o=u.withShadow?'style="'+this.getSvgFilter()+'" ':"",d=this.clipPath,a=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=d&&d.absolutePositioned,v=this.stroke,_=this.fill,y=this.shadow,T,P=[],D,B=c.indexOf("COMMON_PARTS"),j=u.additionalTransform;return d&&(d.clipPathId="CLIPPATH_"+t.Object.__uid++,D='<clipPath id="'+d.clipPathId+`" >
`+d.toClipPathSVG(s)+`</clipPath>
`),g&&P.push("<g ",o,this.getSvgCommons(),` >
`),P.push("<g ",this.getSvgTransform(!1),g?"":o+this.getSvgCommons(),` >
`),T=[n,a,r?"":this.addPaintOrder()," ",j?'transform="'+j+'" ':""].join(""),c[B]=T,_&&_.toLive&&P.push(_.toSVG(this)),v&&v.toLive&&P.push(v.toSVG(this)),y&&P.push(y.toSVG(this)),d&&P.push(D),P.push(c.join("")),P.push(`</g>
`),g&&P.push(`</g>
`),s?s(P.join("")):P.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var h=t.util.object.extend,i="stateProperties";function c(r,s,n){var o={},d=!0;n.forEach(function(a){o[a]=r[a]}),h(r[s],o,d)}function u(r,s,n){if(r===s)return!0;if(Array.isArray(r)){if(!Array.isArray(s)||r.length!==s.length)return!1;for(var o=0,d=r.length;o<d;o++)if(!u(r[o],s[o]))return!1;return!0}else if(r&&typeof r=="object"){var a=Object.keys(r),g;if(!s||typeof s!="object"||!n&&a.length!==Object.keys(s).length)return!1;for(var o=0,d=a.length;o<d;o++)if(g=a[o],!(g==="canvas"||g==="group")&&!u(r[g],s[g]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(r){r=r||i;var s="_"+r;return Object.keys(this[s]).length<this[r].length?!0:!u(this[s],this,!0)},saveState:function(r){var s=r&&r.propertySet||i,n="_"+s;return this[n]?(c(this,n,this[s]),r&&r.stateProperties&&c(this,n,r.stateProperties),this):this.setupState(r)},setupState:function(r){r=r||{};var s=r.propertySet||i;return r.propertySet=s,this["_"+s]={},this.saveState(r),this}})}(),function(){var h=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(i,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u=i.x,r=i.y,s,n,o=Object.keys(this.oCoords),d=o.length-1,a;for(this.__corner=0;d>=0;d--)if(a=o[d],!!this.isControlVisible(a)&&(n=this._getImageLines(c?this.oCoords[a].touchCorner:this.oCoords[a].corner),s=this._findCrossPoints({x:u,y:r},n),s!==0&&s%2===1))return this.__corner=a,a;return!1},forEachControl:function(i){for(var c in this.controls)i(this.controls[c],c,this)},_setCornerCoords:function(){var i=this.oCoords;for(var c in i){var u=this.controls[c];i[c].corner=u.calcCornerCoords(this.angle,this.cornerSize,i[c].x,i[c].y,!1),i[c].touchCorner=u.calcCornerCoords(this.angle,this.touchCornerSize,i[c].x,i[c].y,!0)}},drawSelectionBackground:function(i){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;i.save();var c=this.getCenterPoint(),u=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return i.translate(c.x,c.y),i.scale(1/r[0],1/r[3]),i.rotate(h(this.angle)),i.fillStyle=this.selectionBackgroundColor,i.fillRect(-u.x/2,-u.y/2,u.x,u.y),i.restore(),this},drawBorders:function(i,c){c=c||{};var u=this._calculateCurrentDimensions(),r=this.borderScaleFactor,s=u.x+r,n=u.y+r,o=typeof c.hasControls<"u"?c.hasControls:this.hasControls,d=!1;return i.save(),i.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(i,c.borderDashArray||this.borderDashArray),i.strokeRect(-s/2,-n/2,s,n),o&&(i.beginPath(),this.forEachControl(function(a,g,v){a.withConnection&&a.getVisibility(v,g)&&(d=!0,i.moveTo(a.x*s,a.y*n),i.lineTo(a.x*s+a.offsetX,a.y*n+a.offsetY))}),d&&i.stroke()),i.restore(),this},drawBordersInGroup:function(i,c,u){u=u||{};var r=t.util.sizeAfterTransform(this.width,this.height,c),s=this.strokeWidth,n=this.strokeUniform,o=this.borderScaleFactor,d=r.x+s*(n?this.canvas.getZoom():c.scaleX)+o,a=r.y+s*(n?this.canvas.getZoom():c.scaleY)+o;return i.save(),this._setLineDash(i,u.borderDashArray||this.borderDashArray),i.strokeStyle=u.borderColor||this.borderColor,i.strokeRect(-d/2,-a/2,d,a),i.restore(),this},drawControls:function(i,c){c=c||{},i.save();var u=this.canvas.getRetinaScaling(),r,s;return i.setTransform(u,0,0,u,0,0),i.strokeStyle=i.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(i.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(i,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(r=this.group.calcTransformMatrix()),this.forEachControl(function(n,o,d){s=d.oCoords[o],n.getVisibility(d,o)&&(r&&(s=t.util.transformPoint(s,r)),n.render(i,s.x,s.y,c,d))}),i.restore(),this},isControlVisible:function(i){return this.controls[i]&&this.controls[i].getVisibility(this,i)},setControlVisible:function(i,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[i]=c,this},setControlsVisibility:function(i){i||(i={});for(var c in i)this.setControlVisible(c,i[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(h,i){i=i||{};var c=function(){},u=i.onComplete||c,r=i.onChange||c,s=this;return t.util.animate({target:this,startValue:h.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(n){h.set("left",n),s.requestRenderAll(),r()},onComplete:function(){h.setCoords(),u()}})},fxCenterObjectV:function(h,i){i=i||{};var c=function(){},u=i.onComplete||c,r=i.onChange||c,s=this;return t.util.animate({target:this,startValue:h.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(n){h.set("top",n),s.requestRenderAll(),r()},onComplete:function(){h.setCoords(),u()}})},fxRemove:function(h,i){i=i||{};var c=function(){},u=i.onComplete||c,r=i.onChange||c,s=this;return t.util.animate({target:this,startValue:h.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(n){h.set("opacity",n),s.requestRenderAll(),r()},onComplete:function(){s.remove(h),u()}})}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var h=[],i,c,u=[];for(i in arguments[0])h.push(i);for(var r=0,s=h.length;r<s;r++)i=h[r],c=r!==s-1,u.push(this._animate(i,arguments[0][i],arguments[1],c));return u}else return this._animate.apply(this,arguments)},_animate:function(h,i,c,u){var r=this,s;i=i.toString(),c?c=t.util.object.clone(c):c={},~h.indexOf(".")&&(s=h.split("."));var n=r.colorProperties.indexOf(h)>-1||s&&r.colorProperties.indexOf(s[1])>-1,o=s?this.get(s[0])[s[1]]:this.get(h);"from"in c||(c.from=o),n||(~i.indexOf("=")?i=o+parseFloat(i.replace("=","")):i=parseFloat(i));var d={target:this,startValue:c.from,endValue:i,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(a,g,v){return c.abort.call(r,a,g,v)},onChange:function(a,g,v){s?r[s[0]][s[1]]=a:r.set(h,a),!u&&c.onChange&&c.onChange(a,g,v)},onComplete:function(a,g,v){u||(r.setCoords(),c.onComplete&&c.onComplete(a,g,v))}};return n?t.util.animateColor(d.startValue,d.endValue,d.duration,d):t.util.animate(d)}}),function(h){var i=h.fabric||(h.fabric={}),c=i.util.object.extend,u=i.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};if(i.Line){i.warn("fabric.Line is already defined");return}i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:i.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(n,o){n||(n=[0,0,0,0]),this.callSuper("initialize",o),this.set("x1",n[0]),this.set("y1",n[1]),this.set("x2",n[2]),this.set("y2",n[3]),this._setWidthHeight(o)},_setWidthHeight:function(n){n||(n={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in n?n.left:this._getLeftToOriginX(),this.top="top"in n?n.top:this._getTopToOriginY()},_set:function(n,o){return this.callSuper("_set",n,o),typeof r[n]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:s({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:s({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(n){n.beginPath();var o=this.calcLinePoints();n.moveTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineWidth=this.strokeWidth;var d=n.strokeStyle;n.strokeStyle=this.stroke||n.fillStyle,this.stroke&&this._renderStroke(n),n.strokeStyle=d},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(n){return c(this.callSuper("toObject",n),this.calcLinePoints())},_getNonTransformedDimensions:function(){var n=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(n.y-=this.strokeWidth),this.height===0&&(n.x-=this.strokeWidth)),n},calcLinePoints:function(){var n=this.x1<=this.x2?-1:1,o=this.y1<=this.y2?-1:1,d=n*this.width*.5,a=o*this.height*.5,g=n*this.width*-.5,v=o*this.height*-.5;return{x1:d,x2:g,y1:a,y2:v}},_toSVG:function(){var n=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,`" />
`]}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(n,o,d){d=d||{};var a=i.parseAttributes(n,i.Line.ATTRIBUTE_NAMES),g=[a.x1||0,a.y1||0,a.x2||0,a.y2||0];o(new i.Line(g,c(a,d)))},i.Line.fromObject=function(n,o){function d(g){delete g.points,o&&o(g)}var a=u(n,!0);a.points=[n.x1,n.y1,n.x2,n.y2],i.Object._fromObject("Line",a,d,"points")};function s(n,o){var d=n.origin,a=n.axis1,g=n.axis2,v=n.dimension,_=o.nearest,y=o.center,T=o.farthest;return function(){switch(this.get(d)){case _:return Math.min(this.get(a),this.get(g));case y:return Math.min(this.get(a),this.get(g))+.5*this.get(v);case T:return Math.max(this.get(a),this.get(g))}}}}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.util.degreesToRadians;if(i.Circle){i.warn("fabric.Circle is already defined.");return}i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:i.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(r,s){return this.callSuper("_set",r,s),r==="radius"&&this.setRadius(s),this},toObject:function(r){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(r))},_toSVG:function(){var r,s=0,n=0,o=(this.endAngle-this.startAngle)%360;if(o===0)r=["<circle ","COMMON_PARTS",'cx="'+s+'" cy="'+n+'" ','r="',this.radius,`" />
`];else{var d=c(this.startAngle),a=c(this.endAngle),g=this.radius,v=i.util.cos(d)*g,_=i.util.sin(d)*g,y=i.util.cos(a)*g,T=i.util.sin(a)*g,P=o>180?"1":"0";r=['<path d="M '+v+" "+_," A "+g+" "+g," 0 ",+P+" 1"," "+y+" "+T,'" ',"COMMON_PARTS",` />
`]}return r},_render:function(r){r.beginPath(),r.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(r)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(r){return this.radius=r,this.set("width",r*2).set("height",r*2)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(r,s){var n=i.parseAttributes(r,i.Circle.ATTRIBUTE_NAMES);if(!u(n))throw new Error("value of `r` attribute is required and can not be negative");n.left=(n.left||0)-n.radius,n.top=(n.top||0)-n.radius,s(new i.Circle(n))};function u(r){return"radius"in r&&r.radius>=0}i.Circle.fromObject=function(r,s){i.Object._fromObject("Circle",r,s)}}(f),function(h){var i=h.fabric||(h.fabric={});if(i.Triangle){i.warn("fabric.Triangle is already defined");return}i.Triangle=i.util.createClass(i.Object,{type:"triangle",width:100,height:100,_render:function(c){var u=this.width/2,r=this.height/2;c.beginPath(),c.moveTo(-u,r),c.lineTo(0,-r),c.lineTo(u,r),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,u=this.height/2,r=[-c+" "+u,"0 "+-u,c+" "+u].join(",");return["<polygon ","COMMON_PARTS",'points="',r,'" />']}}),i.Triangle.fromObject=function(c,u){return i.Object._fromObject("Triangle",c,u)}}(f),function(h){var i=h.fabric||(h.fabric={}),c=Math.PI*2;if(i.Ellipse){i.warn("fabric.Ellipse is already defined.");return}i.Ellipse=i.util.createClass(i.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this.set("rx",u&&u.rx||0),this.set("ry",u&&u.ry||0)},_set:function(u,r){switch(this.callSuper("_set",u,r),u){case"rx":this.rx=r,this.set("width",r*2);break;case"ry":this.ry=r,this.set("height",r*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(u){u.beginPath(),u.save(),u.transform(1,0,0,this.ry/this.rx,0,0),u.arc(0,0,this.rx,0,c,!1),u.restore(),this._renderPaintInOrder(u)}}),i.Ellipse.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),i.Ellipse.fromElement=function(u,r){var s=i.parseAttributes(u,i.Ellipse.ATTRIBUTE_NAMES);s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,r(new i.Ellipse(s))},i.Ellipse.fromObject=function(u,r){i.Object._fromObject("Ellipse",u,r)}}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.util.object.extend;if(i.Rect){i.warn("fabric.Rect is already defined");return}i.Rect=i.util.createClass(i.Object,{stateProperties:i.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(u){var r=this.rx?Math.min(this.rx,this.width/2):0,s=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,o=this.height,d=-this.width/2,a=-this.height/2,g=r!==0||s!==0,v=1-.5522847498;u.beginPath(),u.moveTo(d+r,a),u.lineTo(d+n-r,a),g&&u.bezierCurveTo(d+n-v*r,a,d+n,a+v*s,d+n,a+s),u.lineTo(d+n,a+o-s),g&&u.bezierCurveTo(d+n,a+o-v*s,d+n-v*r,a+o,d+n-r,a+o),u.lineTo(d+r,a+o),g&&u.bezierCurveTo(d+v*r,a+o,d,a+o-v*s,d,a+o-s),u.lineTo(d,a+s),g&&u.bezierCurveTo(d,a+v*s,d+v*r,a,d+r,a),u.closePath(),this._renderPaintInOrder(u)},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){var u=-this.width/2,r=-this.height/2;return["<rect ","COMMON_PARTS",'x="',u,'" y="',r,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),i.Rect.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),i.Rect.fromElement=function(u,r,s){if(!u)return r(null);s=s||{};var n=i.parseAttributes(u,i.Rect.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0,n.height=n.height||0,n.width=n.width||0;var o=new i.Rect(c(s?i.util.object.clone(s):{},n));o.visible=o.visible&&o.width>0&&o.height>0,r(o)},i.Rect.fromObject=function(u,r){return i.Object._fromObject("Rect",u,r)}}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.util.object.extend,u=i.util.array.min,r=i.util.array.max,s=i.util.toFixed,n=i.util.projectStrokeOnPoints;if(i.Polyline){i.warn("fabric.Polyline is already defined");return}i.Polyline=i.util.createClass(i.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:i.Object.prototype.cacheProperties.concat("points"),initialize:function(o,d){d=d||{},this.points=o||[],this.callSuper("initialize",d),this._setPositionDimensions(d)},_projectStrokeOnPoints:function(){return n(this.points,this,!0)},_setPositionDimensions:function(o){var d=this._calcDimensions(o),a,g=this.exactBoundingBox?this.strokeWidth:0;this.width=d.width-g,this.height=d.height-g,o.fromSVG||(a=this.translateToGivenOrigin({x:d.left-this.strokeWidth/2+g/2,y:d.top-this.strokeWidth/2+g/2},"left","top",this.originX,this.originY)),typeof o.left>"u"&&(this.left=o.fromSVG?d.left:a.x),typeof o.top>"u"&&(this.top=o.fromSVG?d.top:a.y),this.pathOffset={x:d.left+this.width/2+g/2,y:d.top+this.height/2+g/2}},_calcDimensions:function(){var o=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,d=u(o,"x")||0,a=u(o,"y")||0,g=r(o,"x")||0,v=r(o,"y")||0,_=g-d,y=v-a;return{left:d,top:a,width:_,height:y}},toObject:function(o){return c(this.callSuper("toObject",o),{points:this.points.concat()})},_toSVG:function(){for(var o=[],d=this.pathOffset.x,a=this.pathOffset.y,g=i.Object.NUM_FRACTION_DIGITS,v=0,_=this.points.length;v<_;v++)o.push(s(this.points[v].x-d,g),",",s(this.points[v].y-a,g)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',o.join(""),`" />
`]},commonRender:function(o){var d,a=this.points.length,g=this.pathOffset.x,v=this.pathOffset.y;if(!a||isNaN(this.points[a-1].y))return!1;o.beginPath(),o.moveTo(this.points[0].x-g,this.points[0].y-v);for(var _=0;_<a;_++)d=this.points[_],o.lineTo(d.x-g,d.y-v);return!0},_render:function(o){!this.commonRender(o)||this._renderPaintInOrder(o)},complexity:function(){return this.get("points").length}}),i.Polyline.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polyline.fromElementGenerator=function(o){return function(d,a,g){if(!d)return a(null);g||(g={});var v=i.parsePointsAttribute(d.getAttribute("points")),_=i.parseAttributes(d,i[o].ATTRIBUTE_NAMES);_.fromSVG=!0,a(new i[o](v,c(_,g)))}},i.Polyline.fromElement=i.Polyline.fromElementGenerator("Polyline"),i.Polyline.fromObject=function(o,d){return i.Object._fromObject("Polyline",o,d,"points")}}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.util.projectStrokeOnPoints;if(i.Polygon){i.warn("fabric.Polygon is already defined");return}i.Polygon=i.util.createClass(i.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(u){!this.commonRender(u)||(u.closePath(),this._renderPaintInOrder(u))}}),i.Polygon.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polygon.fromElement=i.Polyline.fromElementGenerator("Polygon"),i.Polygon.fromObject=function(u,r){i.Object._fromObject("Polygon",u,r,"points")}}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.util.array.min,u=i.util.array.max,r=i.util.object.extend,s=i.util.object.clone,n=i.util.toFixed;if(i.Path){i.warn("fabric.Path is already defined");return}i.Path=i.util.createClass(i.Object,{type:"path",path:null,cacheProperties:i.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:i.Object.prototype.stateProperties.concat("path"),initialize:function(o,d){d=s(d||{}),delete d.path,this.callSuper("initialize",d),this._setPath(o||[],d)},_setPath:function(o,d){this.path=i.util.makePathSimpler(Array.isArray(o)?o:i.util.parsePath(o)),i.Polyline.prototype._setPositionDimensions.call(this,d||{})},_renderPathCommands:function(o){var d,a=0,g=0,v=0,_=0,y=0,T=0,P=-this.pathOffset.x,D=-this.pathOffset.y;o.beginPath();for(var B=0,j=this.path.length;B<j;++B)switch(d=this.path[B],d[0]){case"L":v=d[1],_=d[2],o.lineTo(v+P,_+D);break;case"M":v=d[1],_=d[2],a=v,g=_,o.moveTo(v+P,_+D);break;case"C":v=d[5],_=d[6],y=d[3],T=d[4],o.bezierCurveTo(d[1]+P,d[2]+D,y+P,T+D,v+P,_+D);break;case"Q":o.quadraticCurveTo(d[1]+P,d[2]+D,d[3]+P,d[4]+D),v=d[3],_=d[4],y=d[1],T=d[2];break;case"z":case"Z":v=a,_=g,o.closePath();break}},_render:function(o){this._renderPathCommands(o),this._renderPaintInOrder(o)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(o){return r(this.callSuper("toObject",o),{path:this.path.map(function(d){return d.slice()})})},toDatalessObject:function(o){var d=this.toObject(["sourcePath"].concat(o));return d.sourcePath&&delete d.path,d},_toSVG:function(){var o=i.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',o,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var o=i.Object.NUM_FRACTION_DIGITS;return" translate("+n(-this.pathOffset.x,o)+", "+n(-this.pathOffset.y,o)+")"},toClipPathSVG:function(o){var d=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:o,additionalTransform:d})},toSVG:function(o){var d=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:o,additionalTransform:d})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var o=[],d=[],a,g=0,v=0,_=0,y=0,T,P=0,D=this.path.length;P<D;++P){switch(a=this.path[P],a[0]){case"L":_=a[1],y=a[2],T=[];break;case"M":_=a[1],y=a[2],g=_,v=y,T=[];break;case"C":T=i.util.getBoundsOfCurve(_,y,a[1],a[2],a[3],a[4],a[5],a[6]),_=a[5],y=a[6];break;case"Q":T=i.util.getBoundsOfCurve(_,y,a[1],a[2],a[1],a[2],a[3],a[4]),_=a[3],y=a[4];break;case"z":case"Z":_=g,y=v;break}T.forEach(function(Z){o.push(Z.x),d.push(Z.y)}),o.push(_),d.push(y)}var B=c(o)||0,j=c(d)||0,z=u(o)||0,ee=u(d)||0,ne=z-B,ie=ee-j;return{left:B,top:j,width:ne,height:ie}}}),i.Path.fromObject=function(o,d){if(typeof o.sourcePath=="string"){var a=o.sourcePath;i.loadSVGFromURL(a,function(g){var v=g[0];v.setOptions(o),o.clipPath?i.util.enlivenObjects([o.clipPath],function(_){v.clipPath=_[0],d&&d(v)}):d&&d(v)})}else i.Object._fromObject("Path",o,d,"path")},i.Path.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(["d"]),i.Path.fromElement=function(o,d,a){var g=i.parseAttributes(o,i.Path.ATTRIBUTE_NAMES);g.fromSVG=!0,d(new i.Path(g.d,r(g,a)))}}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.util.array.min,u=i.util.array.max;i.Group||(i.Group=i.util.createClass(i.Object,i.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(r,s,n){s=s||{},this._objects=[],n&&this.callSuper("initialize",s),this._objects=r||[];for(var o=this._objects.length;o--;)this._objects[o].group=this;if(n)this._updateObjectsACoords();else{var d=s&&s.centerPoint;s.originX!==void 0&&(this.originX=s.originX),s.originY!==void 0&&(this.originY=s.originY),d||this._calcBounds(),this._updateObjectsCoords(d),delete s.centerPoint,this.callSuper("initialize",s)}this.setCoords()},_updateObjectsACoords:function(){for(var r=!0,s=this._objects.length;s--;)this._objects[s].setCoords(r)},_updateObjectsCoords:function(s){for(var s=s||this.getCenterPoint(),n=this._objects.length;n--;)this._updateObjectCoords(this._objects[n],s)},_updateObjectCoords:function(r,s){var n=r.left,o=r.top,d=!0;r.set({left:n-s.x,top:o-s.y}),r.group=this,r.setCoords(d)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(r){var s=!!this.group;return this._restoreObjectsState(),i.util.resetObjectTransform(this),r&&(s&&i.util.removeTransformFromObject(r,this.group.calcTransformMatrix()),this._objects.push(r),r.group=this,r._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,s?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(r){return this._restoreObjectsState(),i.util.resetObjectTransform(this),this.remove(r),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(r){this.dirty=!0,r.group=this,r._set("canvas",this.canvas)},_onObjectRemoved:function(r){this.dirty=!0,delete r.group},_set:function(r,s){var n=this._objects.length;if(this.useSetOnGroup)for(;n--;)this._objects[n].setOnGroup(r,s);if(r==="canvas")for(;n--;)this._objects[n]._set(r,s);i.Object.prototype._set.call(this,r,s)},toObject:function(r){var s=this.includeDefaultValues,n=this._objects.filter(function(d){return!d.excludeFromExport}).map(function(d){var a=d.includeDefaultValues;d.includeDefaultValues=s;var g=d.toObject(r);return d.includeDefaultValues=a,g}),o=i.Object.prototype.toObject.call(this,r);return o.objects=n,o},toDatalessObject:function(r){var s,n=this.sourcePath;if(n)s=n;else{var o=this.includeDefaultValues;s=this._objects.map(function(a){var g=a.includeDefaultValues;a.includeDefaultValues=o;var v=a.toDatalessObject(r);return a.includeDefaultValues=g,v})}var d=i.Object.prototype.toDatalessObject.call(this,r);return d.objects=s,d},render:function(r){this._transformDone=!0,this.callSuper("render",r),this._transformDone=!1},shouldCache:function(){var r=i.Object.prototype.shouldCache.call(this);if(r){for(var s=0,n=this._objects.length;s<n;s++)if(this._objects[s].willDrawShadow())return this.ownCaching=!1,!1}return r},willDrawShadow:function(){if(i.Object.prototype.willDrawShadow.call(this))return!0;for(var r=0,s=this._objects.length;r<s;r++)if(this._objects[r].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(r){for(var s=0,n=this._objects.length;s<n;s++)this._objects[s].render(r);this._drawClipPath(r,this.clipPath)},isCacheDirty:function(r){if(this.callSuper("isCacheDirty",r))return!0;if(!this.statefullCache)return!1;for(var s=0,n=this._objects.length;s<n;s++)if(this._objects[s].isCacheDirty(!0)){if(this._cacheCanvas){var o=this.cacheWidth/this.zoomX,d=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-o/2,-d/2,o,d)}return!0}return!1},_restoreObjectsState:function(){var r=this.calcOwnMatrix();return this._objects.forEach(function(s){i.util.addTransformToObject(s,r),delete s.group,s.setCoords()}),this},destroy:function(){return this._objects.forEach(function(r){r.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(r){r.dispose&&r.dispose()}),this._objects=[]},toActiveSelection:function(){if(!!this.canvas){var r=this._objects,s=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var o=new i.ActiveSelection([]);return o.set(n),o.type="activeSelection",s.remove(this),r.forEach(function(d){d.group=o,d.dirty=!0,s.add(d)}),o.canvas=s,o._objects=r,s._activeObject=o,o.setCoords(),o}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var r=!0;return this.forEachObject(function(s){s.setCoords(r)}),this},_calcBounds:function(r){for(var s=[],n=[],o,d,a,g=["tr","br","bl","tl"],v=0,_=this._objects.length,y,T=g.length;v<_;++v){for(o=this._objects[v],a=o.calcACoords(),y=0;y<T;y++)d=g[y],s.push(a[d].x),n.push(a[d].y);o.aCoords=a}this._getBounds(s,n,r)},_getBounds:function(r,s,n){var o=new i.Point(c(r),c(s)),d=new i.Point(u(r),u(s)),a=o.y||0,g=o.x||0,v=d.x-o.x||0,_=d.y-o.y||0;this.width=v,this.height=_,n||this.setPositionByOrigin({x:g,y:a},"left","top")},_toSVG:function(r){for(var s=["<g ","COMMON_PARTS",` >
`],n=0,o=this._objects.length;n<o;n++)s.push("		",this._objects[n].toSVG(r));return s.push(`</g>
`),s},getSvgStyles:function(){var r=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",s=this.visible?"":" visibility: hidden;";return[r,this.getSvgFilter(),s].join("")},toClipPathSVG:function(r){for(var s=[],n=0,o=this._objects.length;n<o;n++)s.push("	",this._objects[n].toClipPathSVG(r));return this._createBaseClipPathSVGMarkup(s,{reviver:r})}}),i.Group.fromObject=function(r,s){var n=r.objects,o=i.util.object.clone(r,!0);if(delete o.objects,typeof n=="string"){i.loadSVGFromURL(n,function(d){var a=i.util.groupSVGElements(d,r,n),g=o.clipPath;delete o.clipPath,a.set(o),g?i.util.enlivenObjects([g],function(v){a.clipPath=v[0],s&&s(a)}):s&&s(a)});return}i.util.enlivenObjects(n,function(d){i.util.enlivenObjectEnlivables(r,o,function(){s&&s(new i.Group(d,o,!0))})})})}(f),function(h){var i=h.fabric||(h.fabric={});i.ActiveSelection||(i.ActiveSelection=i.util.createClass(i.Group,{type:"activeSelection",initialize:function(c,u){u=u||{},this._objects=c||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;u.originX&&(this.originX=u.originX),u.originY&&(this.originY=u.originY),this._calcBounds(),this._updateObjectsCoords(),i.Object.prototype.initialize.call(this,u),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var u=i.Object.prototype.toObject.call(this),r=new i.Group([]);if(delete u.type,r.set(u),c.forEach(function(n){n.canvas.remove(n),n.group=r}),r._objects=c,!this.canvas)return r;var s=this.canvas;return s.add(r),s._activeObject=r,r.setCoords(),r},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,u,r){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,u),r=r||{},typeof r.hasControls>"u"&&(r.hasControls=!1),r.forActiveSelection=!0;for(var s=0,n=this._objects.length;s<n;s++)this._objects[s]._renderControls(c,r);c.restore()}}),i.ActiveSelection.fromObject=function(c,u){i.util.enlivenObjects(c.objects,function(r){delete c.objects,u&&u(new i.ActiveSelection(r,c,!0))})})}(f),function(h){var i=t.util.object.extend;if(h.fabric||(h.fabric={}),h.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,u){u||(u={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",u),this._initElement(c,u)},getElement:function(){return this._element||{}},setElement:function(c,u){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(u),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var u=t.filterBackend;u&&u.evictCachesForKey&&u.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(c){t.util.cleanUpJsdomNode(this[c]),this[c]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var u=this.width/2,r=this.height/2;c.beginPath(),c.moveTo(-u,-r),c.lineTo(u,-r),c.lineTo(u,r),c.lineTo(-u,r),c.lineTo(-u,-r),c.closePath()}},toObject:function(c){var u=[];this.filters.forEach(function(s){s&&u.push(s.toObject())});var r=i(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:u});return this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject()),r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],u=[],r,s=this._element,n=-this.width/2,o=-this.height/2,d="",a="";if(!s)return[];if(this.hasCrop()){var g=t.Object.__uid++;c.push('<clipPath id="imageCrop_'+g+`">
`,'	<rect x="'+n+'" y="'+o+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),d=' clip-path="url(#imageCrop_'+g+')" '}if(this.imageSmoothing||(a='" image-rendering="optimizeSpeed'),u.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',n-this.cropX,'" y="',o-this.cropY,'" width="',s.width||s.naturalWidth,'" height="',s.height||s.height,a,'"',d,`></image>
`),this.stroke||this.strokeDashArray){var v=this.fill;this.fill=null,r=["	<rect ",'x="',n,'" y="',o,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=v}return this.paintFirst!=="fill"?c=c.concat(r,u):c=c.concat(u,r),c},getSrc:function(c){var u=c?this._element:this._originalElement;return u?u.toDataURL?u.toDataURL():this.srcFromAttribute?u.getAttribute("src"):u.src:this.src||""},setSrc:function(c,u,r){return t.util.loadImage(c,function(s,n){this.setElement(s,r),this._setWidthHeight(),u&&u(this,n)},this,r&&r.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,u=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),s=r.scaleX,n=r.scaleY,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||s>u&&n>u){this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,this._lastScaleY=n;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var d=t.util.createCanvasElement(),a=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,g=o.width,v=o.height;d.width=g,d.height=v,this._element=d,this._lastScaleX=c.scaleX=s,this._lastScaleY=c.scaleY=n,t.filterBackend.applyFilters([c],o,g,v,this._element,a),this._filterScalingX=d.width/this._originalElement.width,this._filterScalingY=d.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(o){return o&&!o.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var u=this._originalElement,r=u.naturalWidth||u.width,s=u.naturalHeight||u.height;if(this._element===this._originalElement){var n=t.util.createCanvasElement();n.width=r,n.height=s,this._element=n,this._filteredEl=n}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,s),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(c,this._originalElement,r,s,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){t.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){t.util.setImageSmoothing(c,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var u=this._element;if(!!u){var r=this._filterScalingX,s=this._filterScalingY,n=this.width,o=this.height,d=Math.min,a=Math.max,g=a(this.cropX,0),v=a(this.cropY,0),_=u.naturalWidth||u.width,y=u.naturalHeight||u.height,T=g*r,P=v*s,D=d(n*r,_-T),B=d(o*s,y-P),j=-n/2,z=-o/2,ee=d(n,_/r-g),ne=d(o,y/s-v);u&&c.drawImage(u,T,P,D,B,j,z,ee,ne)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,u){this.setElement(t.util.getById(c),u),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,u){c&&c.length?t.util.enlivenObjects(c,function(r){u&&u(r)},"fabric.Image.filters"):u&&u()},_setWidthHeight:function(c){c||(c={});var u=this.getElement();this.width=c.width||u.naturalWidth||u.width||0,this.height=c.height||u.naturalHeight||u.height||0},parsePreserveAspectRatioAttribute:function(){var c=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),u=this._element.width,r=this._element.height,s=1,n=1,o=0,d=0,a=0,g=0,v,_=this.width,y=this.height,T={width:_,height:y};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(s=n=t.util.findScaleToFit(this._element,T),v=(_-u*s)/2,c.alignX==="Min"&&(o=-v),c.alignX==="Max"&&(o=v),v=(y-r*n)/2,c.alignY==="Min"&&(d=-v),c.alignY==="Max"&&(d=v)),c.meetOrSlice==="slice"&&(s=n=t.util.findScaleToCover(this._element,T),v=u-_/s,c.alignX==="Mid"&&(a=v/2),c.alignX==="Max"&&(a=v),v=r-y/n,c.alignY==="Mid"&&(g=v/2),c.alignY==="Max"&&(g=v),u=_/s,r=y/n)):(s=_/u,n=y/r),{width:u,height:r,scaleX:s,scaleY:n,offsetLeft:o,offsetTop:d,cropX:a,cropY:g}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(c,u){var r=t.util.object.clone(c);t.util.loadImage(r.src,function(s,n){if(n){u&&u(null,!0);return}t.Image.prototype._initFilters.call(r,r.filters,function(o){r.filters=o||[],t.Image.prototype._initFilters.call(r,[r.resizeFilter],function(d){r.resizeFilter=d[0],t.util.enlivenObjectEnlivables(r,r,function(){var a=new t.Image(s,r);u(a,!1)})})})},null,r.crossOrigin)},t.Image.fromURL=function(c,u,r){t.util.loadImage(c,function(s,n){u&&u(new t.Image(s,r),n)},null,r&&r.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(c,u,r){var s=t.parseAttributes(c,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(s["xlink:href"],u,i(r?t.util.object.clone(r):{},s))}}(f),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var h=this.angle%360;return h>0?Math.round((h-1)/90)*90:Math.round(h/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(h){h=h||{};var i=function(){},c=h.onComplete||i,u=h.onChange||i,r=this;return t.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(s){r.rotate(s),u()},onComplete:function(){r.setCoords(),c()}})}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(h){return h.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(h){return h.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function h(c,u){var r="precision "+u+` float;
void main(){}`,s=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(s,r),c.compileShader(s),!!c.getShaderParameter(s,c.COMPILE_STATUS)}t.isWebglSupported=function(c){if(t.isLikelyNode)return!1;c=c||t.WebglFilterBackend.prototype.tileSize;var u=document.createElement("canvas"),r=u.getContext("webgl")||u.getContext("experimental-webgl"),s=!1;if(r){t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),s=t.maxTextureSize>=c;for(var n=["highp","mediump","lowp"],o=0;o<3;o++)if(h(r,n[o])){t.webGlPrecision=n[o];break}}return this.isSupported=s,s},t.WebglFilterBackend=i;function i(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.prototype={tileSize:2048,resources:{},setupGLContext:function(c,u){this.dispose(),this.createWebGLCanvas(c,u),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,u)},chooseFastestCopyGLTo2DMethod:function(c,u){var r=typeof window.performance<"u",s;try{new ImageData(1,1),s=!0}catch{s=!1}var n=typeof ArrayBuffer<"u",o=typeof Uint8ClampedArray<"u";if(!!(r&&s&&n&&o)){var d=t.util.createCanvasElement(),a=new ArrayBuffer(c*u*4);if(t.forceGLPutImageData){this.imageBuffer=a,this.copyGLTo2D=x;return}var g={imageBuffer:a,destinationWidth:c,destinationHeight:u,targetCanvas:d},v,_,y;d.width=c,d.height=u,v=window.performance.now(),w.call(g,this.gl,g),_=window.performance.now()-v,v=window.performance.now(),x.call(g,this.gl,g),y=window.performance.now()-v,_>y?(this.imageBuffer=a,this.copyGLTo2D=x):this.copyGLTo2D=w}},createWebGLCanvas:function(c,u){var r=t.util.createCanvasElement();r.width=c,r.height=u;var s={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},n=r.getContext("webgl",s);n||(n=r.getContext("experimental-webgl",s)),n&&(n.clearColor(0,0,0,0),this.canvas=r,this.gl=n)},applyFilters:function(c,u,r,s,n,o){var d=this.gl,a;o&&(a=this.getCachedTexture(o,u));var g={originalWidth:u.width||u.originalWidth,originalHeight:u.height||u.originalHeight,sourceWidth:r,sourceHeight:s,destinationWidth:r,destinationHeight:s,context:d,sourceTexture:this.createTexture(d,r,s,!a&&u),targetTexture:this.createTexture(d,r,s),originalTexture:a||this.createTexture(d,r,s,!a&&u),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n},v=d.createFramebuffer();return d.bindFramebuffer(d.FRAMEBUFFER,v),c.forEach(function(_){_&&_.applyTo(g)}),b(g),this.copyGLTo2D(d,g),d.bindTexture(d.TEXTURE_2D,null),d.deleteTexture(g.sourceTexture),d.deleteTexture(g.targetTexture),d.deleteFramebuffer(v),n.getContext("2d").setTransform(1,0,0,1,0,0),g},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,u,r,s){var n=c.createTexture();return c.bindTexture(c.TEXTURE_2D,n),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),s?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,s):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,u,r,0,c.RGBA,c.UNSIGNED_BYTE,null),n},getCachedTexture:function(c,u){if(this.textureCache[c])return this.textureCache[c];var r=this.createTexture(this.gl,u.width,u.height,u);return this.textureCache[c]=r,r},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:w,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,u={renderer:"",vendor:""};if(!c)return u;var r=c.getExtension("WEBGL_debug_renderer_info");if(r){var s=c.getParameter(r.UNMASKED_RENDERER_WEBGL),n=c.getParameter(r.UNMASKED_VENDOR_WEBGL);s&&(u.renderer=s.toLowerCase()),n&&(u.vendor=n.toLowerCase())}return this.gpuInfo=u,u}}}();function b(h){var i=h.targetCanvas,c=i.width,u=i.height,r=h.destinationWidth,s=h.destinationHeight;(c!==r||u!==s)&&(i.width=r,i.height=s)}function w(h,i){var c=h.canvas,u=i.targetCanvas,r=u.getContext("2d");r.translate(0,u.height),r.scale(1,-1);var s=c.height-u.height;r.drawImage(c,0,s,u.width,u.height,0,0,u.width,u.height)}function x(h,i){var c=i.targetCanvas,u=c.getContext("2d"),r=i.destinationWidth,s=i.destinationHeight,n=r*s*4,o=new Uint8Array(this.imageBuffer,0,n),d=new Uint8ClampedArray(this.imageBuffer,0,n);h.readPixels(0,0,r,s,h.RGBA,h.UNSIGNED_BYTE,o);var a=new ImageData(d,r,s);u.putImageData(a,0,0)}(function(){var h=function(){};t.Canvas2dFilterBackend=i;function i(){}i.prototype={evictCachesForKey:h,dispose:h,clearWebGLCaches:h,resources:{},applyFilters:function(c,u,r,s,n){var o=n.getContext("2d");o.drawImage(u,0,0,r,s);var d=o.getImageData(0,0,r,s),a=o.getImageData(0,0,r,s),g={sourceWidth:r,sourceHeight:s,imageData:d,originalEl:u,originalImageData:a,canvasEl:n,ctx:o,filterBackend:this};return c.forEach(function(v){v.applyTo(g)}),(g.imageData.width!==r||g.imageData.height!==s)&&(n.width=g.imageData.width,n.height=g.imageData.height),o.putImageData(g.imageData,0,0),g}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(h){h&&this.setOptions(h)},setOptions:function(h){for(var i in h)this[i]=h[i]},createProgram:function(h,i,c){i=i||this.fragmentSource,c=c||this.vertexSource,t.webGlPrecision!=="highp"&&(i=i.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var u=h.createShader(h.VERTEX_SHADER);if(h.shaderSource(u,c),h.compileShader(u),!h.getShaderParameter(u,h.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+h.getShaderInfoLog(u));var r=h.createShader(h.FRAGMENT_SHADER);if(h.shaderSource(r,i),h.compileShader(r),!h.getShaderParameter(r,h.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+h.getShaderInfoLog(r));var s=h.createProgram();if(h.attachShader(s,u),h.attachShader(s,r),h.linkProgram(s),!h.getProgramParameter(s,h.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+h.getProgramInfoLog(s));var n=this.getAttributeLocations(h,s),o=this.getUniformLocations(h,s)||{};return o.uStepW=h.getUniformLocation(s,"uStepW"),o.uStepH=h.getUniformLocation(s,"uStepH"),{program:s,attributeLocations:n,uniformLocations:o}},getAttributeLocations:function(h,i){return{aPosition:h.getAttribLocation(i,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(h,i,c){var u=i.aPosition,r=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,r),h.enableVertexAttribArray(u),h.vertexAttribPointer(u,2,h.FLOAT,!1,0,0),h.bufferData(h.ARRAY_BUFFER,c,h.STATIC_DRAW)},_setupFrameBuffer:function(h){var i=h.context,c,u;h.passes>1?(c=h.destinationWidth,u=h.destinationHeight,(h.sourceWidth!==c||h.sourceHeight!==u)&&(i.deleteTexture(h.targetTexture),h.targetTexture=h.filterBackend.createTexture(i,c,u)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,h.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(h){h.passes--,h.pass++;var i=h.targetTexture;h.targetTexture=h.sourceTexture,h.sourceTexture=i},isNeutralState:function(){var h=this.mainParameter,i=t.Image.filters[this.type].prototype;if(h)if(Array.isArray(i[h])){for(var c=i[h].length;c--;)if(this[h][c]!==i[h][c])return!1;return!0}else return i[h]===this[h];else return!1},applyTo:function(h){h.webgl?(this._setupFrameBuffer(h),this.applyToWebGL(h),this._swapTextures(h)):this.applyTo2d(h)},retrieveShader:function(h){return h.programCache.hasOwnProperty(this.type)||(h.programCache[this.type]=this.createProgram(h.context)),h.programCache[this.type]},applyToWebGL:function(h){var i=h.context,c=this.retrieveShader(h);h.pass===0&&h.originalTexture?i.bindTexture(i.TEXTURE_2D,h.originalTexture):i.bindTexture(i.TEXTURE_2D,h.sourceTexture),i.useProgram(c.program),this.sendAttributeData(i,c.attributeLocations,h.aPosition),i.uniform1f(c.uniformLocations.uStepW,1/h.sourceWidth),i.uniform1f(c.uniformLocations.uStepH,1/h.sourceHeight),this.sendUniformData(i,c.uniformLocations),i.viewport(0,0,h.destinationWidth,h.destinationHeight),i.drawArrays(i.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(h,i,c){h.activeTexture(c),h.bindTexture(h.TEXTURE_2D,i),h.activeTexture(h.TEXTURE0)},unbindAdditionalTexture:function(h,i){h.activeTexture(i),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(h){this[this.mainParameter]=h},sendUniformData:function(){},createHelpLayer:function(h){if(!h.helpLayer){var i=document.createElement("canvas");i.width=h.sourceWidth,i.height=h.sourceHeight,h.helpLayer=i}},toObject:function(){var h={type:this.type},i=this.mainParameter;return i&&(h[i]=this[i]),h},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(h,i){var c=new t.Image.filters[h.type](h);return i&&i(c),c},function(h){var i=h.fabric||(h.fabric={}),c=i.Image.filters,u=i.util.createClass;c.ColorMatrix=u(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(r){this.callSuper("initialize",r),this.matrix=this.matrix.slice(0)},applyTo2d:function(r){var s=r.imageData,n=s.data,o=n.length,d=this.matrix,a,g,v,_,y,T=this.colorsOnly;for(y=0;y<o;y+=4)a=n[y],g=n[y+1],v=n[y+2],T?(n[y]=a*d[0]+g*d[1]+v*d[2]+d[4]*255,n[y+1]=a*d[5]+g*d[6]+v*d[7]+d[9]*255,n[y+2]=a*d[10]+g*d[11]+v*d[12]+d[14]*255):(_=n[y+3],n[y]=a*d[0]+g*d[1]+v*d[2]+_*d[3]+d[4]*255,n[y+1]=a*d[5]+g*d[6]+v*d[7]+_*d[8]+d[9]*255,n[y+2]=a*d[10]+g*d[11]+v*d[12]+_*d[13]+d[14]*255,n[y+3]=a*d[15]+g*d[16]+v*d[17]+_*d[18]+d[19]*255)},getUniformLocations:function(r,s){return{uColorMatrix:r.getUniformLocation(s,"uColorMatrix"),uConstants:r.getUniformLocation(s,"uConstants")}},sendUniformData:function(r,s){var n=this.matrix,o=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],d=[n[4],n[9],n[14],n[19]];r.uniformMatrix4fv(s.uColorMatrix,!1,o),r.uniform4fv(s.uConstants,d)}}),i.Image.filters.ColorMatrix.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.Image.filters,u=i.util.createClass;c.Brightness=u(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(r){if(this.brightness!==0){var s=r.imageData,n=s.data,o,d=n.length,a=Math.round(this.brightness*255);for(o=0;o<d;o+=4)n[o]=n[o]+a,n[o+1]=n[o+1]+a,n[o+2]=n[o+2]+a}},getUniformLocations:function(r,s){return{uBrightness:r.getUniformLocation(s,"uBrightness")}},sendUniformData:function(r,s){r.uniform1f(s.uBrightness,this.brightness)}}),i.Image.filters.Brightness.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.util.object.extend,u=i.Image.filters,r=i.util.createClass;u.Convolute=r(u.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(s){var n=Math.sqrt(this.matrix.length),o=this.type+"_"+n+"_"+(this.opaque?1:0),d=this.fragmentSource[o];return s.programCache.hasOwnProperty(o)||(s.programCache[o]=this.createProgram(s.context,d)),s.programCache[o]},applyTo2d:function(s){var n=s.imageData,o=n.data,d=this.matrix,a=Math.round(Math.sqrt(d.length)),g=Math.floor(a/2),v=n.width,_=n.height,y=s.ctx.createImageData(v,_),T=y.data,P=this.opaque?1:0,D,B,j,z,ee,ne,ie,Z,re,pe,me,G,O;for(me=0;me<_;me++)for(pe=0;pe<v;pe++){for(ee=(me*v+pe)*4,D=0,B=0,j=0,z=0,O=0;O<a;O++)for(G=0;G<a;G++)ie=me+O-g,ne=pe+G-g,!(ie<0||ie>=_||ne<0||ne>=v)&&(Z=(ie*v+ne)*4,re=d[O*a+G],D+=o[Z]*re,B+=o[Z+1]*re,j+=o[Z+2]*re,P||(z+=o[Z+3]*re));T[ee]=D,T[ee+1]=B,T[ee+2]=j,P?T[ee+3]=o[ee+3]:T[ee+3]=z}s.imageData=y},getUniformLocations:function(s,n){return{uMatrix:s.getUniformLocation(n,"uMatrix"),uOpaque:s.getUniformLocation(n,"uOpaque"),uHalfSize:s.getUniformLocation(n,"uHalfSize"),uSize:s.getUniformLocation(n,"uSize")}},sendUniformData:function(s,n){s.uniform1fv(n.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),i.Image.filters.Convolute.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.Image.filters,u=i.util.createClass;c.Grayscale=u(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(r){var s=r.imageData,n=s.data,o,d=n.length,a,g=this.mode;for(o=0;o<d;o+=4)g==="average"?a=(n[o]+n[o+1]+n[o+2])/3:g==="lightness"?a=(Math.min(n[o],n[o+1],n[o+2])+Math.max(n[o],n[o+1],n[o+2]))/2:g==="luminosity"&&(a=.21*n[o]+.72*n[o+1]+.07*n[o+2]),n[o]=a,n[o+1]=a,n[o+2]=a},retrieveShader:function(r){var s=this.type+"_"+this.mode;if(!r.programCache.hasOwnProperty(s)){var n=this.fragmentSource[this.mode];r.programCache[s]=this.createProgram(r.context,n)}return r.programCache[s]},getUniformLocations:function(r,s){return{uMode:r.getUniformLocation(s,"uMode")}},sendUniformData:function(r,s){var n=1;r.uniform1i(s.uMode,n)},isNeutralState:function(){return!1}}),i.Image.filters.Grayscale.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.Image.filters,u=i.util.createClass;c.Invert=u(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(r){var s=r.imageData,n=s.data,o,d=n.length;for(o=0;o<d;o+=4)n[o]=255-n[o],n[o+1]=255-n[o+1],n[o+2]=255-n[o+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(r,s){return{uInvert:r.getUniformLocation(s,"uInvert")}},sendUniformData:function(r,s){r.uniform1i(s.uInvert,this.invert)}}),i.Image.filters.Invert.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.util.object.extend,u=i.Image.filters,r=i.util.createClass;u.Noise=r(u.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(s){if(this.noise!==0){var n=s.imageData,o=n.data,d,a=o.length,g=this.noise,v;for(d=0,a=o.length;d<a;d+=4)v=(.5-Math.random())*g,o[d]+=v,o[d+1]+=v,o[d+2]+=v}},getUniformLocations:function(s,n){return{uNoise:s.getUniformLocation(n,"uNoise"),uSeed:s.getUniformLocation(n,"uSeed")}},sendUniformData:function(s,n){s.uniform1f(n.uNoise,this.noise/255),s.uniform1f(n.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),i.Image.filters.Noise.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.Image.filters,u=i.util.createClass;c.Pixelate=u(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(r){var s=r.imageData,n=s.data,o=s.height,d=s.width,a,g,v,_,y,T,P,D,B,j,z;for(g=0;g<o;g+=this.blocksize)for(v=0;v<d;v+=this.blocksize)for(a=g*4*d+v*4,_=n[a],y=n[a+1],T=n[a+2],P=n[a+3],j=Math.min(g+this.blocksize,o),z=Math.min(v+this.blocksize,d),D=g;D<j;D++)for(B=v;B<z;B++)a=D*4*d+B*4,n[a]=_,n[a+1]=y,n[a+2]=T,n[a+3]=P},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(r,s){return{uBlocksize:r.getUniformLocation(s,"uBlocksize"),uStepW:r.getUniformLocation(s,"uStepW"),uStepH:r.getUniformLocation(s,"uStepH")}},sendUniformData:function(r,s){r.uniform1f(s.uBlocksize,this.blocksize)}}),i.Image.filters.Pixelate.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.util.object.extend,u=i.Image.filters,r=i.util.createClass;u.RemoveColor=r(u.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(s){var n=s.imageData,o=n.data,d,a=this.distance*255,g,v,_,y=new i.Color(this.color).getSource(),T=[y[0]-a,y[1]-a,y[2]-a],P=[y[0]+a,y[1]+a,y[2]+a];for(d=0;d<o.length;d+=4)g=o[d],v=o[d+1],_=o[d+2],g>T[0]&&v>T[1]&&_>T[2]&&g<P[0]&&v<P[1]&&_<P[2]&&(o[d+3]=0)},getUniformLocations:function(s,n){return{uLow:s.getUniformLocation(n,"uLow"),uHigh:s.getUniformLocation(n,"uHigh")}},sendUniformData:function(s,n){var o=new i.Color(this.color).getSource(),d=parseFloat(this.distance),a=[0+o[0]/255-d,0+o[1]/255-d,0+o[2]/255-d,1],g=[o[0]/255+d,o[1]/255+d,o[2]/255+d,1];s.uniform4fv(n.uLow,a),s.uniform4fv(n.uHigh,g)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),i.Image.filters.RemoveColor.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.Image.filters,u=i.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var s in r)c[s]=u(c.ColorMatrix,{type:s,matrix:r[s],mainParameter:!1,colorsOnly:!0}),i.Image.filters[s].fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric,c=i.Image.filters,u=i.util.createClass;c.BlendColor=u(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(r){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[r]+`}
}`},retrieveShader:function(r){var s=this.type+"_"+this.mode,n;return r.programCache.hasOwnProperty(s)||(n=this.buildSource(this.mode),r.programCache[s]=this.createProgram(r.context,n)),r.programCache[s]},applyTo2d:function(r){var s=r.imageData,n=s.data,o=n.length,d,a,g,v,_,y,T,P=1-this.alpha;T=new i.Color(this.color).getSource(),d=T[0]*this.alpha,a=T[1]*this.alpha,g=T[2]*this.alpha;for(var D=0;D<o;D+=4)switch(v=n[D],_=n[D+1],y=n[D+2],this.mode){case"multiply":n[D]=v*d/255,n[D+1]=_*a/255,n[D+2]=y*g/255;break;case"screen":n[D]=255-(255-v)*(255-d)/255,n[D+1]=255-(255-_)*(255-a)/255,n[D+2]=255-(255-y)*(255-g)/255;break;case"add":n[D]=v+d,n[D+1]=_+a,n[D+2]=y+g;break;case"diff":case"difference":n[D]=Math.abs(v-d),n[D+1]=Math.abs(_-a),n[D+2]=Math.abs(y-g);break;case"subtract":n[D]=v-d,n[D+1]=_-a,n[D+2]=y-g;break;case"darken":n[D]=Math.min(v,d),n[D+1]=Math.min(_,a),n[D+2]=Math.min(y,g);break;case"lighten":n[D]=Math.max(v,d),n[D+1]=Math.max(_,a),n[D+2]=Math.max(y,g);break;case"overlay":n[D]=d<128?2*v*d/255:255-2*(255-v)*(255-d)/255,n[D+1]=a<128?2*_*a/255:255-2*(255-_)*(255-a)/255,n[D+2]=g<128?2*y*g/255:255-2*(255-y)*(255-g)/255;break;case"exclusion":n[D]=d+v-2*d*v/255,n[D+1]=a+_-2*a*_/255,n[D+2]=g+y-2*g*y/255;break;case"tint":n[D]=d+v*P,n[D+1]=a+_*P,n[D+2]=g+y*P}},getUniformLocations:function(r,s){return{uColor:r.getUniformLocation(s,"uColor")}},sendUniformData:function(r,s){var n=new i.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,r.uniform4fv(s.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendColor.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric,c=i.Image.filters,u=i.util.createClass;c.BlendImage=u(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(r){var s=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return r.programCache.hasOwnProperty(s)||(r.programCache[s]=this.createProgram(r.context,n)),r.programCache[s]},applyToWebGL:function(r){var s=r.context,n=this.createTexture(r.filterBackend,this.image);this.bindAdditionalTexture(s,n,s.TEXTURE1),this.callSuper("applyToWebGL",r),this.unbindAdditionalTexture(s,s.TEXTURE1)},createTexture:function(r,s){return r.getCachedTexture(s.cacheKey,s._element)},calculateMatrix:function(){var r=this.image,s=r._element.width,n=r._element.height;return[1/r.scaleX,0,0,0,1/r.scaleY,0,-r.left/s,-r.top/n,1]},applyTo2d:function(r){var s=r.imageData,n=r.filterBackend.resources,o=s.data,d=o.length,a=s.width,g=s.height,v,_,y,T,P,D,B,j,z,ee,ne=this.image,ie;n.blendImage||(n.blendImage=i.util.createCanvasElement()),z=n.blendImage,ee=z.getContext("2d"),z.width!==a||z.height!==g?(z.width=a,z.height=g):ee.clearRect(0,0,a,g),ee.setTransform(ne.scaleX,0,0,ne.scaleY,ne.left,ne.top),ee.drawImage(ne._element,0,0,a,g),ie=ee.getImageData(0,0,a,g).data;for(var Z=0;Z<d;Z+=4)switch(P=o[Z],D=o[Z+1],B=o[Z+2],j=o[Z+3],v=ie[Z],_=ie[Z+1],y=ie[Z+2],T=ie[Z+3],this.mode){case"multiply":o[Z]=P*v/255,o[Z+1]=D*_/255,o[Z+2]=B*y/255,o[Z+3]=j*T/255;break;case"mask":o[Z+3]=T;break}},getUniformLocations:function(r,s){return{uTransformMatrix:r.getUniformLocation(s,"uTransformMatrix"),uImage:r.getUniformLocation(s,"uImage")}},sendUniformData:function(r,s){var n=this.calculateMatrix();r.uniform1i(s.uImage,1),r.uniformMatrix3fv(s.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendImage.fromObject=function(r,s){i.Image.fromObject(r.image,function(n){var o=i.util.object.clone(r);o.image=n,s(new i.Image.filters.BlendImage(o))})}}(f),function(h){var i=h.fabric||(h.fabric={}),c=Math.pow,u=Math.floor,r=Math.sqrt,s=Math.abs,n=Math.round,o=Math.sin,d=Math.ceil,a=i.Image.filters,g=i.util.createClass;a.Resize=g(a.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(v,_){return{uDelta:v.getUniformLocation(_,"uDelta"),uTaps:v.getUniformLocation(_,"uTaps")}},sendUniformData:function(v,_){v.uniform2fv(_.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),v.uniform1fv(_.uTaps,this.taps)},retrieveShader:function(v){var _=this.getFilterWindow(),y=this.type+"_"+_;if(!v.programCache.hasOwnProperty(y)){var T=this.generateShader(_);v.programCache[y]=this.createProgram(v.context,T)}return v.programCache[y]},getFilterWindow:function(){var v=this.tempScale;return Math.ceil(this.lanczosLobes/v)},getTaps:function(){for(var v=this.lanczosCreate(this.lanczosLobes),_=this.tempScale,y=this.getFilterWindow(),T=new Array(y),P=1;P<=y;P++)T[P-1]=v(P*_);return T},generateShader:function(T){for(var _=new Array(T),y=this.fragmentSourceTOP,T,P=1;P<=T;P++)_[P-1]=P+".0 * uDelta";return y+="uniform float uTaps["+T+`];
`,y+=`void main() {
`,y+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,y+=`  float sum = 1.0;
`,_.forEach(function(D,B){y+="  color += texture2D(uTexture, vTexCoord + "+D+") * uTaps["+B+`];
`,y+="  color += texture2D(uTexture, vTexCoord - "+D+") * uTaps["+B+`];
`,y+="  sum += 2.0 * uTaps["+B+`];
`}),y+=`  gl_FragColor = color / sum;
`,y+="}",y},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(v){v.webgl?(v.passes++,this.width=v.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=v.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),v.destinationWidth=this.dW,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceWidth=v.destinationWidth,this.height=v.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),v.destinationHeight=this.dH,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceHeight=v.destinationHeight):this.applyTo2d(v)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(v){return function(_){if(_>=v||_<=-v)return 0;if(_<11920929e-14&&_>-11920929e-14)return 1;_*=Math.PI;var y=_/v;return o(_)/_*o(y)/y}},applyTo2d:function(v){var _=v.imageData,y=this.scaleX,T=this.scaleY;this.rcpScaleX=1/y,this.rcpScaleY=1/T;var P=_.width,D=_.height,B=n(P*y),j=n(D*T),z;this.resizeType==="sliceHack"?z=this.sliceByTwo(v,P,D,B,j):this.resizeType==="hermite"?z=this.hermiteFastResize(v,P,D,B,j):this.resizeType==="bilinear"?z=this.bilinearFiltering(v,P,D,B,j):this.resizeType==="lanczos"&&(z=this.lanczosResize(v,P,D,B,j)),v.imageData=z},sliceByTwo:function(v,_,y,T,P){var D=v.imageData,B=.5,j=!1,z=!1,ee=_*B,ne=y*B,ie=i.filterBackend.resources,Z,re,pe=0,me=0,G=_,O=0;for(ie.sliceByTwo||(ie.sliceByTwo=document.createElement("canvas")),Z=ie.sliceByTwo,(Z.width<_*1.5||Z.height<y)&&(Z.width=_*1.5,Z.height=y),re=Z.getContext("2d"),re.clearRect(0,0,_*1.5,y),re.putImageData(D,0,0),T=u(T),P=u(P);!j||!z;)_=ee,y=ne,T<u(ee*B)?ee=u(ee*B):(ee=T,j=!0),P<u(ne*B)?ne=u(ne*B):(ne=P,z=!0),re.drawImage(Z,pe,me,_,y,G,O,ee,ne),pe=G,me=O,O+=ne;return re.getImageData(pe,me,T,P)},lanczosResize:function(v,_,y,T,P){function D(k){var R,Y,F,A,$,U,Q,K,le,de,ve;for(O.x=(k+.5)*ne,I.x=u(O.x),R=0;R<P;R++){for(O.y=(R+.5)*ie,I.y=u(O.y),$=0,U=0,Q=0,K=0,le=0,Y=I.x-pe;Y<=I.x+pe;Y++)if(!(Y<0||Y>=_)){de=u(1e3*s(Y-O.x)),G[de]||(G[de]={});for(var te=I.y-me;te<=I.y+me;te++)te<0||te>=y||(ve=u(1e3*s(te-O.y)),G[de][ve]||(G[de][ve]=ee(r(c(de*Z,2)+c(ve*re,2))/1e3)),F=G[de][ve],F>0&&(A=(te*_+Y)*4,$+=F,U+=F*B[A],Q+=F*B[A+1],K+=F*B[A+2],le+=F*B[A+3]))}A=(R*T+k)*4,z[A]=U/$,z[A+1]=Q/$,z[A+2]=K/$,z[A+3]=le/$}return++k<T?D(k):j}var B=v.imageData.data,j=v.ctx.createImageData(T,P),z=j.data,ee=this.lanczosCreate(this.lanczosLobes),ne=this.rcpScaleX,ie=this.rcpScaleY,Z=2/this.rcpScaleX,re=2/this.rcpScaleY,pe=d(ne*this.lanczosLobes/2),me=d(ie*this.lanczosLobes/2),G={},O={},I={};return D(0)},bilinearFiltering:function(v,_,y,T,P){var D,B,j,z,ee,ne,ie,Z,re,pe,me,G,O=0,I,k=this.rcpScaleX,R=this.rcpScaleY,Y=4*(_-1),F=v.imageData,A=F.data,$=v.ctx.createImageData(T,P),U=$.data;for(ie=0;ie<P;ie++)for(Z=0;Z<T;Z++)for(ee=u(k*Z),ne=u(R*ie),re=k*Z-ee,pe=R*ie-ne,I=4*(ne*_+ee),me=0;me<4;me++)D=A[I+me],B=A[I+4+me],j=A[I+Y+me],z=A[I+Y+4+me],G=D*(1-re)*(1-pe)+B*re*(1-pe)+j*pe*(1-re)+z*re*pe,U[O++]=G;return $},hermiteFastResize:function(v,_,y,T,P){for(var D=this.rcpScaleX,B=this.rcpScaleY,j=d(D/2),z=d(B/2),ee=v.imageData,ne=ee.data,ie=v.ctx.createImageData(T,P),Z=ie.data,re=0;re<P;re++)for(var pe=0;pe<T;pe++){for(var me=(pe+re*T)*4,G=0,O=0,I=0,k=0,R=0,Y=0,F=0,A=(re+.5)*B,$=u(re*B);$<(re+1)*B;$++)for(var U=s(A-($+.5))/z,Q=(pe+.5)*D,K=U*U,le=u(pe*D);le<(pe+1)*D;le++){var de=s(Q-(le+.5))/j,ve=r(K+de*de);ve>1&&ve<-1||(G=2*ve*ve*ve-3*ve*ve+1,G>0&&(de=4*(le+$*_),F+=G*ne[de+3],I+=G,ne[de+3]<255&&(G=G*ne[de+3]/250),k+=G*ne[de],R+=G*ne[de+1],Y+=G*ne[de+2],O+=G))}Z[me]=k/O,Z[me+1]=R/O,Z[me+2]=Y/O,Z[me+3]=F/I}return ie},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),i.Image.filters.Resize.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.Image.filters,u=i.util.createClass;c.Contrast=u(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(r){if(this.contrast!==0){var s=r.imageData,n,d,o=s.data,d=o.length,a=Math.floor(this.contrast*255),g=259*(a+255)/(255*(259-a));for(n=0;n<d;n+=4)o[n]=g*(o[n]-128)+128,o[n+1]=g*(o[n+1]-128)+128,o[n+2]=g*(o[n+2]-128)+128}},getUniformLocations:function(r,s){return{uContrast:r.getUniformLocation(s,"uContrast")}},sendUniformData:function(r,s){r.uniform1f(s.uContrast,this.contrast)}}),i.Image.filters.Contrast.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.Image.filters,u=i.util.createClass;c.Saturation=u(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(r){if(this.saturation!==0){var s=r.imageData,n=s.data,o=n.length,d=-this.saturation,a,g;for(a=0;a<o;a+=4)g=Math.max(n[a],n[a+1],n[a+2]),n[a]+=g!==n[a]?(g-n[a])*d:0,n[a+1]+=g!==n[a+1]?(g-n[a+1])*d:0,n[a+2]+=g!==n[a+2]?(g-n[a+2])*d:0}},getUniformLocations:function(r,s){return{uSaturation:r.getUniformLocation(s,"uSaturation")}},sendUniformData:function(r,s){r.uniform1f(s.uSaturation,-this.saturation)}}),i.Image.filters.Saturation.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.Image.filters,u=i.util.createClass;c.Vibrance=u(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(r){if(this.vibrance!==0){var s=r.imageData,n=s.data,o=n.length,d=-this.vibrance,a,g,v,_;for(a=0;a<o;a+=4)g=Math.max(n[a],n[a+1],n[a+2]),v=(n[a]+n[a+1]+n[a+2])/3,_=Math.abs(g-v)*2/255*d,n[a]+=g!==n[a]?(g-n[a])*_:0,n[a+1]+=g!==n[a+1]?(g-n[a+1])*_:0,n[a+2]+=g!==n[a+2]?(g-n[a+2])*_:0}},getUniformLocations:function(r,s){return{uVibrance:r.getUniformLocation(s,"uVibrance")}},sendUniformData:function(r,s){r.uniform1f(s.uVibrance,-this.vibrance)}}),i.Image.filters.Vibrance.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.Image.filters,u=i.util.createClass;c.Blur=u(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(r){r.webgl?(this.aspectRatio=r.sourceWidth/r.sourceHeight,r.passes++,this._setupFrameBuffer(r),this.horizontal=!0,this.applyToWebGL(r),this._swapTextures(r),this._setupFrameBuffer(r),this.horizontal=!1,this.applyToWebGL(r),this._swapTextures(r)):this.applyTo2d(r)},applyTo2d:function(r){r.imageData=this.simpleBlur(r)},simpleBlur:function(r){var s=r.filterBackend.resources,n,o,d=r.imageData.width,a=r.imageData.height;s.blurLayer1||(s.blurLayer1=i.util.createCanvasElement(),s.blurLayer2=i.util.createCanvasElement()),n=s.blurLayer1,o=s.blurLayer2,(n.width!==d||n.height!==a)&&(o.width=n.width=d,o.height=n.height=a);var g=n.getContext("2d"),v=o.getContext("2d"),_=15,y,T,P,D,B=this.blur*.06*.5;for(g.putImageData(r.imageData,0,0),v.clearRect(0,0,d,a),D=-_;D<=_;D++)y=(Math.random()-.5)/4,T=D/_,P=B*T*d+y,v.globalAlpha=1-Math.abs(T),v.drawImage(n,P,y),g.drawImage(o,0,0),v.globalAlpha=1,v.clearRect(0,0,o.width,o.height);for(D=-_;D<=_;D++)y=(Math.random()-.5)/4,T=D/_,P=B*T*a+y,v.globalAlpha=1-Math.abs(T),v.drawImage(n,y,P),g.drawImage(o,0,0),v.globalAlpha=1,v.clearRect(0,0,o.width,o.height);r.ctx.drawImage(n,0,0);var j=r.ctx.getImageData(0,0,n.width,n.height);return g.globalAlpha=1,g.clearRect(0,0,n.width,n.height),j},getUniformLocations:function(r,s){return{delta:r.getUniformLocation(s,"uDelta")}},sendUniformData:function(r,s){var n=this.chooseRightDelta();r.uniform2fv(s.delta,n)},chooseRightDelta:function(){var r=1,s=[0,0],n;return this.horizontal?this.aspectRatio>1&&(r=1/this.aspectRatio):this.aspectRatio<1&&(r=this.aspectRatio),n=r*this.blur*.12,this.horizontal?s[0]=n:s[1]=n,s}}),c.Blur.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.Image.filters,u=i.util.createClass;c.Gamma=u(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(r){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,r)},applyTo2d:function(r){var s=r.imageData,n=s.data,o=this.gamma,d=n.length,a=1/o[0],g=1/o[1],v=1/o[2],_;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),_=0,d=256;_<d;_++)this.rVals[_]=Math.pow(_/255,a)*255,this.gVals[_]=Math.pow(_/255,g)*255,this.bVals[_]=Math.pow(_/255,v)*255;for(_=0,d=n.length;_<d;_+=4)n[_]=this.rVals[n[_]],n[_+1]=this.gVals[n[_+1]],n[_+2]=this.bVals[n[_+2]]},getUniformLocations:function(r,s){return{uGamma:r.getUniformLocation(s,"uGamma")}},sendUniformData:function(r,s){r.uniform3fv(s.uGamma,this.gamma)}}),i.Image.filters.Gamma.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.Image.filters,u=i.util.createClass;c.Composed=u(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(r){this.callSuper("initialize",r),this.subFilters=this.subFilters.slice(0)},applyTo:function(r){r.passes+=this.subFilters.length-1,this.subFilters.forEach(function(s){s.applyTo(r)})},toObject:function(){return i.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(r){return r.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(r){return!r.isNeutralState()})}}),i.Image.filters.Composed.fromObject=function(r,s){var n=r.subFilters||[],o=n.map(function(a){return new i.Image.filters[a.type](a)}),d=new i.Image.filters.Composed({subFilters:o});return s&&s(d),d}}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.Image.filters,u=i.util.createClass;c.HueRotation=u(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var r=this.rotation*Math.PI,s=i.util.cos(r),n=i.util.sin(r),o=1/3,d=Math.sqrt(o)*n,a=1-s;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=s+a/3,this.matrix[1]=o*a-d,this.matrix[2]=o*a+d,this.matrix[5]=o*a+d,this.matrix[6]=s+o*a,this.matrix[7]=o*a-d,this.matrix[10]=o*a-d,this.matrix[11]=o*a+d,this.matrix[12]=s+o*a},isNeutralState:function(r){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,r)},applyTo:function(r){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,r)}}),i.Image.filters.HueRotation.fromObject=i.Image.filters.BaseFilter.fromObject}(f),function(h){var i=h.fabric||(h.fabric={}),c=i.util.object.clone;if(i.Text){i.warn("fabric.Text is already defined");return}var u="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");i.Text=i.util.createClass(i.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:i.Object.prototype.stateProperties.concat(u),cacheProperties:i.Object.prototype.cacheProperties.concat(u),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(r,s){this.styles=s?s.styles||{}:{},this.text=r,this.__skipDimension=!0,this.callSuper("initialize",s),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var r=this.path;r&&(r.segmentsInfo=i.util.getPathSegmentsInfo(r.path))},getMeasuringContext:function(){return i._measuringContext||(i._measuringContext=this.canvas&&this.canvas.contextCache||i.util.createCanvasElement().getContext("2d")),i._measuringContext},_splitText:function(){var r=this._splitTextIntoLines(this.text);return this.textLines=r.lines,this._textLines=r.graphemeLines,this._unwrappedTextLines=r._unwrappedLines,this._text=r.graphemeText,r},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var r,s,n,o,d,a,g,v=0,_=this._textLines.length;v<_;v++)if(!(this.textAlign!=="justify"&&(v===_-1||this.isEndOfWrapping(v)))&&(o=0,d=this._textLines[v],s=this.getLineWidth(v),s<this.width&&(g=this.textLines[v].match(this._reSpacesAndTabs)))){n=g.length,r=(this.width-s)/n;for(var y=0,T=d.length;y<=T;y++)a=this.__charBounds[v][y],this._reSpaceAndTab.test(d[y])?(a.width+=r,a.kernedWidth+=r,a.left+=o,o+=r):a.left+=o}},isEndOfWrapping:function(r){return r===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var r=this.callSuper("_getCacheCanvasDimensions"),s=this.fontSize;return r.width+=s*r.zoomX,r.height+=s*r.zoomY,r},_render:function(r){var s=this.path;s&&!s.isNotVisible()&&s._render(r),this._setTextStyles(r),this._renderTextLinesBackground(r),this._renderTextDecoration(r,"underline"),this._renderText(r),this._renderTextDecoration(r,"overline"),this._renderTextDecoration(r,"linethrough")},_renderText:function(r){this.paintFirst==="stroke"?(this._renderTextStroke(r),this._renderTextFill(r)):(this._renderTextFill(r),this._renderTextStroke(r))},_setTextStyles:function(r,s,n){if(r.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":r.textBaseline="middle";break;case"ascender":r.textBaseline="top";break;case"descender":r.textBaseline="bottom";break}r.font=this._getFontDeclaration(s,n)},calcTextWidth:function(){for(var r=this.getLineWidth(0),s=1,n=this._textLines.length;s<n;s++){var o=this.getLineWidth(s);o>r&&(r=o)}return r},_renderTextLine:function(r,s,n,o,d,a){this._renderChars(r,s,n,o,d,a)},_renderTextLinesBackground:function(r){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var s,n,o=r.fillStyle,d,a,g=this._getLeftOffset(),v=this._getTopOffset(),_=0,y=0,T,P,D=this.path,B,j=0,z=this._textLines.length;j<z;j++){if(s=this.getHeightOfLine(j),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",j)){v+=s;continue}d=this._textLines[j],n=this._getLineLeftOffset(j),y=0,_=0,a=this.getValueOfPropertyAt(j,0,"textBackgroundColor");for(var ee=0,ne=d.length;ee<ne;ee++)T=this.__charBounds[j][ee],P=this.getValueOfPropertyAt(j,ee,"textBackgroundColor"),D?(r.save(),r.translate(T.renderLeft,T.renderTop),r.rotate(T.angle),r.fillStyle=P,P&&r.fillRect(-T.width/2,-s/this.lineHeight*(1-this._fontSizeFraction),T.width,s/this.lineHeight),r.restore()):P!==a?(B=g+n+_,this.direction==="rtl"&&(B=this.width-B-y),r.fillStyle=a,a&&r.fillRect(B,v,y,s/this.lineHeight),_=T.left,y=T.width,a=P):y+=T.kernedWidth;P&&!D&&(B=g+n+_,this.direction==="rtl"&&(B=this.width-B-y),r.fillStyle=P,r.fillRect(B,v,y,s/this.lineHeight)),v+=s}r.fillStyle=o,this._removeShadow(r)}},getFontCache:function(r){var s=r.fontFamily.toLowerCase();i.charWidthsCache[s]||(i.charWidthsCache[s]={});var n=i.charWidthsCache[s],o=r.fontStyle.toLowerCase()+"_"+(r.fontWeight+"").toLowerCase();return n[o]||(n[o]={}),n[o]},_measureChar:function(r,s,n,o){var d=this.getFontCache(s),a=this._getFontDeclaration(s),g=this._getFontDeclaration(o),v=n+r,_=a===g,y,T,P,D=s.fontSize/this.CACHE_FONT_SIZE,B;if(n&&d[n]!==void 0&&(P=d[n]),d[r]!==void 0&&(B=y=d[r]),_&&d[v]!==void 0&&(T=d[v],B=T-P),y===void 0||P===void 0||T===void 0){var j=this.getMeasuringContext();this._setTextStyles(j,s,!0)}return y===void 0&&(B=y=j.measureText(r).width,d[r]=y),P===void 0&&_&&n&&(P=j.measureText(n).width,d[n]=P),_&&T===void 0&&(T=j.measureText(v).width,d[v]=T,B=T-P),{width:y*D,kernedWidth:B*D}},getHeightOfChar:function(r,s){return this.getValueOfPropertyAt(r,s,"fontSize")},measureLine:function(r){var s=this._measureLine(r);return this.charSpacing!==0&&(s.width-=this._getWidthOfCharSpacing()),s.width<0&&(s.width=0),s},_measureLine:function(r){var s=0,n,o,d=this._textLines[r],a,g,v=0,_=new Array(d.length),y=0,T,P,D=this.path,B=this.pathSide==="right";for(this.__charBounds[r]=_,n=0;n<d.length;n++)o=d[n],g=this._getGraphemeBox(o,r,n,a),_[n]=g,s+=g.kernedWidth,a=o;if(_[n]={left:g?g.left+g.width:0,width:0,kernedWidth:0,height:this.fontSize},D){switch(P=D.segmentsInfo[D.segmentsInfo.length-1].length,T=i.util.getPointOnPath(D.path,0,D.segmentsInfo),T.x+=D.pathOffset.x,T.y+=D.pathOffset.y,this.textAlign){case"left":y=B?P-s:0;break;case"center":y=(P-s)/2;break;case"right":y=B?0:P-s;break}for(y+=this.pathStartOffset*(B?-1:1),n=B?d.length-1:0;B?n>=0:n<d.length;B?n--:n++)g=_[n],y>P?y%=P:y<0&&(y+=P),this._setGraphemeOnPath(y,g,T),y+=g.kernedWidth}return{width:s,numOfSpaces:v}},_setGraphemeOnPath:function(r,s,n){var o=r+s.kernedWidth/2,d=this.path,a=i.util.getPointOnPath(d.path,o,d.segmentsInfo);s.renderLeft=a.x-n.x,s.renderTop=a.y-n.y,s.angle=a.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(r,s,n,o,d){var a=this.getCompleteStyleDeclaration(s,n),g=o?this.getCompleteStyleDeclaration(s,n-1):{},v=this._measureChar(r,a,o,g),_=v.kernedWidth,y=v.width,T;this.charSpacing!==0&&(T=this._getWidthOfCharSpacing(),y+=T,_+=T);var P={width:y,left:0,height:a.fontSize,kernedWidth:_,deltaY:a.deltaY};if(n>0&&!d){var D=this.__charBounds[s][n-1];P.left=D.left+D.width+v.kernedWidth-v.width}return P},getHeightOfLine:function(r){if(this.__lineHeights[r])return this.__lineHeights[r];for(var s=this._textLines[r],n=this.getHeightOfChar(r,0),o=1,d=s.length;o<d;o++)n=Math.max(this.getHeightOfChar(r,o),n);return this.__lineHeights[r]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var r,s=0,n=0,o=this._textLines.length;n<o;n++)r=this.getHeightOfLine(n),s+=n===o-1?r/this.lineHeight:r;return s},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(r,s){r.save();for(var n=0,o=this._getLeftOffset(),d=this._getTopOffset(),a=0,g=this._textLines.length;a<g;a++){var v=this.getHeightOfLine(a),_=v/this.lineHeight,y=this._getLineLeftOffset(a);this._renderTextLine(s,r,this._textLines[a],o+y,d+n+_,a),n+=v}r.restore()},_renderTextFill:function(r){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(r,"fillText")},_renderTextStroke:function(r){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(r),r.save(),this._setLineDash(r,this.strokeDashArray),r.beginPath(),this._renderTextCommon(r,"strokeText"),r.closePath(),r.restore())},_renderChars:function(r,s,n,o,d,a){var g=this.getHeightOfLine(a),v=this.textAlign.indexOf("justify")!==-1,_,y,T="",P,D=0,B,j=this.path,z=!v&&this.charSpacing===0&&this.isEmptyStyles(a)&&!j,ee=this.direction==="ltr",ne=this.direction==="ltr"?1:-1,ie,Z=s.canvas.getAttribute("dir");if(s.save(),Z!==this.direction&&(s.canvas.setAttribute("dir",ee?"ltr":"rtl"),s.direction=ee?"ltr":"rtl",s.textAlign=ee?"left":"right"),d-=g*this._fontSizeFraction/this.lineHeight,z){this._renderChar(r,s,a,0,n.join(""),o,d,g),s.restore();return}for(var re=0,pe=n.length-1;re<=pe;re++)B=re===pe||this.charSpacing||j,T+=n[re],P=this.__charBounds[a][re],D===0?(o+=ne*(P.kernedWidth-P.width),D+=P.width):D+=P.kernedWidth,v&&!B&&this._reSpaceAndTab.test(n[re])&&(B=!0),B||(_=_||this.getCompleteStyleDeclaration(a,re),y=this.getCompleteStyleDeclaration(a,re+1),B=i.util.hasStyleChanged(_,y,!1)),B&&(j?(s.save(),s.translate(P.renderLeft,P.renderTop),s.rotate(P.angle),this._renderChar(r,s,a,re,T,-D/2,0,g),s.restore()):(ie=o,this._renderChar(r,s,a,re,T,ie,d,g)),T="",_=y,o+=ne*D,D=0);s.restore()},_applyPatternGradientTransformText:function(r){var s=i.util.createCanvasElement(),n,o=this.width+this.strokeWidth,d=this.height+this.strokeWidth;return s.width=o,s.height=d,n=s.getContext("2d"),n.beginPath(),n.moveTo(0,0),n.lineTo(o,0),n.lineTo(o,d),n.lineTo(0,d),n.closePath(),n.translate(o/2,d/2),n.fillStyle=r.toLive(n),this._applyPatternGradientTransform(n,r),n.fill(),n.createPattern(s,"no-repeat")},handleFiller:function(r,s,n){var o,d;return n.toLive?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(o=-this.width/2,d=-this.height/2,r.translate(o,d),r[s]=this._applyPatternGradientTransformText(n),{offsetX:o,offsetY:d}):(r[s]=n.toLive(r,this),this._applyPatternGradientTransform(r,n)):(r[s]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(r,s){return r.lineWidth=s.strokeWidth,r.lineCap=this.strokeLineCap,r.lineDashOffset=this.strokeDashOffset,r.lineJoin=this.strokeLineJoin,r.miterLimit=this.strokeMiterLimit,this.handleFiller(r,"strokeStyle",s.stroke)},_setFillStyles:function(r,s){return this.handleFiller(r,"fillStyle",s.fill)},_renderChar:function(r,s,n,o,d,a,g){var v=this._getStyleDeclaration(n,o),_=this.getCompleteStyleDeclaration(n,o),y=r==="fillText"&&_.fill,T=r==="strokeText"&&_.stroke&&_.strokeWidth,P,D;!T&&!y||(s.save(),y&&(P=this._setFillStyles(s,_)),T&&(D=this._setStrokeStyles(s,_)),s.font=this._getFontDeclaration(_),v&&v.textBackgroundColor&&this._removeShadow(s),v&&v.deltaY&&(g+=v.deltaY),y&&s.fillText(d,a-P.offsetX,g-P.offsetY),T&&s.strokeText(d,a-D.offsetX,g-D.offsetY),s.restore())},setSuperscript:function(r,s){return this._setScript(r,s,this.superscript)},setSubscript:function(r,s){return this._setScript(r,s,this.subscript)},_setScript:function(r,s,n){var o=this.get2DCursorLocation(r,!0),d=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"fontSize"),a=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"deltaY"),g={fontSize:d*n.size,deltaY:a+d*n.baseline};return this.setSelectionStyles(g,r,s),this},_getLineLeftOffset:function(r){var s=this.getLineWidth(r),n=this.width-s,o=this.textAlign,d=this.direction,g,a=0,g=this.isEndOfWrapping(r);return o==="justify"||o==="justify-center"&&!g||o==="justify-right"&&!g||o==="justify-left"&&!g?0:(o==="center"&&(a=n/2),o==="right"&&(a=n),o==="justify-center"&&(a=n/2),o==="justify-right"&&(a=n),d==="rtl"&&(a-=n),a)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var r=this._forceClearCache;return r||(r=this.hasStateChanged("_dimensionAffectingProps")),r&&(this.dirty=!0,this._forceClearCache=!1),r},getLineWidth:function(r){if(this.__lineWidths[r]!==void 0)return this.__lineWidths[r];var s=this.measureLine(r),n=s.width;return this.__lineWidths[r]=n,n},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(r,s,n){var o=this._getStyleDeclaration(r,s);return o&&typeof o[n]<"u"?o[n]:this[n]},_renderTextDecoration:function(r,s){if(!(!this[s]&&!this.styleHas(s))){for(var n,o,d,a,g,v,_,y,T=this._getLeftOffset(),P=this._getTopOffset(),D,B,j,z,ee,ne,ie,Z,re=this.path,pe=this._getWidthOfCharSpacing(),me=this.offsets[s],G=0,O=this._textLines.length;G<O;G++){if(n=this.getHeightOfLine(G),!this[s]&&!this.styleHas(s,G)){P+=n;continue}_=this._textLines[G],ne=n/this.lineHeight,a=this._getLineLeftOffset(G),B=0,j=0,y=this.getValueOfPropertyAt(G,0,s),Z=this.getValueOfPropertyAt(G,0,"fill"),D=P+ne*(1-this._fontSizeFraction),o=this.getHeightOfChar(G,0),g=this.getValueOfPropertyAt(G,0,"deltaY");for(var I=0,k=_.length;I<k;I++)if(z=this.__charBounds[G][I],ee=this.getValueOfPropertyAt(G,I,s),ie=this.getValueOfPropertyAt(G,I,"fill"),d=this.getHeightOfChar(G,I),v=this.getValueOfPropertyAt(G,I,"deltaY"),re&&ee&&ie)r.save(),r.fillStyle=Z,r.translate(z.renderLeft,z.renderTop),r.rotate(z.angle),r.fillRect(-z.kernedWidth/2,me*d+v,z.kernedWidth,this.fontSize/15),r.restore();else if((ee!==y||ie!==Z||d!==o||v!==g)&&j>0){var R=T+a+B;this.direction==="rtl"&&(R=this.width-R-j),y&&Z&&(r.fillStyle=Z,r.fillRect(R,D+me*o+g,j,this.fontSize/15)),B=z.left,j=z.width,y=ee,Z=ie,o=d,g=v}else j+=z.kernedWidth;var R=T+a+B;this.direction==="rtl"&&(R=this.width-R-j),r.fillStyle=ie,ee&&ie&&r.fillRect(R,D+me*o+g,j-pe,this.fontSize/15),P+=n}this._removeShadow(r)}},_getFontDeclaration:function(r,s){var n=r||this,o=this.fontFamily,d=i.Text.genericFonts.indexOf(o.toLowerCase())>-1,a=o===void 0||o.indexOf("'")>-1||o.indexOf(",")>-1||o.indexOf('"')>-1||d?n.fontFamily:'"'+n.fontFamily+'"';return[i.isLikelyNode?n.fontWeight:n.fontStyle,i.isLikelyNode?n.fontStyle:n.fontWeight,s?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",a].join(" ")},render:function(r){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",r))},_splitTextIntoLines:function(r){for(var s=r.split(this._reNewline),n=new Array(s.length),o=[`
`],d=[],a=0;a<s.length;a++)n[a]=i.util.string.graphemeSplit(s[a]),d=d.concat(n[a],o);return d.pop(),{_unwrappedLines:n,lines:s,graphemeText:d,graphemeLines:n}},toObject:function(r){var s=u.concat(r),n=this.callSuper("toObject",s);return n.styles=i.util.stylesToArray(this.styles,this.text),n.path&&(n.path=this.path.toObject()),n},set:function(r,s){this.callSuper("set",r,s);var n=!1,o=!1;if(typeof r=="object")for(var d in r)d==="path"&&this.setPathInfo(),n=n||this._dimensionAffectingProps.indexOf(d)!==-1,o=o||d==="path";else n=this._dimensionAffectingProps.indexOf(r)!==-1,o=r==="path";return o&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),i.Text.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),i.Text.DEFAULT_SVG_FONT_SIZE=16,i.Text.fromElement=function(r,s,n){if(!r)return s(null);var o=i.parseAttributes(r,i.Text.ATTRIBUTE_NAMES),d=o.textAnchor||"left";if(n=i.util.object.extend(n?c(n):{},o),n.top=n.top||0,n.left=n.left||0,o.textDecoration){var a=o.textDecoration;a.indexOf("underline")!==-1&&(n.underline=!0),a.indexOf("overline")!==-1&&(n.overline=!0),a.indexOf("line-through")!==-1&&(n.linethrough=!0),delete n.textDecoration}"dx"in o&&(n.left+=o.dx),"dy"in o&&(n.top+=o.dy),"fontSize"in n||(n.fontSize=i.Text.DEFAULT_SVG_FONT_SIZE);var g="";"textContent"in r?g=r.textContent:"firstChild"in r&&r.firstChild!==null&&"data"in r.firstChild&&r.firstChild.data!==null&&(g=r.firstChild.data),g=g.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var v=n.strokeWidth;n.strokeWidth=0;var _=new i.Text(g,n),y=_.getScaledHeight()/_.height,T=(_.height+_.strokeWidth)*_.lineHeight-_.height,P=T*y,D=_.getScaledHeight()+P,B=0;d==="center"&&(B=_.getScaledWidth()/2),d==="right"&&(B=_.getScaledWidth()),_.set({left:_.left-B,top:_.top-(D-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:typeof v<"u"?v:1}),s(_)},i.Text.fromObject=function(r,s){var n=c(r),o=r.path;return delete n.path,i.Object._fromObject("Text",n,function(d){d.styles=i.util.stylesFromArray(r.styles,r.text),o?i.Object._fromObject("Path",o,function(a){d.set("path",a),s(d)},"path"):s(d)},"text")},i.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],i.util.createAccessors&&i.util.createAccessors(i.Text)}(f),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(h){if(!this.styles||typeof h<"u"&&!this.styles[h])return!0;var i=typeof h>"u"?this.styles:{line:this.styles[h]};for(var c in i)for(var u in i[c])for(var r in i[c][u])return!1;return!0},styleHas:function(h,i){if(!this.styles||!h||h===""||typeof i<"u"&&!this.styles[i])return!1;var c=typeof i>"u"?this.styles:{0:this.styles[i]};for(var u in c)for(var r in c[u])if(typeof c[u][r][h]<"u")return!0;return!1},cleanStyle:function(h){if(!this.styles||!h||h==="")return!1;var i=this.styles,c=0,u,r,s=!0,n=0,o;for(var d in i){u=0;for(var a in i[d]){var o=i[d][a],g=o.hasOwnProperty(h);c++,g?(r?o[h]!==r&&(s=!1):r=o[h],o[h]===this[h]&&delete o[h]):s=!1,Object.keys(o).length!==0?u++:delete i[d][a]}u===0&&delete i[d]}for(var v=0;v<this._textLines.length;v++)n+=this._textLines[v].length;s&&c===n&&(this[h]=r,this.removeStyle(h))},removeStyle:function(h){if(!(!this.styles||!h||h==="")){var i=this.styles,c,u,r;for(u in i){c=i[u];for(r in c)delete c[r][h],Object.keys(c[r]).length===0&&delete c[r];Object.keys(c).length===0&&delete i[u]}}},_extendStyles:function(h,i){var c=this.get2DCursorLocation(h);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),i)},get2DCursorLocation:function(h,i){typeof h>"u"&&(h=this.selectionStart);for(var c=i?this._unwrappedTextLines:this._textLines,u=c.length,r=0;r<u;r++){if(h<=c[r].length)return{lineIndex:r,charIndex:h};h-=c[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:c[r-1].length<h?c[r-1].length:h}},getSelectionStyles:function(h,i,c){typeof h>"u"&&(h=this.selectionStart||0),typeof i>"u"&&(i=this.selectionEnd||h);for(var u=[],r=h;r<i;r++)u.push(this.getStyleAtPosition(r,c));return u},getStyleAtPosition:function(h,i){var c=this.get2DCursorLocation(h),u=i?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return u||{}},setSelectionStyles:function(h,i,c){typeof i>"u"&&(i=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||i);for(var u=i;u<c;u++)this._extendStyles(u,h);return this._forceClearCache=!0,this},_getStyleDeclaration:function(h,i){var c=this.styles&&this.styles[h];return c?c[i]:null},getCompleteStyleDeclaration:function(h,i){for(var c=this._getStyleDeclaration(h,i)||{},u={},r,s=0;s<this._styleProperties.length;s++)r=this._styleProperties[s],u[r]=typeof c[r]>"u"?this[r]:c[r];return u},_setStyleDeclaration:function(h,i,c){this.styles[h][i]=c},_deleteStyleDeclaration:function(h,i){delete this.styles[h][i]},_getLineStyle:function(h){return!!this.styles[h]},_setLineStyle:function(h){this.styles[h]={}},_deleteLineStyle:function(h){delete this.styles[h]}})}(),function(){function h(i){i.textDecoration&&(i.textDecoration.indexOf("underline")>-1&&(i.underline=!0),i.textDecoration.indexOf("line-through")>-1&&(i.linethrough=!0),i.textDecoration.indexOf("overline")>-1&&(i.overline=!0),delete i.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(i,c){this.callSuper("initialize",i,c),this.initBehavior()},setSelectionStart:function(i){i=Math.max(i,0),this._updateAndFire("selectionStart",i)},setSelectionEnd:function(i){i=Math.min(i,this.text.length),this._updateAndFire("selectionEnd",i)},_updateAndFire:function(i,c){this[i]!==c&&(this._fireSelectionChanged(),this[i]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(i){this.clearContextTop(),this.callSuper("render",i),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(i){this.callSuper("_render",i)},clearContextTop:function(i){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,u=this.canvas.viewportTransform;c.save(),c.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this.transform(c),this._clearTextArea(c),i||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var i=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(i,c):this.renderSelection(i,c),c.restore()}},_clearTextArea:function(i){var c=this.width+4,u=this.height+4;i.clearRect(-c/2,-u/2,c,u)},_getCursorBoundaries:function(i){typeof i>"u"&&(i=this.selectionStart);var c=this._getLeftOffset(),u=this._getTopOffset(),r=this._getCursorBoundariesOffsets(i);return{left:c,top:u,leftOffset:r.left,topOffset:r.top}},_getCursorBoundariesOffsets:function(i){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,u,r,s=0,n=0,o,d=this.get2DCursorLocation(i);r=d.charIndex,u=d.lineIndex;for(var a=0;a<u;a++)s+=this.getHeightOfLine(a);c=this._getLineLeftOffset(u);var g=this.__charBounds[u][r];return g&&(n=g.left),this.charSpacing!==0&&r===this._textLines[u].length&&(n-=this._getWidthOfCharSpacing()),o={top:s,left:c+(n>0?n:0)},this.direction==="rtl"&&(o.left*=-1),this.cursorOffsetCache=o,this.cursorOffsetCache},renderCursor:function(i,c){var u=this.get2DCursorLocation(),r=u.lineIndex,s=u.charIndex>0?u.charIndex-1:0,n=this.getValueOfPropertyAt(r,s,"fontSize"),o=this.scaleX*this.canvas.getZoom(),d=this.cursorWidth/o,a=i.topOffset,g=this.getValueOfPropertyAt(r,s,"deltaY");a+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-n*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(i,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(r,s,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(i.left+i.leftOffset-d/2,a+i.top+g,d,n)},renderSelection:function(i,c){for(var u=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,r=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,s=this.textAlign.indexOf("justify")!==-1,n=this.get2DCursorLocation(u),o=this.get2DCursorLocation(r),d=n.lineIndex,a=o.lineIndex,g=n.charIndex<0?0:n.charIndex,v=o.charIndex<0?0:o.charIndex,_=d;_<=a;_++){var y=this._getLineLeftOffset(_)||0,T=this.getHeightOfLine(_),P=0,D=0,B=0;if(_===d&&(D=this.__charBounds[d][g].left),_>=d&&_<a)B=s&&!this.isEndOfWrapping(_)?this.width:this.getLineWidth(_)||5;else if(_===a)if(v===0)B=this.__charBounds[a][v].left;else{var j=this._getWidthOfCharSpacing();B=this.__charBounds[a][v-1].left+this.__charBounds[a][v-1].width-j}P=T,(this.lineHeight<1||_===a&&this.lineHeight>1)&&(T/=this.lineHeight);var z=i.left+y+D,ee=B-D,ne=T,ie=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",ne=1,ie=T):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(z=this.width-z-ee),c.fillRect(z,i.top+i.topOffset+ie,ee,ne),i.topOffset+=P}},getCurrentCharFontSize:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fontSize")},getCurrentCharColor:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fill")},_getCurrentCharIndex:function(){var i=this.get2DCursorLocation(this.selectionStart,!0),c=i.charIndex>0?i.charIndex-1:0;return{l:i.lineIndex,c}}}),t.IText.fromObject=function(i,c){var u=t.util.stylesFromArray(i.styles,i.text),r=Object.assign({},i,{styles:u});if(h(r),r.styles)for(var s in r.styles)for(var n in r.styles[s])h(r.styles[s][n]);t.Object._fromObject("IText",r,c,"text")}}(),function(){var h=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var i=this;this.on("added",function(){var c=i.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,i._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(i))})},initRemovedHandler:function(){var i=this;this.on("removed",function(){var c=i.canvas;c&&(c._iTextInstances=c._iTextInstances||[],t.util.removeFromArray(c._iTextInstances,i),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,i._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(i){i._mouseUpITextHandler=function(){i._iTextInstances&&i._iTextInstances.forEach(function(c){c.__isMousedown=!1})},i.on("mouse:up",i._mouseUpITextHandler)},_removeCanvasHandlers:function(i){i.off("mouse:up",i._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(i,c,u,r){var s;return s={isAborted:!1,abort:function(){this.isAborted=!0}},i.animate("_currentCursorOpacity",c,{duration:u,onComplete:function(){s.isAborted||i[r]()},onChange:function(){i.canvas&&i.selectionStart===i.selectionEnd&&i.renderCursorOrSelection()},abort:function(){return s.isAborted}}),s},_onTickComplete:function(){var i=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){i._currentTickCompleteState=i._animateCursor(i,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(i){var c=this,u=i?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},u)},abortCursorAnimation:function(){var i=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,i&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(i){var c=0,u=i-1;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)c++,u--;for(;/\S/.test(this._text[u])&&u>-1;)c++,u--;return i-c},findWordBoundaryRight:function(i){var c=0,u=i;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)c++,u++;for(;/\S/.test(this._text[u])&&u<this._text.length;)c++,u++;return i+c},findLineBoundaryLeft:function(i){for(var c=0,u=i-1;!/\n/.test(this._text[u])&&u>-1;)c++,u--;return i-c},findLineBoundaryRight:function(i){for(var c=0,u=i;!/\n/.test(this._text[u])&&u<this._text.length;)c++,u++;return i+c},searchWordBoundary:function(i,c){for(var u=this._text,r=this._reSpace.test(u[i])?i-1:i,s=u[r],n=t.reNonWord;!n.test(s)&&r>0&&r<u.length;)r+=c,s=u[r];return n.test(s)&&(r+=c===1?0:1),r},selectWord:function(i){i=i||this.selectionStart;var c=this.searchWordBoundary(i,-1),u=this.searchWordBoundary(i,1);this.selectionStart=c,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(i){i=i||this.selectionStart;var c=this.findLineBoundaryLeft(i),u=this.findLineBoundaryRight(i);return this.selectionStart=c,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(i){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(i),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(i){i._iTextInstances&&i._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(i){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(i.e),u=this.selectionStart,r=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||u===r)&&(u===c||r===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==u||this.selectionEnd!==r)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(i,c,u){var r=u.slice(0,i),s=t.util.string.graphemeSplit(r).length;if(i===c)return{selectionStart:s,selectionEnd:s};var n=u.slice(i,c),o=t.util.string.graphemeSplit(n).length;return{selectionStart:s,selectionEnd:s+o}},fromGraphemeToStringSelection:function(i,c,u){var r=u.slice(0,i),s=r.join("").length;if(i===c)return{selectionStart:s,selectionEnd:s};var n=u.slice(i,c),o=n.join("").length;return{selectionStart:s,selectionEnd:s+o}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var i=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=i.selectionStart,this.hiddenTextarea.selectionEnd=i.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var i=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=i.selectionEnd,this.inCompositionMode||(this.selectionStart=i.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var i=this._calcTextareaPosition();this.hiddenTextarea.style.left=i.left,this.hiddenTextarea.style.top=i.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var i=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(i),u=this.get2DCursorLocation(i),r=u.lineIndex,s=u.charIndex,n=this.getValueOfPropertyAt(r,s,"fontSize")*this.lineHeight,o=c.leftOffset,d=this.calcTransformMatrix(),a={x:c.left+o,y:c.top+c.topOffset+n},g=this.canvas.getRetinaScaling(),v=this.canvas.upperCanvasEl,_=v.width/g,y=v.height/g,T=_-n,P=y-n,D=v.clientWidth/_,B=v.clientHeight/y;return a=t.util.transformPoint(a,d),a=t.util.transformPoint(a,this.canvas.viewportTransform),a.x*=D,a.y*=B,a.x<0&&(a.x=0),a.x>T&&(a.x=T),a.y<0&&(a.y=0),a.y>P&&(a.y=P),a.x+=this.canvas._offset.left,a.y+=this.canvas._offset.top,{left:a.x+"px",top:a.y+"px",fontSize:n+"px",charHeight:n}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var i=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),i&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),i&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var i in this.styles)this._textLines[i]||delete this.styles[i]},removeStyleFromTo:function(i,c){var u=this.get2DCursorLocation(i,!0),r=this.get2DCursorLocation(c,!0),s=u.lineIndex,n=u.charIndex,o=r.lineIndex,d=r.charIndex,a,g;if(s!==o){if(this.styles[s])for(a=n;a<this._unwrappedTextLines[s].length;a++)delete this.styles[s][a];if(this.styles[o])for(a=d;a<this._unwrappedTextLines[o].length;a++)g=this.styles[o][a],g&&(this.styles[s]||(this.styles[s]={}),this.styles[s][n+a-d]=g);for(a=s+1;a<=o;a++)delete this.styles[a];this.shiftLineStyles(o,s-o)}else if(this.styles[s]){g=this.styles[s];var v=d-n,_,y;for(a=n;a<d;a++)delete g[a];for(y in this.styles[s])_=parseInt(y,10),_>=d&&(g[_-v]=g[y],delete g[y])}},shiftLineStyles:function(i,c){var u=h(this.styles);for(var r in this.styles){var s=parseInt(r,10);s>i&&(this.styles[s+c]=u[s],u[s-c]||delete this.styles[s])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(i,c,u,r){var s,n={},o=!1,d=this._unwrappedTextLines[i].length===c;u||(u=1),this.shiftLineStyles(i,u),this.styles[i]&&(s=this.styles[i][c===0?c:c-1]);for(var a in this.styles[i]){var g=parseInt(a,10);g>=c&&(o=!0,n[g-c]=this.styles[i][a],d&&c===0||delete this.styles[i][a])}var v=!1;for(o&&!d&&(this.styles[i+u]=n,v=!0),v&&u--;u>0;)r&&r[u-1]?this.styles[i+u]={0:h(r[u-1])}:s?this.styles[i+u]={0:h(s)}:delete this.styles[i+u],u--;this._forceClearCache=!0},insertCharStyleObject:function(i,c,u,r){this.styles||(this.styles={});var s=this.styles[i],n=s?h(s):{};u||(u=1);for(var o in n){var d=parseInt(o,10);d>=c&&(s[d+u]=n[d],n[d-u]||delete s[d])}if(this._forceClearCache=!0,r){for(;u--;)!Object.keys(r[u]).length||(this.styles[i]||(this.styles[i]={}),this.styles[i][c+u]=h(r[u]));return}if(!!s)for(var a=s[c?c-1:1];a&&u--;)this.styles[i][c+u]=h(a)},insertNewStyleBlock:function(i,c,u){for(var r=this.get2DCursorLocation(c,!0),s=[0],n=0,o=0;o<i.length;o++)i[o]===`
`?(n++,s[n]=0):s[n]++;s[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,s[0],u),u=u&&u.slice(s[0]+1)),n&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+s[0],n);for(var o=1;o<n;o++)s[o]>0?this.insertCharStyleObject(r.lineIndex+o,0,s[o],u):u&&this.styles[r.lineIndex+o]&&u[0]&&(this.styles[r.lineIndex+o][0]=u[0]),u=u&&u.slice(s[o]+1);s[o]>0&&this.insertCharStyleObject(r.lineIndex+o,0,s[o],u)},setSelectionStartEndWithShift:function(i,c,u){u<=i?(c===i?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=i),this.selectionStart=u):u>i&&u<c?this._selectionDirection==="right"?this.selectionEnd=u:this.selectionStart=u:(c===i?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=u)},setSelectionInBoundaries:function(){var i=this.text.length;this.selectionStart>i?this.selectionStart=i:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>i?this.selectionEnd=i:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(h){if(!!this.canvas){this.__newClickTime=+new Date;var i=h.pointer;this.isTripleClick(i)&&(this.fire("tripleclick",h),this._stopEvent(h.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=i,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(h){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===h.x&&this.__lastPointer.y===h.y},_stopEvent:function(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(h){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(h.e))},tripleClickHandler:function(h){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(h.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(h.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(h){if(this.__isMousedown=!1,!(!this.editable||this.group||h.transform&&h.transform.actionPerformed||h.e.button&&h.e.button!==1)){if(this.canvas){var i=this.canvas._activeObject;if(i&&i!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(h.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(h){var i=this.getSelectionStartFromPointer(h),c=this.selectionStart,u=this.selectionEnd;h.shiftKey?this.setSelectionStartEndWithShift(c,u,i):(this.selectionStart=i,this.selectionEnd=i),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(h){for(var i=this.getLocalPointer(h),c=0,u=0,r=0,s=0,n=0,o,d,a=0,g=this._textLines.length;a<g&&r<=i.y;a++)r+=this.getHeightOfLine(a)*this.scaleY,n=a,a>0&&(s+=this._textLines[a-1].length+this.missingNewlineOffset(a-1));o=this._getLineLeftOffset(n),u=o*this.scaleX,d=this._textLines[n],this.direction==="rtl"&&(i.x=this.width*this.scaleX-i.x+u);for(var v=0,_=d.length;v<_&&(c=u,u+=this.__charBounds[n][v].kernedWidth*this.scaleX,u<=i.x);v++)s++;return this._getNewSelectionStartFromOffset(i,c,u,s,_)},_getNewSelectionStartFromOffset:function(h,i,c,u,r){var s=h.x-i,n=c-h.x,o=n>s||n<0?0:1,d=u+o;return this.flipX&&(d=r-d),d>this._text.length&&(d=this._text.length),d}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var h=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+h.top+"; left: "+h.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+h.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(h){if(!!this.isEditing){var i=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(h.keyCode in i)this[i[h.keyCode]](h);else if(h.keyCode in this.ctrlKeysMapDown&&(h.ctrlKey||h.metaKey))this[this.ctrlKeysMapDown[h.keyCode]](h);else return;h.stopImmediatePropagation(),h.preventDefault(),h.keyCode>=33&&h.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(h){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(h.keyCode in this.ctrlKeysMapUp&&(h.ctrlKey||h.metaKey))this[this.ctrlKeysMapUp[h.keyCode]](h);else return;h.stopImmediatePropagation(),h.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(h){var i=this.fromPaste;if(this.fromPaste=!1,h&&h.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,u=this._text.length,r=c.length,s,n,o=r-u,d=this.selectionStart,a=this.selectionEnd,g=d!==a,v,_,y;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var T=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),P=d>T.selectionStart;g?(s=this._text.slice(d,a),o+=a-d):r<u&&(P?s=this._text.slice(a+o,a):s=this._text.slice(d,d-o)),n=c.slice(T.selectionEnd-o,T.selectionEnd),s&&s.length&&(n.length&&(v=this.getSelectionStyles(d,d+1,!1),v=n.map(function(){return v[0]})),g?(_=d,y=a):P?(_=a-s.length,y=a):(_=a,y=a+s.length),this.removeStyleFromTo(_,y)),n.length&&(i&&n.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(v=t.copiedTextStyle),this.insertNewStyleBlock(n,d,v)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(h){this.compositionStart=h.target.selectionStart,this.compositionEnd=h.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(h){return h&&h.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(h,i){var c=this._getLineLeftOffset(h),u;return i>0&&(u=this.__charBounds[h][i-1],c+=u.left+u.width),c},getDownCursorOffset:function(h,i){var c=this._getSelectionForOffset(h,i),u=this.get2DCursorLocation(c),r=u.lineIndex;if(r===this._textLines.length-1||h.metaKey||h.keyCode===34)return this._text.length-c;var s=u.charIndex,n=this._getWidthBeforeCursor(r,s),o=this._getIndexOnLine(r+1,n),d=this._textLines[r].slice(s);return d.length+o+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(h,i){return h.shiftKey&&this.selectionStart!==this.selectionEnd&&i?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(h,i){var c=this._getSelectionForOffset(h,i),u=this.get2DCursorLocation(c),r=u.lineIndex;if(r===0||h.metaKey||h.keyCode===33)return-c;var s=u.charIndex,n=this._getWidthBeforeCursor(r,s),o=this._getIndexOnLine(r-1,n),d=this._textLines[r].slice(0,s),a=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+o-d.length+(1-a)},_getIndexOnLine:function(h,i){for(var c=this._textLines[h],u=this._getLineLeftOffset(h),r=u,s=0,n,o,d=0,a=c.length;d<a;d++)if(n=this.__charBounds[h][d].width,r+=n,r>i){o=!0;var g=r-n,v=r,_=Math.abs(g-i),y=Math.abs(v-i);s=y<_?d:d-1;break}return o||(s=c.length-1),s},moveCursorDown:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",h)},moveCursorUp:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",h)},_moveCursorUpOrDown:function(h,i){var c="get"+h+"CursorOffset",u=this[c](i,this._selectionDirection==="right");i.shiftKey?this.moveCursorWithShift(u):this.moveCursorWithoutShift(u),u!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(h){var i=this._selectionDirection==="left"?this.selectionStart+h:this.selectionEnd+h;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,i),h!==0},moveCursorWithoutShift:function(h){return h<0?(this.selectionStart+=h,this.selectionEnd=this.selectionStart):(this.selectionEnd+=h,this.selectionStart=this.selectionEnd),h!==0},moveCursorLeft:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",h)},_move:function(h,i,c){var u;if(h.altKey)u=this["findWordBoundary"+c](this[i]);else if(h.metaKey||h.keyCode===35||h.keyCode===36)u=this["findLineBoundary"+c](this[i]);else return this[i]+=c==="Left"?-1:1,!0;if(typeof u<"u"&&this[i]!==u)return this[i]=u,!0},_moveLeft:function(h,i){return this._move(h,i,"Left")},_moveRight:function(h,i){return this._move(h,i,"Right")},moveCursorLeftWithoutShift:function(h){var i=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(i=this._moveLeft(h,"selectionStart")),this.selectionEnd=this.selectionStart,i},moveCursorLeftWithShift:function(h){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(h,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(h,"selectionStart")},moveCursorRight:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",h)},_moveCursorLeftOrRight:function(h,i){var c="moveCursor"+h+"With";this._currentCursorOpacity=1,i.shiftKey?c+="Shift":c+="outShift",this[c](i)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(h){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(h,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(h,"selectionEnd")},moveCursorRightWithoutShift:function(h){var i=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(i=this._moveRight(h,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,i},removeChars:function(h,i){typeof i>"u"&&(i=h+1),this.removeStyleFromTo(h,i),this._text.splice(h,i-h),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(h,i,c,u){typeof u>"u"&&(u=c),u>c&&this.removeStyleFromTo(c,u);var r=t.util.string.graphemeSplit(h);this.insertNewStyleBlock(r,c,i),this._text=[].concat(this._text.slice(0,c),r,this._text.slice(u)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var h=t.util.toFixed,i=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),u=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(u)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var u=!0,r=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",r?'text-decoration="'+r+'" ':"",'style="',this.getSvgStyles(u),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,u){var r=[],s=[],n=c,o;this._setSVGBg(s);for(var d=0,a=this._textLines.length;d<a;d++)o=this._getLineLeftOffset(d),(this.textBackgroundColor||this.styleHas("textBackgroundColor",d))&&this._setSVGTextLineBg(s,d,u+o,n),this._setSVGTextLineText(r,d,u+o,n),n+=this.getHeightOfLine(d);return{textSpans:r,textBgRects:s}},_createTextCharSpan:function(c,u,r,s){var n=c!==c.trim()||c.match(i),o=this.getSvgSpanStyles(u,n),d=o?'style="'+o+'"':"",a=u.deltaY,g="",v=t.Object.NUM_FRACTION_DIGITS;return a&&(g=' dy="'+h(a,v)+'" '),['<tspan x="',h(r,v),'" y="',h(s,v),'" ',g,d,">",t.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,u,r,s){var n=this.getHeightOfLine(u),o=this.textAlign.indexOf("justify")!==-1,d,a,g="",v,_,y=0,T=this._textLines[u],P;s+=n*(1-this._fontSizeFraction)/this.lineHeight;for(var D=0,B=T.length-1;D<=B;D++)P=D===B||this.charSpacing,g+=T[D],v=this.__charBounds[u][D],y===0?(r+=v.kernedWidth-v.width,y+=v.width):y+=v.kernedWidth,o&&!P&&this._reSpaceAndTab.test(T[D])&&(P=!0),P||(d=d||this.getCompleteStyleDeclaration(u,D),a=this.getCompleteStyleDeclaration(u,D+1),P=t.util.hasStyleChanged(d,a,!0)),P&&(_=this._getStyleDeclaration(u,D)||{},c.push(this._createTextCharSpan(g,_,r,s)),g="",d=a,r+=y,y=0)},_pushTextBgRect:function(c,u,r,s,n,o){var d=t.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(u),' x="',h(r,d),'" y="',h(s,d),'" width="',h(n,d),'" height="',h(o,d),`"></rect>
`)},_setSVGTextLineBg:function(c,u,r,s){for(var n=this._textLines[u],o=this.getHeightOfLine(u)/this.lineHeight,d=0,a=0,g,v,_=this.getValueOfPropertyAt(u,0,"textBackgroundColor"),y=0,T=n.length;y<T;y++)g=this.__charBounds[u][y],v=this.getValueOfPropertyAt(u,y,"textBackgroundColor"),v!==_?(_&&this._pushTextBgRect(c,_,r+a,s,d,o),a=g.left,d=g.width,_=v):d+=g.kernedWidth;v&&this._pushTextBgRect(c,v,r+a,s,d,o)},_getFillAttributes:function(c){var u=c&&typeof c=="string"?new t.Color(c):"";return!u||!u.getSource()||u.getAlpha()===1?'fill="'+c+'"':'opacity="'+u.getAlpha()+'" fill="'+u.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var u=0,r=0,s=0;s<c;s++)u+=this.getHeightOfLine(s);return r=this.getHeightOfLine(s),{lineTop:u,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var u=t.Object.prototype.getSvgStyles.call(this,c);return u+" white-space: pre;"}})}(),function(h){var i=h.fabric||(h.fabric={});i.Textbox=i.util.createClass(i.IText,i.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:i.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var u=0,r=0,s=0,n={},o=0;o<c.graphemeLines.length;o++)c.graphemeText[s]===`
`&&o>0?(r=0,s++,u++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[s])&&o>0&&(r++,s++),n[o]={line:u,offset:r},s+=c.graphemeLines[o].length,r+=c.graphemeLines[o].length;return n},styleHas:function(c,u){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[u];r&&(u=r.line)}return i.Text.prototype.styleHas.call(this,c,u)},isEmptyStyles:function(c){if(!this.styles)return!0;var u=0,r=c+1,s,n,o=!1,d=this._styleMap[c],a=this._styleMap[c+1];d&&(c=d.line,u=d.offset),a&&(r=a.line,o=r===c,s=a.offset),n=typeof c>"u"?this.styles:{line:this.styles[c]};for(var g in n)for(var v in n[g])if(v>=u&&(!o||v<s))for(var _ in n[g][v])return!1;return!0},_getStyleDeclaration:function(c,u){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[c];if(!r)return null;c=r.line,u=r.offset+u}return this.callSuper("_getStyleDeclaration",c,u)},_setStyleDeclaration:function(c,u,r){var s=this._styleMap[c];c=s.line,u=s.offset+u,this.styles[c][u]=r},_deleteStyleDeclaration:function(c,u){var r=this._styleMap[c];c=r.line,u=r.offset+u,delete this.styles[c][u]},_getLineStyle:function(c){var u=this._styleMap[c];return!!this.styles[u.line]},_setLineStyle:function(c){var u=this._styleMap[c];this.styles[u.line]={}},_wrapText:function(c,u){var r=[],s;for(this.isWrapping=!0,s=0;s<c.length;s++)r=r.concat(this._wrapLine(c[s],s,u));return this.isWrapping=!1,r},_measureWord:function(c,u,r){var s=0,n,o=!0;r=r||0;for(var d=0,a=c.length;d<a;d++){var g=this._getGraphemeBox(c[d],u,d+r,n,o);s+=g.kernedWidth,n=c[d]}return s},_wrapLine:function(c,u,r,z){var n=0,o=this.splitByGrapheme,d=[],a=[],g=o?i.util.string.graphemeSplit(c):c.split(this._wordJoiners),v="",_=0,y=o?"":" ",T=0,P=0,D=0,B=!0,j=this._getWidthOfCharSpacing(),z=z||0;g.length===0&&g.push([]),r-=z;for(var ee=0;ee<g.length;ee++)v=o?g[ee]:i.util.string.graphemeSplit(g[ee]),T=this._measureWord(v,u,_),_+=v.length,n+=P+T-j,n>r&&!B?(d.push(a),a=[],n=T,B=!0):n+=j,!B&&!o&&a.push(y),a=a.concat(v),P=o?0:this._measureWord([y],u,_),_++,B=!1,T>D&&(D=T);return ee&&d.push(a),D+z>this.dynamicMinWidth&&(this.dynamicMinWidth=D-j+z),d},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var u=i.Text.prototype._splitTextIntoLines.call(this,c),r=this._wrapText(u.lines,this.width),s=new Array(r.length),n=0;n<r.length;n++)s[n]=r[n].join("");return u.lines=s,u.graphemeLines=r,u},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var u in this._styleMap)this._textLines[u]&&(c[this._styleMap[u].line]=1);for(var u in this.styles)c[u]||delete this.styles[u]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),i.Textbox.fromObject=function(c,u){var r=i.util.stylesFromArray(c.styles,c.text),s=Object.assign({},c,{styles:r});return i.Object._fromObject("Textbox",s,u,"text")}}(f),function(){var h=t.controlsUtils,i=h.scaleSkewCursorStyleHandler,c=h.scaleCursorStyleHandler,u=h.scalingEqually,r=h.scalingYOrSkewingX,s=h.scalingXOrSkewingY,n=h.scaleOrSkewActionName,o=t.Object.prototype.controls;if(o.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:i,actionHandler:s,getActionName:n}),o.mr=new t.Control({x:.5,y:0,cursorStyleHandler:i,actionHandler:s,getActionName:n}),o.mb=new t.Control({x:0,y:.5,cursorStyleHandler:i,actionHandler:r,getActionName:n}),o.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:i,actionHandler:r,getActionName:n}),o.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:u}),o.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:u}),o.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:u}),o.br=new t.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:u}),o.mtr=new t.Control({x:0,y:-.5,actionHandler:h.rotationWithSnapping,cursorStyleHandler:h.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var d=t.Textbox.prototype.controls={};d.mtr=o.mtr,d.tr=o.tr,d.br=o.br,d.tl=o.tl,d.bl=o.bl,d.mt=o.mt,d.mb=o.mb,d.mr=new t.Control({x:.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:i,actionName:"resizing"}),d.ml=new t.Control({x:-.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:i,actionName:"resizing"})}}()})(ii);var Mi={exports:{}};const Ub=(f,t)=>Math.floor(Math.random()*(t-f+1)+f),Dh=()=>{const f=new Error("Delay aborted");return f.name="AbortError",f},Mh=({clearTimeout:f,setTimeout:t,willResolve:p})=>(C,{value:b,signal:w}={})=>{if(w&&w.aborted)return Promise.reject(Dh());let x,h,i;const c=f||clearTimeout,u=()=>{c(x),i(Dh())},r=()=>{w&&w.removeEventListener("abort",u)},s=new Promise((n,o)=>{h=()=>{r(),p?n(b):o(b)},i=o,x=(t||setTimeout)(h,C)});return w&&w.addEventListener("abort",u,{once:!0}),s.clear=()=>{c(x),x=null,h()},s},Gf=f=>{const t=Mh({...f,willResolve:!0});return t.reject=Mh({...f,willResolve:!1}),t.range=(p,C,b)=>t(Ub(p,C),b),t},vl=Gf();vl.createWithTimers=Gf;Mi.exports=vl;Mi.exports.default=vl;var Gb=function(){var f=document.getSelection();if(!f.rangeCount)return function(){};for(var t=document.activeElement,p=[],C=0;C<f.rangeCount;C++)p.push(f.getRangeAt(C));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return f.removeAllRanges(),function(){f.type==="Caret"&&f.removeAllRanges(),f.rangeCount||p.forEach(function(b){f.addRange(b)}),t&&t.focus()}},zb=Gb,Ih={"text/plain":"Text","text/html":"Url",default:"Text"},Yb="Copy to clipboard: #{key}, Enter";function Hb(f){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return f.replace(/#{\s*key\s*}/g,t)}function Xb(f,t){var p,C,b,w,x,h,i=!1;t||(t={}),p=t.debug||!1;try{b=zb(),w=document.createRange(),x=document.getSelection(),h=document.createElement("span"),h.textContent=f,h.ariaHidden="true",h.style.all="unset",h.style.position="fixed",h.style.top=0,h.style.clip="rect(0, 0, 0, 0)",h.style.whiteSpace="pre",h.style.webkitUserSelect="text",h.style.MozUserSelect="text",h.style.msUserSelect="text",h.style.userSelect="text",h.addEventListener("copy",function(u){if(u.stopPropagation(),t.format)if(u.preventDefault(),typeof u.clipboardData>"u"){p&&console.warn("unable to use e.clipboardData"),p&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=Ih[t.format]||Ih.default;window.clipboardData.setData(r,f)}else u.clipboardData.clearData(),u.clipboardData.setData(t.format,f);t.onCopy&&(u.preventDefault(),t.onCopy(u.clipboardData))}),document.body.appendChild(h),w.selectNodeContents(h),x.addRange(w);var c=document.execCommand("copy");if(!c)throw new Error("copy command was unsuccessful");i=!0}catch(u){p&&console.error("unable to copy using execCommand: ",u),p&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",f),t.onCopy&&t.onCopy(window.clipboardData),i=!0}catch(r){p&&console.error("unable to copy using clipboardData: ",r),p&&console.error("falling back to prompt"),C=Hb("message"in t?t.message:Yb),window.prompt(C,f)}}finally{x&&(typeof x.removeRange=="function"?x.removeRange(w):x.removeAllRanges()),h&&document.body.removeChild(h),b()}return i}var Vb=Xb;const Kb=je('<div class="dummy"><canvas></canvas><a href="#" target="_blank">Dummy Download</a></div>'),$o=je('<span class="slash">/</span>'),qb=je('<div class="g:16"><div class="g:8"><label><svg viewBox="0 0 512 512"><path d="M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"></path></svg>Download</label><div class="gh:16"><button>PNG</button><button>WebP</button><button>SVG</button></div></div><div class="g:8"><label><svg viewBox="0 0 640 512"><path d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"></path></svg>Copy Code</label><div class="g:16"><div class="gh:16"><button></button><button></button></div><div class="gh:16"><button></button><button></button></div></div></div></div>'),tl=8192,Ns=8,kh=8;ii.fabric.perfLimitSizeTotal=tl*tl;ii.fabric.maxCacheSideLimit=tl;const Jb=f=>{let t,p,C;const b=tn({current:{action:void 0,type:void 0,encode:void 0},state:"IDLE"});St(()=>{t&&(C=new ii.fabric.StaticCanvas(t))});const w=async(c=!0)=>{let u,r;return Xe.state.export.size?(r=Xe.state.export.size,u=Se.ganerateSVGPathCommand({canvasSize:r})):(r=Se.state.size,u=Se.ganerateSVGPathCommand()),`
${!!window.CREDITS&&c?`<!-- ${window.CREDITS} -->`:""}
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${r} ${r}">
${Xe.state.export.includeBackground?`<path d="M0,0H${r}V${r}H0z" fill="${new on(Se.state.backgroundColor).toHex()}" />`:""}
<path d="${u}" fill="${new on(Se.state.foregroundColor).toHex()}" />
</svg>
`.replace(/\n/g,"")},x=async c=>{if(Xe.state.export.size){let u,r;Xe.state.export.size?(r=Xe.state.export.size,u=Se.ganerateSVGPathCommand({canvasSize:r})):(r=Se.state.size,u=Se.ganerateSVGPathCommand()),t.width=r,t.height=r,C||(C=new ii.fabric.StaticCanvas(t)),C.setWidth(r),C.setHeight(r),C.clear(),Xe.state.export.includeBackground&&C.add(new ii.fabric.Rect({top:-Ns,left:-Ns,width:r+Ns*2,height:r+Ns*2,fill:new on(Se.state.backgroundColor).toHex()})),C.add(new ii.fabric.Path(u,{fill:new on(Se.state.foregroundColor).toHex()})),C.renderAll(),await Mi.exports(100)}else{let u=Se.state.size*kh,r=Se.ganerateSVGPathCommand({canvasSize:u});t.width=u,t.height=u;const s=t.getContext("2d");s.clearRect(0,0,u,u),Xe.state.export.includeBackground&&(s.fillStyle=new on(Se.state.backgroundColor).toStringHSLA(),s.fillRect(0,0,u,u)),s.fillStyle=new on(Se.state.foregroundColor).toStringHSLA(),s.fill(new Path2D(r),"evenodd")}return t.toDataURL(c=="PNG"?"image/png":c=="WEBP"?"image/webp":"image/png")},h=async(c=!0)=>"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(await w(c)),i=async(c,u,r="RAW")=>{df.track("button",{label:(()=>c=="DOWNLOAD"?u=="PNG"?"export/download/png":u=="WEBP"?"export/download/webp":u=="SVG"?"export/download/svg":"export/download/?":c=="COPY_CODE"?u=="PNG"?"export/copy-code/png-datauri":u=="WEBP"?"export/copy-code/webp-datauri":u=="SVG"?r=="RAW"?"export/copy-code/svg":"export/copy-code/svg-datauri":"export/copy-code/?":"export/?")()}),b.state="PROCESSING",b.current.action=c,b.current.type=u,b.current.encode=r;let s=c=="COPY_CODE"&&u=="SVG"&&r=="RAW"?await w():u=="SVG"?await h(!(c=="COPY_CODE"&&u=="SVG"&&r=="DATAURI")):await x(u);await Mi.exports(100),c=="DOWNLOAD"&&(p.download=u=="PNG"?"QRCode.png":u=="WEBP"?"QRCode.webp":u=="SVG"?"QRCode.svg":"QRCode",p.href=s),await Mi.exports(GC(Xe.state.export.size||Se.state.size*kh||8192,[256,8192],[500,3e3])),c=="DOWNLOAD"?p.click():c=="COPY_CODE"&&(Vb(s),b.state="DONE"),await Mi.exports(2e3),b.state="IDLE"};return[(()=>{const c=Kb.cloneNode(!0),u=c.firstChild,r=u.nextSibling,s=t;typeof s=="function"?yt(s,u):t=u;const n=p;return typeof n=="function"?yt(n,r):p=r,c})(),(()=>{const c=qb.cloneNode(!0),u=c.firstChild,r=u.firstChild,s=r.nextSibling,n=s.firstChild,o=n.nextSibling,d=o.nextSibling,a=u.nextSibling,g=a.firstChild,v=g.nextSibling,_=v.firstChild,y=_.firstChild,T=y.nextSibling,P=_.nextSibling,D=P.firstChild,B=D.nextSibling;return n.$$click=()=>i("DOWNLOAD","PNG"),o.$$click=()=>i("DOWNLOAD","WEBP"),d.$$click=()=>i("DOWNLOAD","SVG"),y.$$click=()=>i("COPY_CODE","PNG","DATAURI"),Re(y,we(rt,{get children(){return[we(rt.Case,{expression:()=>b.state=="DONE"&&b.current.action=="COPY_CODE"&&b.current.type=="PNG"&&b.current.encode=="DATAURI",get children(){return"Copied !"}}),we(rt.Fallback,{get children(){return["PNG ",$o.cloneNode(!0)," Data URI"]}})]}})),T.$$click=()=>i("COPY_CODE","WEBP","DATAURI"),Re(T,we(rt,{get children(){return[we(rt.Case,{expression:()=>b.state=="DONE"&&b.current.action=="COPY_CODE"&&b.current.type=="WEBP"&&b.current.encode=="DATAURI",get children(){return"Copied !"}}),we(rt.Fallback,{get children(){return["WebP ",$o.cloneNode(!0)," Data URI"]}})]}})),D.$$click=()=>i("COPY_CODE","SVG"),Re(D,we(rt,{get children(){return[we(rt.Case,{expression:()=>b.state=="DONE"&&b.current.action=="COPY_CODE"&&b.current.type=="SVG"&&b.current.encode=="RAW",get children(){return"Copied !"}}),we(rt.Fallback,{get children(){return"SVG"}})]}})),B.$$click=()=>i("COPY_CODE","SVG","DATAURI"),Re(B,we(rt,{get children(){return[we(rt.Case,{expression:()=>b.state=="DONE"&&b.current.action=="COPY_CODE"&&b.current.type=="SVG"&&b.current.encode=="DATAURI",get children(){return"Copied !"}}),we(rt.Fallback,{get children(){return["SVG ",$o.cloneNode(!0)," Data URI"]}})]}})),st(j=>{const z=pt({":disable":!Se.state.isGenerated}),ee=pt({":processing":b.state=="PROCESSING"&&b.current.action=="DOWNLOAD"&&b.current.type=="PNG"}),ne=!Se.state.isGenerated||b.state!="IDLE",ie=pt({":processing":b.state=="PROCESSING"&&b.current.action=="DOWNLOAD"&&b.current.type=="WEBP"}),Z=!Se.state.isGenerated||b.state!="IDLE",re=pt({":processing":b.state=="PROCESSING"&&b.current.action=="DOWNLOAD"&&b.current.type=="SVG"}),pe=!Se.state.isGenerated||b.state!="IDLE",me=pt({":disable":!Se.state.isGenerated}),G=pt({":processing":b.state=="PROCESSING"&&b.current.action=="COPY_CODE"&&b.current.type=="PNG"&&b.current.encode=="DATAURI"}),O=!Se.state.isGenerated||b.state!="IDLE",I=pt({":processing":b.state=="PROCESSING"&&b.current.action=="COPY_CODE"&&b.current.type=="WEBP"&&b.current.encode=="DATAURI"}),k=!Se.state.isGenerated||b.state!="IDLE",R=pt({":processing":b.state=="PROCESSING"&&b.current.action=="COPY_CODE"&&b.current.type=="SVG"&&b.current.encode=="RAW"}),Y=!Se.state.isGenerated||b.state!="IDLE",F=pt({":processing":b.state=="PROCESSING"&&b.current.action=="COPY_CODE"&&b.current.type=="SVG"&&b.current.encode=="DATAURI"}),A=!Se.state.isGenerated||b.state!="IDLE";return z!==j._v$&&gt(r,j._v$=z),ee!==j._v$2&&gt(n,j._v$2=ee),ne!==j._v$3&&(n.disabled=j._v$3=ne),ie!==j._v$4&&gt(o,j._v$4=ie),Z!==j._v$5&&(o.disabled=j._v$5=Z),re!==j._v$6&&gt(d,j._v$6=re),pe!==j._v$7&&(d.disabled=j._v$7=pe),me!==j._v$8&&gt(g,j._v$8=me),G!==j._v$9&&gt(y,j._v$9=G),O!==j._v$10&&(y.disabled=j._v$10=O),I!==j._v$11&&gt(T,j._v$11=I),k!==j._v$12&&(T.disabled=j._v$12=k),R!==j._v$13&&gt(D,j._v$13=R),Y!==j._v$14&&(D.disabled=j._v$14=Y),F!==j._v$15&&gt(B,j._v$15=F),A!==j._v$16&&(B.disabled=j._v$16=A),j},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0,_v$12:void 0,_v$13:void 0,_v$14:void 0,_v$15:void 0,_v$16:void 0}),c})()]};cn(["click"]);const Zb=je('<svg viewBox="0 0 24 24"><path d="M 14 6 L 14 2.01 C 14.06 2.06 14.12 2.12 14.17 2.17 L 19.83 7.83 C 19.88 7.88 19.94 7.94 19.99 8 L 16 8 C 14.897 7.997 14.003 7.103 14 6 Z M 21 10.66 L 21 20 C 21 21.657 19.657 23 18 23 L 6 23 C 4.343 23 3 21.657 3 20 L 3 4 C 3 2.343 4.343 1 6 1 L 11.34 1 C 11.561 1 11.782 1.02 12 1.06 L 12 6 C 12 8.209 13.791 10 16 10 L 20.94 10 C 20.98 10.218 21 10.439 21 10.66 Z M 6.134 14.5 C 5.749 15.167 6.23 16 7 16 L 11 16 C 11.357 16 11.687 15.809 11.866 15.5 C 12.251 14.833 11.77 14 11 14 L 7 14 C 6.643 14 6.313 14.191 6.134 14.5 Z M 17.866 19.5 C 18.251 18.833 17.77 18 17 18 L 7 18 C 6.643 18 6.313 18.191 6.134 18.5 C 5.749 19.167 6.23 20 7 20 L 17 20 C 17.357 20 17.687 19.809 17.866 19.5 Z"></path></svg>'),Qb=je('<svg viewBox="0 0 512 512"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg>'),ew=je('<svg viewBox="0 0 640 512"><path d="M634.91 154.88C457.74-8.99 182.19-8.93 5.09 154.88c-6.66 6.16-6.79 16.59-.35 22.98l34.24 33.97c6.14 6.1 16.02 6.23 22.4.38 145.92-133.68 371.3-133.71 517.25 0 6.38 5.85 16.26 5.71 22.4-.38l34.24-33.97c6.43-6.39 6.3-16.82-.36-22.98zM320 352c-35.35 0-64 28.65-64 64s28.65 64 64 64 64-28.65 64-64-28.65-64-64-64zm202.67-83.59c-115.26-101.93-290.21-101.82-405.34 0-6.9 6.1-7.12 16.69-.57 23.15l34.44 33.99c6 5.92 15.66 6.32 22.05.8 83.95-72.57 209.74-72.41 293.49 0 6.39 5.52 16.05 5.13 22.05-.8l34.44-33.99c6.56-6.46 6.33-17.06-.56-23.15z"></path></svg>'),tw=je('<svg viewBox="0 0 512 512"><path d="M511.2 387l-23.25 100.8c-3.266 14.25-15.79 24.22-30.46 24.22C205.2 512 0 306.8 0 54.5c0-14.66 9.969-27.2 24.22-30.45l100.8-23.25C139.7-2.602 154.7 5.018 160.8 18.92l46.52 108.5c5.438 12.78 1.77 27.67-8.98 36.45L144.5 207.1c33.98 69.22 90.26 125.5 159.5 159.5l44.08-53.8c8.688-10.78 23.69-14.51 36.47-8.975l108.5 46.51C506.1 357.2 514.6 372.4 511.2 387z"></path></svg>'),nw=je('<svg viewBox="0 0 384 512"><path d="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0z"></path></svg>'),iw=je('<svg viewBox="0 0 512 512"><path d="M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"></path></svg>'),rw=je('<div class="form-body"><div class="g:16"><div class="select-type"></div></div><div class="pdv:24"><div class="divider"><hr><h1>Style</h1></div></div><div class="g:16"><div class="g:6"><label class="sb"><span>Margin</span><small class="noti">\xD7</small></label></div><div class="g:6"><label class="sb"><span>Smoothness</span><small class="noti"></small></label></div><div class="g:8"><div class="gh:6"><div class="g:6 fg:1"><label>Foreground Color</label></div><div class="link btn-color-invert"><svg viewBox="0 0 512 512"><path d="M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"></path></svg></div><div class="g:6 fg:1"><label>Background Color</label></div></div></div></div></div>'),sw=je('<span class="noti">Pixel Perfect</span>'),aw=je('<span class="noti">px</span>'),ow=je('<div class="form-footer"><div class="pdv:24"><div class="divider"><hr><h1>Export</h1></div></div><div class="g:32"><div class="g:16"><div class="g:6"><label class="sb"><span>Size</span><small class="fade"></small></label></div><label class="checkbox">Exclude background</label></div></div></div>'),lw=je("<div></div>"),uw=[{key:"RAW",label:"Raw",icon:()=>Zb.cloneNode(!0)},{key:"LINK",label:"Link",icon:()=>Qb.cloneNode(!0)},{key:"WIFI",label:"Wifi",icon:()=>ew.cloneNode(!0)},{key:"PHONE",label:"Phone",icon:()=>tw.cloneNode(!0)},{key:"LOCATION",label:"Location",icon:()=>nw.cloneNode(!0)},{key:"CRYPTO",label:"Crypto / Bitcoin",icon:()=>iw.cloneNode(!0)}],cw=()=>[(()=>{const f=rw.cloneNode(!0),t=f.firstChild,p=t.firstChild,C=t.nextSibling,b=C.nextSibling,w=b.firstChild,x=w.firstChild,h=x.firstChild,i=h.nextSibling,c=i.firstChild,u=w.nextSibling,r=u.firstChild,s=r.firstChild,n=s.nextSibling,o=u.nextSibling,d=o.firstChild,a=d.firstChild;a.firstChild;const g=a.nextSibling,v=g.nextSibling;return v.firstChild,Re(p,we(jf,{each:uw,children:(_,y)=>(()=>{const T=lw.cloneNode(!0);return T.$$click=()=>{Xe.state.contentType=_.key},Re(T,()=>_.icon,null),Re(T,()=>_.label,null),st(()=>gt(T,pt("link",{":selected":Xe.state.contentType==_.key}))),T})()})),Re(t,we(ti,{get value(){return Xe.state.contentType},get children(){return[we(ti.Case,{value:"RAW",get children(){return we(hb,{})}}),we(ti.Case,{value:"LINK",get children(){return we(db,{})}}),we(ti.Case,{value:"WIFI",get children(){return we(wb,{})}}),we(ti.Case,{value:"PHONE",get children(){return we(Pb,{})}}),we(ti.Case,{value:"LOCATION",get children(){return we(Lb,{})}}),we(ti.Case,{value:"CRYPTO",get children(){return we(kb,{})}})]}}),null),Re(i,()=>Se.state.margin,c),Re(w,we(ji,{min:1,max:4,grids:[33.3333,66.6667],get value(){return Se.state.margin},onChange:_=>{Se.state.margin=_}}),null),Re(n,(()=>{const _=an(()=>Se.state.roundCorner==0&&Se.state.eyeRoundCorner==0);return()=>_()?"Sharp":(()=>{const y=an(()=>Se.state.eyeRoundCorner==0);return()=>y()?[an(()=>Se.state.roundCorner),"%"]:["Pixel ",an(()=>Se.state.roundCorner),"%, Eyes ",an(()=>Se.state.eyeRoundCorner),"%"]})()})()),Re(u,we(ji,{min:0,max:200,step:5,grids:[50],get value(){return Se.state.roundCorner+Se.state.eyeRoundCorner},onChange:_=>{Se.state.roundCorner=Ir(_,0,100),Se.state.eyeRoundCorner=Ir(_-100,0,100)}}),null),Re(a,we(Ah,{get value(){return Se.state.foregroundColor},onChange:_=>{Se.state.foregroundColor=_}}),null),g.$$click=()=>{let _=Se.state.foregroundColor,y=Se.state.backgroundColor;Se.state.foregroundColor=y,Se.state.backgroundColor=_},Re(v,we(Ah,{get value(){return Se.state.backgroundColor},onChange:_=>{Se.state.backgroundColor=_},right:!0}),null),Re(o,we(jb,{}),null),f})(),(()=>{const f=ow.cloneNode(!0),t=f.firstChild,p=t.nextSibling,C=p.firstChild,b=C.firstChild,w=b.firstChild,x=w.firstChild,h=x.nextSibling,i=b.nextSibling,c=i.firstChild;return Re(h,we(rt,{get children(){return[we(rt.Case,{expression:()=>!Xe.state.export.size,get children(){return["For image editing \u2013 ",sw.cloneNode(!0)]}}),we(rt.Fallback,{get children(){const u=aw.cloneNode(!0),r=u.firstChild;return Re(u,()=>Xe.state.export.size,r),u}})]}})),Re(b,we(ji,{min:8,max:14,grids:[16.66666667,33.33333333,50,66.66666667,83.33333333],majorGrids:[83.33333333],get value(){return an(()=>Xe.state.export.size===!1)()?14:Math.log2(Xe.state.export.size)},onChange:u=>{Xe.state.export.size=u==14?!1:2**u}}),null),Re(i,we($f,{onChange:u=>{Xe.state.export.includeBackground=!u}}),c),Re(p,we(Jb,{}),null),f})()];cn(["click"]);window.CREDITS="Create at https://vedsmith92.github.io/qrcode-generator";const hw=()=>(St(()=>{df.page()}),we(Ao,{get children(){return[we(Ao.Preview,{get children(){return we(ZC,{})}}),we(Ao.Form,{get children(){return we(cw,{})}})]}})),fw=je('<div class="app-error">Oops! Something went wrong!</div>'),dw=()=>location.host=="vedsmith92.github.io"&&location.protocol=="https:",gw=()=>we(rt,{get children(){return[we(rt.Case,{expression:()=>dw(),get children(){return we(hw,{})}}),we(rt.Fallback,{get children(){return fw.cloneNode(!0)}})]}});k_(()=>we(gw,{}),document.getElementById("app"));
